// Test script for network connectivity improvements
import { checkBasicConnectivity, checkApiConnectivity, getNetworkStatus, createRetryableFetch } from './networkUtils.js';

export const testNetworkConnectivity = async () => {
  console.log('üß™ Testing Network Connectivity...');
  
  // Test 1: Basic connectivity
  console.log('\n1. Testing basic connectivity...');
  const basicOnline = checkBasicConnectivity();
  console.log(`   Basic connectivity: ${basicOnline ? '‚úÖ Online' : '‚ùå Offline'}`);
  
  // Test 2: API connectivity
  console.log('\n2. Testing API connectivity...');
  try {
    const apiOnline = await checkApiConnectivity();
    console.log(`   API connectivity: ${apiOnline ? '‚úÖ Available' : '‚ùå Unavailable'}`);
  } catch (error) {
    console.log(`   API connectivity: ‚ùå Error - ${error.message}`);
  }
  
  // Test 3: Network status
  console.log('\n3. Network status...');
  const status = getNetworkStatus();
  console.log(`   Connection type: ${status.connectionType}`);
  console.log(`   Downlink: ${status.downlink || 'unknown'} Mbps`);
  console.log(`   RTT: ${status.rtt || 'unknown'} ms`);
  
  // Test 4: Retryable fetch
  console.log('\n4. Testing retryable fetch...');
  const retryableFetch = createRetryableFetch(2, 1000);
  try {
    const response = await retryableFetch('https://jsonplaceholder.typicode.com/posts/1');
    console.log(`   Retryable fetch: ‚úÖ Success (${response.status})`);
  } catch (error) {
    console.log(`   Retryable fetch: ‚ùå Failed - ${error.message}`);
  }
  
  console.log('\n‚úÖ Network connectivity test completed!');
};

// Export for browser console testing
if (typeof window !== 'undefined') {
  window.testNetworkConnectivity = testNetworkConnectivity;
  console.log('üß™ Network connectivity test available: testNetworkConnectivity()');
} 