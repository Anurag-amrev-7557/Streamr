const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/assets/pages-rw9ofAHq.js","/assets/components-BGp2-5_K.js","/assets/react-vendor-B8s8WhkH.js","/assets/vendor-DE4tw0E4.js","/assets/realtime-vendor-DcTLajcJ.js","/assets/vendor-B_l4pjL9.css","/assets/animation-vendor-Nf7t8_Cc.js","/assets/services-BFeMWDUp.js","/assets/utils-vendor-CcZO55aC.js","/assets/hooks-CRMJribk.js","/assets/backendSwitcher-meq-8KV0.js"])))=>i.map(i=>d[i]);
import{O as e,e as t,Q as r,S as n,U as a,V as s,W as o,X as i,Z as c,$ as l,a0 as d,b as u,_ as h,p as m}from"./components-BGp2-5_K.js";import{r as p,j as f,R as g,ab as y,ac as w,ad as v,ae as _,O as x,af as j,ag as E}from"./react-vendor-B8s8WhkH.js";import{aB as S}from"./vendor-DE4tw0E4.js";import{u as b}from"./services-BFeMWDUp.js";import{e as I}from"./hooks-CRMJribk.js";import{M as k}from"./animation-vendor-Nf7t8_Cc.js";import"./utils-vendor-CcZO55aC.js";import"./realtime-vendor-DcTLajcJ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const T=p.createContext(),L="watchHistory",D="watchHistoryOfflineQueue",P="watchHistory_channel_v1";function O(){try{const e=localStorage.getItem(L);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}}function R(e){try{localStorage.setItem(L,JSON.stringify(e)),localStorage.setItem("watchHistoryLastSync",(new Date).toISOString());try{if("undefined"!=typeof BroadcastChannel){const t=new BroadcastChannel(P);t.postMessage({type:"local-update",payload:e}),t.close()}else localStorage.setItem(L+"_meta",Date.now().toString())}catch(t){}}catch(t){}}function C(){try{const e=localStorage.getItem(D);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return[]}}function A(e){try{const t=C();return t.push({...e,timestamp:(new Date).toISOString()}),localStorage.setItem(D,JSON.stringify(t)),!0}catch(t){return!1}}function z(){try{return localStorage.removeItem(D),!0}catch(e){return!1}}const H=({children:n})=>{const[a,s]=p.useState([]),[o,i]=p.useState(!1),[c,l]=p.useState(null),[d,u]=p.useState(!1),[h,m]=p.useState(null),[g,y]=p.useState(null),[w,v]=p.useState(!1),[_,x]=p.useState([]),j=p.useRef(!1),E=p.useRef(new Set),S=p.useRef(null),I=p.useRef("online"),k=p.useRef(null);p.useRef(null);const D=e(),H=(e,t)=>{if(e.length!==t.length)return!1;const r=(e,t)=>e.content>t.content?1:-1,n=[...e].sort(r),a=[...t].sort(r);for(let s=0;s<n.length;s++)if(n[s].content!==a[s].content||n[s].progress!==a[s].progress||n[s].lastWatched!==a[s].lastWatched)return!1;return!0},W=(e,t)=>{const r=new Map,n=(e,t)=>{try{const n=e&&e.lastWatched?new Date(e.lastWatched).getTime():0,a=r.get(e.content);a&&n<=a._ts||r.set(e.content,{...e,_ts:n,_origin:t})}catch(n){r.set(e.content,{...e,_ts:Date.now(),_origin:t})}};return(Array.isArray(e)?e:[]).forEach((e=>n(e,"local"))),(Array.isArray(t)?t:[]).forEach((e=>n(e,"remote"))),Array.from(r.values()).map((({_ts:e,_origin:t,...r})=>r))};p.useEffect((()=>{let e=!0;const t=()=>{if(!e)return;I.current="online",v(!1);const t=C();t.length>0&&x(t)},r=()=>{e&&(I.current="offline",v(!0))};window.addEventListener("online",t),window.addEventListener("offline",r),v(!navigator.onLine),I.current=navigator.onLine?"online":"offline";try{"undefined"!=typeof BroadcastChannel&&(k.current=new BroadcastChannel(P),k.current.onmessage=e=>{try{const{type:t,payload:r}=e.data||{};"local-update"===t&&Array.isArray(r)&&s((e=>H(e,r)?e:(j.current=!0,r))),"offline-queue-updated"===t&&x(C())}catch(t){}})}catch(n){}return()=>{e=!1,window.removeEventListener("online",t),window.removeEventListener("offline",r);try{k.current&&(k.current.close(),k.current=null)}catch(n){}}}),[]);const M=p.useCallback((async()=>{try{const r=localStorage.getItem("accessToken");if(!r)return;try{if(!(await fetch(t()+"/user/profile",{method:"GET",headers:{Authorization:"Bearer "+r}})).ok)return void localStorage.removeItem("accessToken")}catch(e){return}u(!0),m(null);const n=O(),a=await b.getWatchHistory();if(a.success&&a.data.watchHistory){const t=a.data.watchHistory,r=W(n,t);(async()=>{try{H(r,t)||(navigator.onLine?async function t(n=0){try{await b.syncWatchHistory(r),window.dispatchEvent(new Event("watch-history-synced")),window.dispatchEvent(new Event("achievements-refresh")),l((new Date).toISOString())}catch(e){3>n?setTimeout((()=>t(n+1)),500*Math.pow(2,n)):(A({type:"sync",data:r}),x(C()))}}():(A({type:"sync",data:r}),x(C())))}catch(e){}})(),j.current=!0,s(r),l((new Date).toISOString()),R(r)}}catch(r){r.message&&(r.message.includes("401")||r.message.includes("Unauthorized"))&&localStorage.removeItem("accessToken"),m(r.message)}finally{u(!1)}}),[]);p.useEffect((()=>{let e=!1;return(async()=>{if(navigator.onLine)if((await q(!0)).success)i(!0);else{const t=O();e||(s(t),i(!0))}else{const t=O();e||(s(t),i(!0),v(!0))}})(),()=>{e=!0}}),[]);const V=p.useRef(null),F=p.useCallback((e=>{V.current&&clearTimeout(V.current),V.current=setTimeout((()=>{R(e),V.current=null}),250)}),[]);p.useEffect((()=>{let e=null,t=null;const r=t=>{if("accessToken"===t.key){if(!localStorage.getItem("accessToken"))return s([]),z(),x([]),void i(!0);e=setTimeout((()=>{M()}),100)}if(t.key===L){const e=O();s((t=>H(t,e)?t:e))}};window.addEventListener("storage",r);const n=()=>{if(!localStorage.getItem("accessToken"))return s([]),z(),x([]),void i(!0);t=setTimeout((()=>{M()}),100)};return window.addEventListener("auth-changed",n),()=>{e&&clearTimeout(e),t&&clearTimeout(t),window.removeEventListener("storage",r),window.removeEventListener("auth-changed",n)}}),[M]);let $=null;try{$=r()}catch(Z){}p.useEffect((()=>{if($&&$.addListener){const e=$.addListener("watchHistory:updated",(e=>{e.userId&&e.watchHistory&&(H(a,e.watchHistory)||(j.current=!0,s(e.watchHistory),l(e.serverTimestamp||(new Date).toISOString()),R(e.watchHistory)))}));return()=>{e&&e()}}{const e=setInterval((async()=>{const e=localStorage.getItem("accessToken");if(e&&o&&!d){try{if(!(await fetch(t()+"/user/profile",{method:"GET",headers:{Authorization:"Bearer "+e}})).ok)return void localStorage.removeItem("accessToken")}catch{return}try{const e=await b.getWatchHistory();if(e.success&&e.data.watchHistory){const t=e.data.watchHistory;H(a,t)||(j.current=!0,s(t),l((new Date).toISOString()),R(t))}}catch(Z){Z.message&&(Z.message.includes("401")||Z.message.includes("Unauthorized"))&&localStorage.removeItem("accessToken")}}}),3e4);return()=>clearInterval(e)}}),[a,o,d,$]),p.useEffect((()=>{if(!o||j.current)return void(j.current=!1);if(0===a.length&&!S.current)return;let e=!0;const t=setTimeout((async()=>{if(e)try{if(!localStorage.getItem("accessToken"))return;if(E.current.size>0)return;if(!navigator.onLine)return void A({type:"sync",data:a});u(!0),m(null);const e=await b.getWatchHistory();if(e&&e.success&&e.data&&e.data.watchHistory){const r=e.data.watchHistory,n=W(a,r);if(!H(a,n)){j.current=!0,s(n);try{await b.syncWatchHistory(n),l((new Date).toISOString()),E.current.clear(),window.dispatchEvent(new Event("watch-history-synced")),window.dispatchEvent(new Event("achievements-refresh"))}catch(t){A({type:"sync",data:n}),x(C())}}}else try{await b.syncWatchHistory(a),l((new Date).toISOString()),E.current.clear(),window.dispatchEvent(new Event("watch-history-synced")),window.dispatchEvent(new Event("achievements-refresh"))}catch(t){A({type:"sync",data:a}),x(C())}}catch(Z){m(Z.message),navigator.onLine||A({type:"sync",data:a})}finally{e&&u(!1)}}),1e3);try{F(a),S.current=(new Date).toISOString()}catch(Z){}return()=>{e=!1,clearTimeout(t)}}),[a,o]),p.useEffect((()=>{w||0===_.length||d||(async()=>{try{u(!0);let t=0,r=null;for(;4>t;)try{const t=await b.processBatchWatchHistory(_);t&&t.success&&t.data&&t.data.watchHistory&&(j.current=!0,s(t.data.watchHistory),R(t.data.watchHistory),l((new Date).toISOString())),z(),x([]);try{k.current&&k.current.postMessage({type:"offline-queue-updated"})}catch(e){}r=null;break}catch(e){r=e,t+=1;const n=300*Math.pow(2,t);await new Promise((e=>setTimeout(e,n)))}r&&m(r.message||r)}catch(Z){m(Z.message)}finally{u(!1)}})()}),[w,_,d,a]);const B=p.useCallback((async(e,t=0)=>{if(!e)return;const r=`add_${e}_${Date.now()}`;E.current.add(r);const n=(new Date).toISOString();s((r=>{const a=r.findIndex((t=>t.content===e));if(a>-1){const e=[...r];return e[a]={...e[a],progress:t,lastWatched:n,syncTimestamp:n},e}return[...r,{content:e,progress:t,lastWatched:n,syncTimestamp:n}]})),D?.addToHistory&&D.addToHistory("watchHistory","add",{contentId:e,progress:t});try{F(O())}catch(a){}try{if(localStorage.getItem("accessToken")){if(!navigator.onLine)return A({type:"add",contentId:e,progress:t,timestamp:n}),void x(C());const r=O();await b.syncWatchHistory(r),l((new Date).toISOString()),window.dispatchEvent(new Event("watch-history-synced")),window.dispatchEvent(new Event("achievements-refresh"))}}catch(Z){m(Z.message),navigator.onLine||(A({type:"add",contentId:e,progress:t,timestamp:n}),x(C()))}finally{setTimeout((()=>{E.current.delete(r)}),100)}}),[D]),N=p.useCallback((async(e,t)=>{if(!e||"number"!=typeof t)return;const r=`update_${e}_${Date.now()}`;E.current.add(r);const n=(new Date).toISOString();s((r=>{const a=r.findIndex((t=>t.content===e));if(a>-1){const e=[...r];return e[a]={...e[a],progress:t,lastWatched:n,syncTimestamp:n},e}return r})),D?.addToHistory&&D.addToHistory("watchHistory","update",{contentId:e,progress:t});try{F(O())}catch(a){}try{if(localStorage.getItem("accessToken")){if(!navigator.onLine)return A({type:"update",contentId:e,progress:t,timestamp:n}),void x(C());const r=O();await b.syncWatchHistory(r),l((new Date).toISOString()),window.dispatchEvent(new Event("watch-history-synced")),window.dispatchEvent(new Event("achievements-refresh"))}}catch(Z){m(Z.message),navigator.onLine||A({type:"update",contentId:e,progress:t,timestamp:n})}finally{setTimeout((()=>{E.current.delete(r)}),100)}}),[D]),U=p.useCallback((async e=>{if(!e)return;const t=`remove_${e}_${Date.now()}`;E.current.add(t),s((t=>{const r=t.findIndex((t=>t.content===e));return r>-1?(D?.addToHistory&&D.addToHistory("watchHistory","remove",t[r]),t.filter((t=>t.content!==e))):t}));try{if(localStorage.getItem("accessToken"))if(navigator.onLine){const e=O();await b.syncWatchHistory(e),l((new Date).toISOString()),window.dispatchEvent(new Event("watch-history-synced")),window.dispatchEvent(new Event("achievements-refresh"))}else A({type:"remove",contentId:e,timestamp:(new Date).toISOString()}),x(C())}catch(Z){m(Z.message)}finally{setTimeout((()=>{E.current.delete(t)}),100)}}),[D]),K=p.useCallback((async()=>{const e="clear_"+Date.now();E.current.add(e),D?.addToHistory&&D.addToHistory("watchHistory","clear",[...a]),s([]);try{localStorage.getItem("accessToken")&&(navigator.onLine?(await b.syncWatchHistory([]),l((new Date).toISOString()),window.dispatchEvent(new Event("watch-history-synced")),window.dispatchEvent(new Event("achievements-refresh"))):(A({type:"clear",timestamp:(new Date).toISOString()}),x(C())))}catch(Z){m(Z.message)}finally{setTimeout((()=>{E.current.delete(e)}),100)}}),[a,D]),J=p.useCallback((async(e=!1)=>{try{if(!localStorage.getItem("accessToken"))throw Error("No authentication token found");if(!e&&E.current.size>0)return{success:!1,error:"Pending changes detected"};if(u(!0),m(null),!navigator.onLine)throw Error("You are offline. Changes will sync when connection is restored.");const t=await b.syncWatchHistory(O());return t&&t.watchHistory&&(j.current=!0,s(t.watchHistory),R(t.watchHistory)),l((new Date).toISOString()),E.current.clear(),{success:!0}}catch(Z){return m(Z.message),navigator.onLine||A({type:"sync",data:O(),timestamp:(new Date).toISOString()}),{success:!1,error:Z.message}}finally{u(!1)}}),[]),q=p.useCallback((async(e=!1)=>{try{if(!localStorage.getItem("accessToken"))throw Error("No authentication token found");if(!e&&E.current.size>0)return{success:!1,error:"Pending changes detected"};u(!0),m(null);const t=await b.getWatchHistory();if(t.success&&t.data.watchHistory){const e=t.data.watchHistory;return j.current=!0,s(e),l((new Date).toISOString()),R(e),{success:!0,data:e}}return{success:!1,error:"Invalid response format"}}catch(Z){return m(Z.message),{success:!1,error:Z.message}}finally{u(!1)}}),[]),Y=p.useCallback((async()=>await J(!0)),[J]),G=p.useCallback((async()=>await q(!0)),[q]),Q=p.useCallback((async()=>{try{if(!localStorage.getItem("accessToken"))throw Error("No authentication token found");u(!0),m(null);const e=await b.getWatchHistory();if(e.success&&e.data.watchHistory){const t=e.data.watchHistory;return j.current=!0,s(t),l((new Date).toISOString()),R(t),{success:!0,data:t}}return{success:!1,error:"Invalid response format"}}catch(Z){return m(Z.message),{success:!1,error:Z.message}}finally{u(!1)}}),[]),X=p.useMemo((()=>({watchHistory:a,isInitialized:o,isSyncing:d,syncError:h,lastBackendSync:c,lastConflict:g,addToWatchHistory:B,updateWatchHistoryProgress:N,removeFromWatchHistory:U,clearWatchHistory:K,syncWithBackend:J,loadFromBackend:q,forceSync:Y,forceLoad:G,refreshFromBackend:Q,getLocalWatchHistory:O})),[a,o,d,h,c,g,B,N,U,K,J,q,Y,G,Q]);return f.jsx(T.Provider,{value:X,children:n})},W=e=>{if(!e)return!1;let t="";try{t=e.toString().toLowerCase()}catch(s){try{t=(e.message||e.name||"unknown error").toLowerCase()}catch(o){t="unknown error"}}const r=e.url||e.src||"",n=["111movies.com","cloudfront.net","cloudflareinsights.com","valiw.hakunaymatata.com","qj.asokapygmoid.com","dh8azcl753e1e.cloudfront.net","youtube.com","youtu.be","googlevideo.com","google.com","play.google.com"].some((e=>r.includes(e)||t.includes(e))),a=t.includes("err_blocked_by_client")||t.includes("net::err_blocked_by_client")||t.includes("403 forbidden")||t.includes("404 not found")||t.includes("cors")||t.includes("cross-origin")||t.includes("generate_204")||t.includes("log_event")||t.includes("stats/qoe")||t.includes("youtubei/v1/log_event");return n||a};class M extends g.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,isRefreshing:!1}}static getDerivedStateFromError(e){return W(e)?{hasError:!1}:{hasError:!0}}componentDidCatch(e,t){W(e)||this.setState({error:e,errorInfo:t})}handleRefresh=()=>{this.setState({isRefreshing:!0}),setTimeout((()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRefreshing:!1})}),400)};render(){if(this.state.hasError){const e={minHeight:"100vh",width:"100vw",background:"linear-gradient(120deg, #000 0%, #181818 100%)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,position:"fixed",top:0,left:0,transition:"background 0.6s cubic-bezier(.4,0,.2,1)"},t={background:"rgba(20,20,20,0.96)",borderRadius:"1.5rem",boxShadow:"0 8px 32px 0 rgba(0,0,0,0.32), 0 1.5px 8px 0 #fff1",padding:"2.7rem 2.7rem 2.1rem 2.7rem",maxWidth:400,width:"92vw",display:"flex",flexDirection:"column",alignItems:"center",animation:"fadeInScale 0.7s cubic-bezier(.22,1,.36,1)",backdropFilter:"blur(12px) saturate(1.1)",border:"1.5px solid rgba(255,255,255,0.08)"},r={marginBottom:"1.7rem",background:"linear-gradient(135deg, #111 60%, #222 100%)",borderRadius:"50%",width:70,height:70,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 16px 0 rgba(255,255,255,0.04), 0 1.5px 8px 0 #fff1",animation:"popIn 0.7s cubic-bezier(.22,1,.36,1)",border:"2.5px solid #fff"},n={width:40,height:40,color:"#fff",opacity:.96,filter:"drop-shadow(0 2px 8px #fff3)"},a={fontSize:"1.45rem",fontWeight:700,color:"#fff",marginBottom:10,letterSpacing:"-0.01em",textAlign:"center",lineHeight:1.2,animation:"fadeInUp 0.7s 0.1s both cubic-bezier(.22,1,.36,1)",textShadow:"0 1px 4px #fff2"},s={color:"#e0e0e0",fontSize:"1.05rem",marginBottom:28,textAlign:"center",lineHeight:1.5,animation:"fadeInUp 0.7s 0.18s both cubic-bezier(.22,1,.36,1)",textShadow:"0 1px 2px #0008"},o={display:"flex",alignItems:"center",gap:10,background:"linear-gradient(90deg, #fff 0%, #222 100%)",color:"#000",border:"none",borderRadius:"999px",padding:"0.8rem 1.8rem",fontWeight:600,fontSize:"1.05rem",cursor:this.state.isRefreshing?"not-allowed":"pointer",boxShadow:"0 2px 12px 0 rgba(255,255,255,0.10)",outline:"none",transition:"background 0.25s, box-shadow 0.25s, transform 0.18s cubic-bezier(.22,1,.36,1)",opacity:this.state.isRefreshing?.7:1,pointerEvents:this.state.isRefreshing?"none":"auto",animation:"fadeInUp 0.7s 0.25s both cubic-bezier(.22,1,.36,1)",boxSizing:"border-box",borderBottom:"2.5px solid #fff1"},i={width:24,height:24,marginRight:0,color:"#000",opacity:.96,transform:this.state.isRefreshing?"rotate(360deg)":"none",transition:"transform 0.7s cubic-bezier(.22,1,.36,1)"},c="\n        @keyframes fadeInScale {\n          0% { opacity: 0; transform: scale(0.96);}\n          100% { opacity: 1; transform: scale(1);}\n        }\n        @keyframes popIn {\n          0% { opacity: 0; transform: scale(0.7);}\n          100% { opacity: 1; transform: scale(1);}\n        }\n        @keyframes fadeInUp {\n          0% { opacity: 0; transform: translateY(18px);}\n          100% { opacity: 1; transform: translateY(0);}\n        }\n        @keyframes spin {\n          100% { transform: rotate(360deg);}\n        }\n      ";return f.jsxs("div",{style:e,children:[f.jsx("style",{children:c}),f.jsxs("div",{style:t,children:[f.jsx("div",{style:r,children:f.jsxs("svg",{style:n,viewBox:"0 0 48 48",fill:"none","aria-hidden":"true",children:[f.jsx("circle",{cx:"24",cy:"24",r:"22",fill:"#181818"}),f.jsx("path",{d:"M24 13v11",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round",style:{filter:"drop-shadow(0 1px 2px #fff3)"}}),f.jsx("circle",{cx:"24",cy:"32",r:"1.7",fill:"#fff"})]})}),f.jsxs("div",{children:[f.jsx("div",{style:a,children:"Something went wrong"}),f.jsxs("div",{style:s,children:["We encountered an unexpected issue.",f.jsx("br",{}),"Please try refreshing the page."]})]}),f.jsxs("button",{onClick:this.handleRefresh,style:o,disabled:this.state.isRefreshing,"aria-busy":this.state.isRefreshing,children:[f.jsx("svg",{style:{...i,animation:this.state.isRefreshing?"spin 0.8s linear infinite":void 0},viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:f.jsx("path",{d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z",fill:"currentColor"})}),f.jsx("span",{children:this.state.isRefreshing?"Refreshing...":"Refresh Page"})]})]})]})}return this.props.children}}"undefined"!=typeof window&&(()=>{window.addEventListener("unhandledrejection",(e=>{const{reason:t}=e;W(t),e.preventDefault()})),window.addEventListener("error",(e=>{const{error:t}=e;W(t),e.preventDefault()}));const e=console.error;console.error=(...t)=>{try{const r=t.join(" ").toLowerCase();if(r.includes("youtube")||r.includes("generate_204")||r.includes("log_event")||r.includes("stats/qoe")||r.includes("err_blocked_by_client"))return;e.apply(console,t)}catch(r){e.apply(console,t)}}})();const V=new class{constructor(){this.cleanupCallbacks=new Set,this.intervalId=null,this.isMonitoring=!1,this.memoryThreshold=1200,this.cleanupInterval=6e5,this.lastCleanup=Date.now()}startMonitoring(){this.isMonitoring||(this.isMonitoring=!0,this.intervalId=setInterval((()=>{this.checkMemoryUsage()}),3e5))}stopMonitoring(){this.isMonitoring&&(this.isMonitoring=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null))}checkMemoryUsage(){if(!performance.memory)return;const e=performance.memory.usedJSHeapSize/1024/1024,t=Date.now();(e>this.memoryThreshold||t-this.lastCleanup>this.cleanupInterval)&&(this.performCleanup(),this.lastCleanup=t)}performCleanup(){this.cleanupCallbacks.forEach((e=>{try{e()}catch(t){}})),this.clearBrowserCaches(),window.gc&&window.gc()}clearBrowserCaches(){"caches"in window&&caches.keys().then((e=>{e.forEach((e=>{(e.includes("image-cache")||e.includes("api-cache"))&&caches.delete(e)}))}));try{JSON.stringify(localStorage).length>1048576&&this.clearOldLocalStorageData()}catch(e){}}clearOldLocalStorageData(){const e=["user","accessToken","refreshToken","theme"];Object.keys(localStorage).forEach((t=>{if(!e.includes(t))try{const e=localStorage.getItem(t);if(e){const r=JSON.parse(e);r.timestamp&&Date.now()-r.timestamp>864e5&&localStorage.removeItem(t)}}catch(r){localStorage.removeItem(t)}}))}registerCleanupCallback(e){return this.cleanupCallbacks.add(e),()=>{this.cleanupCallbacks.delete(e)}}cleanupResources(){const e=setTimeout((()=>{}),0);for(let n=0;e>n;n++)clearTimeout(n);const t=setInterval((()=>{}),0);for(let n=0;t>n;n++)clearInterval(n);try{const e=20;for(let t=0;e>t;t++)try{cancelRaf(t)}catch(r){}}catch(r){}}cleanupEventListeners(){["resize","scroll","mousemove","keydown","keyup","click"].forEach((e=>{window.removeEventListener(e,null,!0),window.removeEventListener(e,null,!1)}))}getMemoryStats(){return performance.memory?{available:!0,used:performance.memory.usedJSHeapSize/1024/1024,total:performance.memory.totalJSHeapSize/1024/1024,limit:performance.memory.jsHeapSizeLimit/1024/1024,percentage:performance.memory.usedJSHeapSize/performance.memory.jsHeapSizeLimit*100}:{available:!1,message:"Memory API not available"}}cleanupOnUnload(){this.stopMonitoring(),this.performCleanup(),this.cleanupResources()}};"undefined"!=typeof window&&(window.addEventListener("beforeunload",(()=>{V.cleanupOnUnload()})),document.addEventListener("visibilitychange",(()=>{})));const F=new class{constructor(){this.isSupported="serviceWorker"in navigator,this.registration=null,this.isRegistered=!1,this.retryCount=0,this.maxRetries=3,this.retryDelay=2e3,this.forceUnregister=!1,this.isDisabled=!1}async forceUnregisterAll(){if(this.isSupported)try{const e=await navigator.serviceWorker.getRegistrations();for(const r of e)await r.unregister();const t=await caches.keys();for(const r of t)await caches.delete(r);this.forceUnregister=!0,await new Promise((e=>setTimeout(e,1e3)))}catch(e){}}async register(){if(!this.isSupported)return!1;if(this.isServiceWorkerDisabled())return!1;try{this.forceUnregister&&await this.forceUnregisterAll(),await this.waitForAppReady();const e=this.getServiceWorkerPath();return this.registration=await navigator.serviceWorker.register(e,{scope:"/",updateViaCache:"none"}),this.isRegistered=!0,this.setupEventListeners(),!0}catch(e){if(this.isMimeTypeError(e)){await this.forceUnregisterAll(),await new Promise((e=>setTimeout(e,2e3)));try{const e=this.getServiceWorkerPath();return this.registration=await navigator.serviceWorker.register(e,{scope:"/",updateViaCache:"none"}),this.isRegistered=!0,this.setupEventListeners(),!0}catch(t){return this.isMimeTypeError(t)&&await this.disableServiceWorker(),!1}}return this.retryCount<this.maxRetries&&(this.retryCount++,setTimeout((()=>{this.register()}),this.retryDelay*this.retryCount),!1)}}waitForAppReady(){return new Promise((e=>{"complete"===document.readyState?e():window.addEventListener("load",e,{once:!0})}))}isMimeTypeError(e){const t=e.message||e.toString();return t.includes("MIME type")||t.includes("text/html")||t.includes("Expected a JavaScript")||t.includes("module script")}async disableServiceWorker(){try{return await this.forceUnregisterAll(),this.isDisabled=!0,"undefined"!=typeof window&&window.localStorage&&(localStorage.setItem("streamr_sw_disabled","true"),localStorage.setItem("streamr_sw_disabled_reason","MIME type errors"),localStorage.setItem("streamr_sw_disabled_timestamp",Date.now().toString())),!0}catch(e){return!1}}isServiceWorkerDisabled(){return!!this.isDisabled||!("undefined"==typeof window||!window.localStorage)&&"true"===localStorage.getItem("streamr_sw_disabled")}async enableServiceWorker(){try{return this.isDisabled=!1,"undefined"!=typeof window&&window.localStorage&&(localStorage.removeItem("streamr_sw_disabled"),localStorage.removeItem("streamr_sw_disabled_reason"),localStorage.removeItem("streamr_sw_disabled_timestamp")),!0}catch(e){return!1}}setupEventListeners(){this.registration&&(this.registration.addEventListener("updatefound",(()=>{const e=this.registration.installing;e.addEventListener("statechange",(()=>{if("installed"===e.state&&navigator.serviceWorker.controller)try{this.registration.waiting&&this.registration.waiting.postMessage({type:"SKIP_WAITING"});const e=()=>{navigator.serviceWorker.removeEventListener("controllerchange",e),window.location.reload()};navigator.serviceWorker.addEventListener("controllerchange",e)}catch(t){}}))})),navigator.serviceWorker.addEventListener("message",(e=>{this.handleServiceWorkerMessage(e)})),navigator.serviceWorker.addEventListener("error",(e=>{})))}handleServiceWorkerMessage(e){const{data:t}=e;"REQUEST_TMDB_API_KEY"===t?.type&&this.sendApiKeyToServiceWorker()}sendApiKeyToServiceWorker(){const e="92b98feaab02d1088661e456c19edb89";this.registration?.active?this.registration.active.postMessage({type:"SET_TMDB_API_KEY",apiKey:e}):navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SET_TMDB_API_KEY",apiKey:e})}async unregister(){this.registration&&(await this.registration.unregister(),this.isRegistered=!1,this.registration=null)}isActive(){return this.isRegistered&&this.registration?.active}getRegistration(){return this.registration}getServiceWorkerPath(){return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||"5173"===window.location.port?"/dev-sw.js":"/sw.js"}},$=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.H))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load HomePage"})}))))),B=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.a7))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load Navbar"})}))))),N=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.a5))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load CastDetailsOverlay"})}))))),U=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.M))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load MoviesPage"})}))))),K=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.S))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load SeriesPage"})}))))),J=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.P))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load ProfilePage"})}))))),q=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.W))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load WatchlistPage"})}))))),Y=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.C))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load CommunityPage"})}))))),G=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.a8))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load SingleDiscussion"})}))))),Q=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.a9))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load OverflowTest"})})))));if("undefined"!=typeof document){const{reducedMotion:e,saveData:t,lowEndDevice:r}=_e(),n=e?"auto":"smooth",a=r||t?"auto":"touch",s=r||t?"none":"y proximity",o=r||t?"none":"y mandatory",i=r||t?"auto":"scroll-position, transform",c=r||t?"none":"translateZ(0)",l=r||t?"none":"1000px",d=r||t?"layout paint":"layout style paint",u=r||t?"auto":"isolate",h=r||t?"visible":"auto",m="auto"===h?"auto 500px":"none";document.documentElement.style.scrollBehavior=n;const p=document.head.querySelector('style[data-streamr-scroll-style="global"]');p&&p.remove();const f=document.createElement("style");f.setAttribute("data-streamr-scroll-style","global"),f.textContent=`\n    html {\n      scroll-behavior: ${n};\n      -webkit-overflow-scrolling: ${a};\n      overscroll-behavior: auto;\n    }\n    \n    body {\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n      text-rendering: optimizeLegibility;\n    }\n    \n    /* Ultra-smooth scrolling for all scrollable elements */\n    * {\n      scroll-behavior: ${n};\n    }\n    \n    /* Optimize scroll containers with enhanced performance */\n    .scroll-container, [class*="scroll"], [class*="overflow"] {\n      -webkit-overflow-scrolling: ${a};\n      overscroll-behavior: auto;\n      scroll-behavior: ${n};\n      scroll-snap-type: ${s};\n      scrollbar-gutter: stable;\n    }\n    \n    /* Hardware acceleration tuned per capability */\n    .ultra-smooth-scroll, .scroll-container-fix {\n      transform: ${c};\n      backface-visibility: hidden;\n      perspective: ${l};\n      will-change: ${i};\n      contain: ${d};\n      isolation: ${u};\n    }\n    \n    /* Enhanced scrolling for high refresh rate displays */\n    @media (min-resolution: 120dpi), (-webkit-min-device-pixel-ratio: 1.25) {\n      .ultra-smooth-scroll {\n        transform: ${"none"===c?"none":"translate3d(0, 0, 0)"};\n        -webkit-transform: ${"none"===c?"none":"translate3d(0, 0, 0)"};\n        -moz-transform: ${"none"===c?"none":"translate3d(0, 0, 0)"};\n        -ms-transform: ${"none"===c?"none":"translate3d(0, 0, 0)"};\n        -o-transform: ${"none"===c?"none":"translate3d(0, 0, 0)"};\n      }\n    }\n    \n    /* Momentum scrolling optimization */\n    .momentum-scroll {\n      -webkit-overflow-scrolling: ${a};\n      overscroll-behavior: auto;\n      scroll-snap-type: ${o};\n      scroll-padding: 0;\n    }\n    \n    /* Performance-optimized scroll containers */\n    .performance-scroll {\n      contain: strict;\n      content-visibility: ${h};\n      contain-intrinsic-size: ${m};\n    }\n  `,document.head.appendChild(f)}const X=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.aa))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load ProtectedRoute"})}))))),Z=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.L))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load LoginPage"})}))))),ee=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.a))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load SignupPage"})}))))),te=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.F))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load ForgotPasswordPage"})}))))),re=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.R))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load ResetPasswordPage"})}))))),ne=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.O))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load OAuthSuccessPage"})}))))),ae=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.V))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load VerifyEmailPage"})}))))),se=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.N))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load NetworkTestPage"})}))))),oe=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.ab))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load BottomNavTest"})}))))),ie=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.T))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load TestAuthPage"})}))))),ce=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.b))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load TestProgressPage"})})))));p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.ac))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load ProgressTestComponent"})})))));const le=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.ad))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load UndoTest"})}))))),de=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.ae))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load WishlistTest"})}))))),ue=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.D))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load Donate Page"})}))))),he=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.c))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load Manga"})}))))),me=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.d))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load Manga Details"})}))))),pe=p.lazy((()=>h((()=>import("./pages-rw9ofAHq.js").then((e=>e.e))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load Reader"})}))))),fe=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.a6))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load MovieDetailsOverlay"})}))))),ge=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.ag))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Network Status: Loading..."})})))));p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.ah))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load PerformanceDashboard"})})))));const ye=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.ai))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load CacheManagementDashboard"})}))))),we=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.a4))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).then((e=>({default:e.PageLoader}))).catch((e=>({default:()=>f.jsx("div",{children:"Failed to load PageLoader"})}))))),ve=p.lazy((()=>h((()=>import("./components-BGp2-5_K.js").then((e=>e.aj))),__vite__mapDeps([1,2,3,4,5,6,7,8,9]),import.meta.url).catch((e=>({default:()=>null})))));function _e(){if("undefined"==typeof window)return{reducedMotion:!1,saveData:!1,lowEndDevice:!1};let e=!1,t=!1;try{const r=window.navigator||{},n=r.connection||r.mozConnection||r.webkitConnection||null;n&&(e=!!n.saveData,e||"string"!=typeof n.effectiveType||(e=/(^2g$|^slow-2g$|^3g$)/i.test(n.effectiveType)));const a="number"==typeof r.deviceMemory?r.deviceMemory:void 0,s="number"==typeof r.hardwareConcurrency?r.hardwareConcurrency:void 0,o="number"==typeof r.maxTouchPoints?r.maxTouchPoints:0;"number"!=typeof a||a>2||(t=!0),"number"==typeof s&&s>0&&4>=s&&(t=!0),t||2>=o||"number"!=typeof s||s>6||(t=!0)}catch(r){}return{reducedMotion:!1,saveData:e,lowEndDevice:t}}"serviceWorker"in navigator&&(window.__SERVICE_WORKER_DISABLED__||"undefined"!=typeof window&&window.localStorage&&"true"===localStorage.getItem("streamr_sw_disabled")||F.register().then((e=>{}))),"undefined"!=typeof window&&(window.requestIdleCallback||(e=>setTimeout(e,1500)))((()=>{try{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,t=e&&(e.saveData||!1),r=e&&e.effectiveType,n=r&&/(^2g$|^slow-2g$|^3g$)/i.test(r),a=navigator.hardwareConcurrency||8;if(t||n||4>=a)return}catch(e){}Promise.allSettled([h((()=>import("./pages-rw9ofAHq.js").then((e=>e.M))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url),h((()=>import("./pages-rw9ofAHq.js").then((e=>e.S))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url),h((()=>import("./pages-rw9ofAHq.js").then((e=>e.C))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url),h((()=>import("./pages-rw9ofAHq.js").then((e=>e.P))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url),h((()=>import("./pages-rw9ofAHq.js").then((e=>e.W))),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)]).catch((()=>{}))}));const xe=()=>{const[e,t]=g.useState(null),[r,n]=g.useState(null),[a,s]=p.useState(!1),[o,i]=p.useState((()=>_e())),c=p.useRef(!0),{fullPageLoader:l}=u();p.useEffect((()=>{}),[e]),p.useEffect((()=>{}),[r]),p.useEffect((()=>(c.current=!0,()=>{c.current=!1})),[]),p.useEffect((()=>{if("undefined"==typeof window)return;const e="undefined"!=typeof navigator?navigator:{},t=e.connection||e.mozConnection||e.webkitConnection||null,r=()=>{i((e=>{const t=_e();return e.reducedMotion===t.reducedMotion&&e.saveData===t.saveData&&e.lowEndDevice===t.lowEndDevice?e:t}))};return r(),t&&"function"==typeof t.addEventListener&&t.addEventListener("change",r),()=>{t&&"function"==typeof t.removeEventListener&&t.removeEventListener("change",r)}}),[]);const{saveData:d,lowEndDevice:h}=o,m=g.useMemo((()=>h||d?{throttle:48,enableMomentum:!1,enableIntersectionObserver:!1,scrollOffset:72}:{throttle:16,enableMomentum:!0,enableIntersectionObserver:!0,scrollOffset:80}),[h,d]),{scrollState:y}=I(m),w=g.useMemo((()=>({type:"tween",duration:h||d?.2:.35,ease:h||d?"linear":"easeOut"})),[h,d]),v=y.isScrolling?"true":"false",_=0>y.scrollDirection?"up":"down",x=g.useCallback((e=>{c.current&&t({...e,_source:e._source||"direct",_skipInitialLoad:"direct"===e._source||e._skipInitialLoad})}),[]),j=g.useCallback((e=>{c.current&&n(e)}),[]),E=g.useCallback((()=>{c.current&&t(null)}),[]),S=g.useCallback((()=>{c.current&&n(null)}),[]),b=g.useCallback((e=>{if(e&&e.id){const t=new URLSearchParams;t.set("genre",e.name.toLowerCase()),t.set("category","popular"),window.location.href="/movies?"+t.toString()}}),[]),T=g.useCallback((()=>{c.current&&s((e=>!e))}),[]);return p.useEffect((()=>{const e=e=>{c.current&&e.ctrlKey&&e.shiftKey&&"P"===e.key&&(e.preventDefault(),T())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[T]),p.useEffect((()=>{const e=V.registerCleanupCallback((()=>{c.current&&(t(null),s(!1))}),"App");return()=>{e()}}),[]),p.useEffect((()=>{}),[]),l?null:f.jsx(k,{reducedMotion:"never",transition:w,children:f.jsxs("div",{className:"min-h-screen bg-[#121417] smooth-scroll performance-scroll","data-performance-tier":h?"constrained":"standard","data-save-data":d?"true":"false","data-reduced-motion":"false","data-scroll-active":v,"data-scroll-direction":_,children:[f.jsx(p.Suspense,{fallback:null,children:f.jsx("div",{className:"fixed top-4 right-4 z-50",children:f.jsx(ge,{showDetails:!1})})}),f.jsx(p.Suspense,{children:f.jsx(B,{onMovieSelect:x,onCastSelect:j})}),f.jsx("main",{className:"momentum-scroll",children:f.jsx(Ee,{})}),e&&f.jsx(p.Suspense,{fallback:null,children:f.jsx(fe,{movie:e,onClose:E,onMovieSelect:x,onGenreClick:b})}),r&&f.jsx(p.Suspense,{fallback:null,children:f.jsx(N,{person:r,onClose:S,onMovieSelect:x,onSeriesSelect:x})}),!1,!1,!1,!1]})})},je=new S({defaultOptions:{queries:{staleTime:3e5,cacheTime:18e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)},mutations:{retry:1}}}),Ee=()=>{const e=({children:e})=>{const{user:t}=m();return t?f.jsx(x,{to:"/"}):e};return f.jsx(p.Suspense,{children:f.jsxs(v,{children:[f.jsx(_,{path:"/",element:f.jsx($,{},"homepage")}),f.jsx(_,{path:"/movies",element:f.jsx(U,{})}),f.jsx(_,{path:"/series",element:f.jsx(K,{})}),f.jsx(_,{path:"/manga",element:f.jsx(he,{})}),f.jsx(_,{path:"/manga/:slug",element:f.jsx(me,{})}),f.jsx(_,{path:"/manga/chapter/:hid",element:f.jsx(pe,{})}),f.jsx(_,{path:"/community",element:f.jsx(Y,{})}),f.jsx(_,{path:"/donate",element:f.jsx(ue,{})}),f.jsx(_,{path:"/community/discussion/:id",element:f.jsx(G,{})}),f.jsx(_,{path:"/network-test",element:f.jsx(se,{})}),f.jsx(_,{path:"/bottom-nav-test",element:f.jsx(oe,{})}),f.jsx(_,{path:"/test-auth",element:f.jsx(ie,{})}),f.jsx(_,{path:"/test-progress",element:f.jsx(ce,{})}),f.jsx(_,{path:"/test-undo",element:f.jsx(le,{})}),f.jsx(_,{path:"/test-wishlist",element:f.jsx(de,{})}),f.jsx(_,{path:"/verify-email/:token",element:f.jsx(ae,{})}),f.jsx(_,{path:"/oauth-success",element:f.jsx(ne,{})}),f.jsx(_,{path:"/cache-dashboard",element:f.jsx(ye,{})}),f.jsx(_,{path:"/overflow-test",element:f.jsx(Q,{})}),f.jsx(_,{path:"/test-optimizations",element:f.jsx("div",{className:"min-h-screen bg-[#121417] flex items-center justify-center",children:f.jsx("iframe",{src:"/test-optimizations.html",className:"w-full h-full border-0",title:"Network Optimizations Test"})})}),f.jsx(_,{path:"/login",element:f.jsx(e,{children:f.jsx(Z,{})})}),f.jsx(_,{path:"/signup",element:f.jsx(e,{children:f.jsx(ee,{})})}),f.jsx(_,{path:"/forgot-password",element:f.jsx(e,{children:f.jsx(te,{})})}),f.jsx(_,{path:"/reset-password/:token",element:f.jsx(e,{children:f.jsx(re,{})})}),f.jsx(_,{path:"/profile",element:f.jsx(X,{children:f.jsx(J,{})})}),f.jsx(_,{path:"/watchlist",element:f.jsx(q,{})}),f.jsx(_,{path:"*",element:f.jsx(x,{to:"/"})})]})})},Se=()=>{const{fullPageLoader:e,fullPageLoaderText:t,fullPageLoaderProgress:r,fullPageLoaderVariant:n}=u();return p.useEffect((()=>{if(e){const e=window.getComputedStyle(document.body),t=e.overflow,r=e.height;return document.body.style.overflow="hidden",document.body.style.height="100vh",document.body.style.position="fixed",document.body.style.width="100%",()=>{document.body.style.overflow=t,document.body.style.height=r,document.body.style.position="",document.body.style.width=""}}}),[e]),e?f.jsx(we,{text:t||"Loading your cinematic experience...",showProgress:!0,progress:r,variant:n,showTips:!1}):null},be=()=>{const{fullPageLoader:e}=u();return e?null:f.jsx(p.Suspense,{fallback:null,children:f.jsx(ve,{})})},Ie=()=>f.jsx(M,{children:f.jsx(y,{client:je,children:f.jsx(w,{children:f.jsx(n,{children:f.jsx(a,{children:f.jsx(s,{children:f.jsx(o,{children:f.jsx(i,{children:f.jsx(c,{children:f.jsx(H,{children:f.jsxs(l,{children:[f.jsx(Se,{}),f.jsx(xe,{}),f.jsx(be,{}),f.jsx(d,{})]})})})})})})})})})})}),ke=p.createContext(),Te=({children:e})=>{const[t,r]=p.useState((()=>{if("undefined"!=typeof window){const e=localStorage.getItem("theme");if(e)return e;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"light"}));p.useEffect((()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),"dark"===t?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))}),[t]);const n=p.useCallback((()=>{r((e=>"dark"===e?"light":"dark"))}),[]);return f.jsx(ke.Provider,{value:{theme:t,toggleTheme:n},children:e})};"undefined"!=typeof window&&(window.requestIdleCallback||(e=>setTimeout(e,1e3)))((()=>{Promise.allSettled([h((()=>import("./backendSwitcher-meq-8KV0.js")),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]),import.meta.url),h((()=>import("./previewModeHelper-5PZxFbgg.js")),[],import.meta.url)]).catch((()=>{}))}));const Le="G-W6SBX03VSC";if("undefined"!=typeof window){let e=function(){window.dataLayer.push(arguments)};const t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+Le,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],window.gtag=e,e("js",new Date),e("config",Le,{send_page_view:!1})}j.createRoot(document.getElementById("root")).render(f.jsx(p.StrictMode,{children:f.jsx(E,{children:f.jsx(Te,{children:f.jsx(Ie,{})})})}));try{window.__API_BASE__=t()}catch{}
