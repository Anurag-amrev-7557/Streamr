const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["/assets/components-AkFFl9dE.js","/assets/react-vendor-DV0l1H4H.js","/assets/vendor-C35x7YI-.js","/assets/realtime-vendor-wb7U7u9V.js","/assets/vendor-B_l4pjL9.css","/assets/animation-vendor-CrRNbPxN.js","/assets/services-D_i6uSZ_.js","/assets/utils-vendor-4-B_0nFS.js","/assets/hooks-ufgEvzuF.js"])))=>i.map(i=>d[i]);
import{b as e,a as t,u as s,m as r,g as a,d as i,e as n,P as l,E as o,C as c,T as d,f as u,h as m,i as h,j as x,k as p,c as g,_ as f,s as w,l as v,R as b,Y as y,G as j,n as N,N as k,o as C,t as S,p as T,q as _,r as M,v as L,B as P,A as E,w as z,x as R,D as I,y as A,z as F,F as V,I as B,H as D,J as H,K as W,L as O}from"./components-AkFFl9dE.js";import{Z as $,r as U,j as Y,_ as q,S as Z,a as G,L as J,R as K,u as Q,h as X,Y as ee,F as te,V as se,G as re,$ as ae,a0 as ie,a1 as ne,w as le,a2 as oe,l as ce,s as de,t as ue,n as me,X as he,a3 as xe,a4 as pe,a5 as ge,C as fe,a6 as we,H as ve,K as be,J as ye,I as je,f as Ne,a7 as ke,a8 as Ce,N as Se,b as Te}from"./react-vendor-DV0l1H4H.js";import{d as _e,e as Me,f as Le,g as Pe,h as Ee,i as ze,c as Re,j as Ie}from"./hooks-ufgEvzuF.js";import{h as Ae,K as Fe,M as Ve,N as Be,t as De,O as He,P as We,Q as Oe,R as $e,S as Ue,T as Ye,U as qe,V as Ze,W as Ge,X as Je,A as Ke,Y as Qe,Z as Xe,_ as et,$ as tt,a0 as st,j as rt,f as at,r as it,a1 as nt,a2 as lt,w as ot,a3 as ct,a4 as dt,a5 as ut,a6 as mt,a7 as ht,J as xt,L as pt,u as gt,s as ft,x as wt,a8 as vt,a9 as bt,aa as yt,ab as jt,ac as Nt,ad as kt,ae as Ct}from"./services-D_i6uSZ_.js";import{a3 as St,a4 as Tt,a5 as _t,a6 as Mt,Y as Lt,Z as Pt,_ as Et,$ as zt,a0 as Rt,X as It}from"./vendor-C35x7YI-.js";import{M as At,m as Ft,A as Vt}from"./animation-vendor-CrRNbPxN.js";const Bt=$(St(Tt(_t(Mt(((e,t)=>({sections:{trending:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},popular:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},topRated:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},upcoming:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},action:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},comedy:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},drama:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},horror:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},sciFi:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},documentary:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},family:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},animation:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},awardWinning:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},latest:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},popularTV:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},topRatedTV:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},airingToday:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null},nowPlaying:{movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null}},ui:{selectedMovie:null,currentFeaturedIndex:0,activeCategory:"all",isMobile:!1,isTransitioning:!1,showAdBlockerToast:!1,selectedCastMember:null,showCastDetails:!1},performance:{metrics:{firstContentfulPaint:0,largestContentfulPaint:0,timeToInteractive:0,memoryUsage:0},prefetchQueue:new Set,isPrefetching:!1,visibleSections:new Set(["all","trending","popular"])},featuredContent:null,setSectionMovies:(t,s)=>e((e=>{e.sections[t].movies=s,e.sections[t].loading=!1,e.sections[t].error=null,e.sections[t].lastFetched=Date.now()})),setSectionLoading:(t,s)=>e((e=>{e.sections[t].loading=s})),setSectionError:(t,s)=>e((e=>{e.sections[t].error=s,e.sections[t].loading=!1})),appendSectionMovies:(t,s)=>e((e=>{const r=new Set(e.sections[t].movies.map((e=>e.id))),a=s.filter((e=>!r.has(e.id)));e.sections[t].movies.push(...a),e.sections[t].loading=!1,e.sections[t].hasMore=a.length>0})),incrementSectionPage:t=>e((e=>{e.sections[t].page+=1})),updateUI:t=>e((e=>{Object.assign(e.ui,t)})),setSelectedMovie:t=>e((e=>{e.ui.selectedMovie=t})),setFeaturedContent:t=>e((e=>{e.featuredContent=t})),addToPrefetchQueue:t=>e((e=>{e.performance.prefetchQueue.add(t)})),removeFromPrefetchQueue:t=>e((e=>{e.performance.prefetchQueue.delete(t)})),setIsPrefetching:t=>e((e=>{e.performance.isPrefetching=t})),updatePerformanceMetric:(t,s)=>e((e=>{e.performance.metrics[t]=s})),addVisibleSection:t=>e((e=>{e.performance.visibleSections.add(t)})),removeVisibleSection:t=>e((e=>{e.performance.visibleSections.delete(t)})),resetSection:t=>e((e=>{e.sections[t]={movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null}})),resetAllSections:()=>e((e=>{Object.keys(e.sections).forEach((t=>{e.sections[t]={movies:[],loading:!1,error:null,page:1,hasMore:!0,lastFetched:null}}))}))})))),{name:"homepage-storage",partialize:e=>({sections:e.sections,featuredContent:e.featuredContent}),version:1}),{name:"HomePage Store"})),Dt=new class{constructor(){this.metrics={pageLoad:{},apiCalls:{},renderTimes:{},memoryUsage:[]},this.startTime=performance.now(),this.isEnabled=!1}trackPageLoad(e){if(!this.isEnabled)return;const t=performance.now()-this.startTime;this.metrics.pageLoad[e]={loadTime:Math.round(t),timestamp:(new Date).toISOString()}}trackApiCall(e,t,s=!0){if(!this.isEnabled)return;this.metrics.apiCalls[e]||(this.metrics.apiCalls[e]={calls:0,totalTime:0,averageTime:0,failures:0,lastCall:null});const r=this.metrics.apiCalls[e];r.calls++,r.totalTime+=t,r.averageTime=r.totalTime/r.calls,r.lastCall=(new Date).toISOString(),s||r.failures++}trackRender(e,t){if(!this.isEnabled)return;this.metrics.renderTimes[e]||(this.metrics.renderTimes[e]={renders:0,totalTime:0,averageTime:0,maxTime:0});const s=this.metrics.renderTimes[e];s.renders++,s.totalTime+=t,s.averageTime=s.totalTime/s.renders,s.maxTime=Math.max(s.maxTime,t)}trackMemory(){if(!this.isEnabled||!performance.memory)return;const e={used:Math.round(performance.memory.usedJSHeapSize/1024/1024),total:Math.round(performance.memory.totalJSHeapSize/1024/1024),limit:Math.round(performance.memory.jsHeapSizeLimit/1024/1024),timestamp:(new Date).toISOString()};this.metrics.memoryUsage.push(e),this.metrics.memoryUsage.length>100&&(this.metrics.memoryUsage=this.metrics.memoryUsage.slice(-100))}getSummary(){const e={totalPageLoads:Object.keys(this.metrics.pageLoad).length,totalApiCalls:Object.values(this.metrics.apiCalls).reduce(((e,t)=>e+t.calls),0),averageApiCallTime:0,slowestApiCall:null,memoryUsage:this.metrics.memoryUsage.length>0?this.metrics.memoryUsage[this.metrics.memoryUsage.length-1]:null},t=Object.values(this.metrics.apiCalls);if(t.length>0){const s=t.reduce(((e,t)=>e+t.totalTime),0),r=t.reduce(((e,t)=>e+t.calls),0);e.averageApiCallTime=r>0?Math.round(s/r):0}let s=0,r=null;return Object.entries(this.metrics.apiCalls).forEach((([e,t])=>{t.averageTime>s&&(s=t.averageTime,r=e)})),r&&(e.slowestApiCall={endpoint:r,averageTime:Math.round(s)}),e}logSummary(){this.isEnabled&&(this.getSummary(),Object.entries(this.metrics.apiCalls).forEach((([e,t])=>{})))}clear(){this.metrics={pageLoad:{},apiCalls:{},renderTimes:{},memoryUsage:[]},this.startTime=performance.now()}},Ht=(e,t,s)=>Dt.trackApiCall(e,t,s),Wt=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.al))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)));U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.am))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url))),U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.an))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)));const Ot=()=>{if("undefined"==typeof window)return!1;try{const e=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,t=navigator&&(navigator.connection||null),s=!(!t||"boolean"!=typeof t.saveData)&&t.saveData,r=t&&t.effectiveType?t.effectiveType:null;return!!(e||s||r&&["slow-2g","2g"].includes(r))}catch(e){return!1}},$t=()=>{const e="undefined"!=typeof window,t=()=>!!e&&768>window.innerWidth,[s,r]=U.useState(t),[a,i]=U.useState((()=>!t()));return U.useEffect((()=>{if(!e)return;let t=!0;const s=()=>{if(!t)return;const e=768>window.innerWidth;r(e),i(!e)};s();try{window.addEventListener("resize",s,{passive:!0})}catch(a){window.addEventListener("resize",s)}return()=>{t=!1;try{window.removeEventListener("resize",s)}catch(a){try{window.removeEventListener("resize",s)}catch(e){}}}}),[e]),{isMobile:s,isDesktop:a}},Ut=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.a7))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)),{suspense:!0}),Yt=({children:e,rootMargin:t="400px",placeholderHeight:s=300})=>{const[r,a]=U.useState(!1),[i,n]=U.useState(!1),l=U.useRef(null),o=Ot()||Re();return U.useEffect((()=>{if(!l.current||r)return;let e;try{e=new IntersectionObserver((t=>{const s=t[0];s&&(s.isIntersecting||s.intersectionRatio>0)&&(a(!0),e.disconnect(),requestAnimationFrame((()=>{requestAnimationFrame((()=>{n(!0)}))})))}),{root:null,rootMargin:t,threshold:.01}),e.observe(l.current)}catch(s){a(!0),n(!0)}return()=>{if(e)try{e.disconnect()}catch(s){}}}),[t,r]),Y.jsx("div",{ref:l,style:{minHeight:s},children:r?o?Y.jsx("div",{style:{contain:"layout style paint"},children:e}):Y.jsx(Ft.div,{style:{contain:"layout style paint",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden",perspective:1e3},initial:{opacity:0,y:20},animate:i?{opacity:1,y:0}:{opacity:0,y:20},transition:o?{duration:0}:{...p,duration:.5},children:e}):Y.jsx("div",{style:{height:s},"aria-hidden":"true"})})},qt=U.memo((({onClick:e,onPrefetch:t,...s})=>Y.jsx(Kt,{...s,onClick:e,onPrefetch:t})),((e,t)=>e.id===t.id&&e.poster_path===t.poster_path&&e.title===t.title&&e.vote_average===t.vote_average)),Zt=U.memo((({categories:e,activeCategory:t,onCategoryClick:s,isMobile:r})=>{const a=U.useRef(null),i=U.useRef(!0);return U.useEffect((()=>(i.current=!0,()=>{i.current=!1;try{a.current?.destroy&&"function"==typeof a.current.destroy&&a.current.destroy(!0,!0)}catch(e){}finally{a.current=null}})),[]),r?Y.jsxs("div",{className:"relative mt-6 px-4",children:[Y.jsx("div",{className:"absolute inset-y-0 left-0 w-24 bg-gradient-to-r from-[#121417] to-transparent z-10 pointer-events-none"}),Y.jsx("div",{className:"absolute inset-y-0 right-0 w-24 bg-gradient-to-l from-[#121417] to-transparent z-10 pointer-events-none"}),Y.jsx("div",{className:"flex gap-3 overflow-x-auto scrollbar-hide pb-2 mb-2 horizontal-scroll-container",style:{scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",scrollSnapType:"x mandatory",padding:"0 20px"},children:e.map((e=>Y.jsxs("button",{onClick:()=>s(e),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap flex-shrink-0 "+(t===e.id?"bg-white text-black hover:bg-white/90":"bg-white/5 text-white/70 hover:bg-white/10 hover:text-white"),children:[Y.jsx("span",{className:"flex-shrink-0",children:e.icon}),Y.jsx("span",{children:e.label})]},e.id)))})]}):Y.jsx(At,{reducedMotion:Ot()?"always":"user",transition:{type:"tween"},children:Y.jsxs("div",{className:"relative mt-6 group",children:[Y.jsx("div",{className:"absolute inset-y-0 left-0 w-24 bg-gradient-to-r from-[#121417] to-transparent z-10 pointer-events-none"}),Y.jsx("div",{className:"absolute inset-y-0 right-0 w-24 bg-gradient-to-l from-[#121417] to-transparent z-10 pointer-events-none"}),Y.jsx(Z,{modules:[Lt,Pt,Et,zt,Rt],spaceBetween:12,slidesPerView:"auto",speed:500,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",navigation:!1,onSwiper:e=>{a.current=e},freeMode:{enabled:!0,momentum:!0,momentumVelocityRatio:.8,momentumRatio:.8,momentumBounce:!0,momentumBounceRatio:.1},mousewheel:{forceToAxis:!0,sensitivity:.7,releaseOnEdges:!0,thresholdDelta:40,thresholdTime:150},keyboard:{enabled:!0,onlyInViewport:!0,pageUpDown:!0},grabCursor:!0,touchRatio:1.1,touchAngle:45,resistance:!0,resistanceRatio:.8,watchSlidesProgress:!0,className:"px-4 pb-2",breakpoints:{768:{spaceBetween:12,slidesPerView:"auto"},1024:{spaceBetween:16,slidesPerView:"auto"},1280:{spaceBetween:20,slidesPerView:"auto"},1536:{spaceBetween:24,slidesPerView:"auto"}},children:e.map((e=>Y.jsx(G,{className:"!w-auto",children:Y.jsxs("button",{onClick:()=>s(e),className:"flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 whitespace-nowrap "+(t===e.id?"bg-white text-black hover:bg-white/90":"bg-white/5 text-white/70 hover:bg-white/10 hover:text-white"),children:[Y.jsx("span",{className:"flex-shrink-0",children:e.icon}),Y.jsx("span",{children:e.label})]})},e.id)))})]})})}));Zt.displayName="CategorySwiper";const Gt=U.memo((({title:e,movies:t,loading:s,onLoadMore:r,hasMore:a,currentPage:i,sectionKey:n,onMovieSelect:l,onMovieHover:o,onPrefetch:c,isMobile:d,isLowPower:u})=>{const m=U.useRef(null),h=U.useRef(null),x=U.useRef(null),[p,f]=U.useState(!1),v=U.useMemo((()=>u||"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches),[u]),[b,y]=U.useState((()=>{const e=d?u?4:6:u?6:10;return Math.min(Array.isArray(t)?t.length:0,e)}));if(U.useEffect((()=>{if(!s&&Array.isArray(t)&&t.length>0){const e=setTimeout((()=>{f(!0)}),100);return()=>clearTimeout(e)}f(!1)}),[s,t]),U.useEffect((()=>()=>{try{m.current?.destroy&&m.current.destroy(!0,!0)}catch(e){}finally{m.current=null}}),[]),U.useEffect((()=>{const e=m.current;if(e&&e.navigation&&"function"==typeof e.navigation.update)try{e.navigation.update()}catch(t){}}),[t?.length,n]),U.useEffect((()=>{const e=m.current;if(e)try{e.update(),e.updateSlides(),e.updateProgress(),e.updateSize()}catch(t){}}),[t,b]),U.useEffect((()=>{const e=m.current;if(e){const t=setTimeout((()=>{try{e.update(),e.updateSlides(),e.updateProgress(),e.updateSize()}catch(t){}}),100);return()=>clearTimeout(t)}}),[]),U.useEffect((()=>{const e=Array.isArray(t)?t.length:0;if(e>b){if(h.current){try{"function"==typeof window.cancelIdleCallback?window.cancelIdleCallback(h.current):clearTimeout(h.current)}catch(s){}h.current=null}if(x.current){try{g(x.current)}catch(s){}x.current=null}return(()=>{if("undefined"!=typeof window&&"requestIdleCallback"in window&&"function"==typeof window.requestIdleCallback){const s=Math.min(400,Math.max(100,2*e));try{h.current=window.requestIdleCallback((()=>y(e)),{timeout:s})}catch(t){h.current=window.setTimeout((()=>y(e)),s)}}else x.current=w((()=>{Promise.resolve().then((()=>{h.current=window.setTimeout((()=>y(e)),50)}))}))})(),()=>{if(h.current){try{"function"==typeof window.cancelIdleCallback?window.cancelIdleCallback(h.current):clearTimeout(h.current)}catch(s){}h.current=null}if(x.current){try{g(x.current)}catch(s){}x.current=null}}}}),[t,b]),d)return Y.jsxs("div",{className:"mt-8 px-4",children:[u?Y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Y.jsx("h2",{className:"text-xl font-semibold bg-gradient-to-r from-white via-white/90 to-white/60 bg-clip-text text-transparent relative",children:e}),Y.jsxs(J,{to:"/movies?category="+n,"aria-label":"View all "+e,className:"text-[11px] px-2.5 py-1 rounded-full bg-white/5 hover:bg-white/10 text-white/80 hover:text-white border border-white/10 transition-colors duration-200",children:[Y.jsx("span",{className:"relative z-10",children:"View all"}),Y.jsx("span",{className:"ml-1 inline-block",children:"→"})]})]}):Y.jsxs(Ft.div,{className:"flex items-center justify-between mb-4",initial:{opacity:0,x:-20},animate:p?{opacity:1,x:0}:{opacity:0,x:-20},transition:{duration:.5,ease:[.25,.46,.45,.94],delay:.2},children:[Y.jsx("h2",{className:"text-xl font-semibold bg-gradient-to-r from-white via-white/90 to-white/60 bg-clip-text text-transparent relative",children:e}),Y.jsxs(J,{to:"/movies?category="+n,"aria-label":"View all "+e,className:"text-[11px] px-2.5 py-1 rounded-full bg-white/5 hover:bg-white/10 text-white/80 hover:text-white border border-white/10 transition-colors duration-200",children:[Y.jsx("span",{className:"relative z-10",children:"View all"}),Y.jsx("span",{className:"ml-1 inline-block",children:"→"})]})]}),Y.jsxs("div",{className:"flex gap-3 sm:gap-4 md:gap-6 overflow-x-auto scrollbar-hide pb-4 px-2 sm:px-4 horizontal-scroll-container",style:{scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",contain:"layout style paint",scrollSnapType:"x proximity",scrollPadding:"0 20px",overscrollBehavior:"auto",contentVisibility:"auto",containIntrinsicSize:"auto 200px"},children:[t.map(((e,s)=>Y.jsx(Ft.div,{className:"flex-shrink-0",onMouseEnter:()=>o&&o(e,s,t),initial:!v&&{opacity:0,y:20,scale:.97},animate:{opacity:1,y:0,scale:1},transition:v?{duration:0}:{duration:.3,ease:[.25,.46,.45,.94],delay:Math.min(.15+.04*s,.6)},style:{transform:"translateZ(0)",willChange:8>s?"transform, opacity":"auto"},children:Y.jsx(qt,{...e,onClick:()=>l(e),id:e.id,onPrefetch:()=>c&&c(e.id),applyWillChange:8>s})},`${n}-${e.id}-${s}`))),s&&Y.jsx("div",{className:"flex-shrink-0",children:Y.jsx("div",{className:"group flex flex-col gap-4 rounded-lg w-80 flex-shrink-0",children:Y.jsx("div",{className:"relative aspect-[16/10] rounded-lg overflow-hidden bg-black/20 w-full",children:Y.jsx("div",{className:"w-8 h-8 border-4 border-white/20 border-t-white rounded-full animate-spin absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})})})]})]});const j=(Array.isArray(t)?t:[]).slice(0,b);return Y.jsxs("div",{className:"mt-8",children:[v?Y.jsxs("div",{className:"flex items-center justify-between mb-4 pl-7 pr-4",children:[Y.jsx("h2",{className:"text-xl font-semibold bg-gradient-to-r from-white via-white/90 to-white/60 bg-clip-text text-transparent relative",children:e}),Y.jsxs(J,{to:"/movies?category="+n,"aria-label":"View all "+e,className:"text-xs px-3 py-1.5 rounded-full bg-white/5 hover:bg-white/10 text-white/80 hover:text-white border border-white/10 transition-colors duration-200",children:[Y.jsx("span",{className:"relative z-10",children:"View all"}),Y.jsx("span",{className:"ml-1 inline-block",children:"→"})]})]}):Y.jsxs(Ft.div,{className:"flex items-center justify-between mb-4 pl-7 pr-4",initial:!v&&{opacity:0,x:-20},animate:p?{opacity:1,x:0}:{opacity:0,x:-20},transition:v?{duration:0}:{duration:.4,ease:[.25,.46,.45,.94],delay:.1},children:[Y.jsx("h2",{className:"text-xl font-semibold bg-gradient-to-r from-white via-white/90 to-white/60 bg-clip-text text-transparent relative",children:e}),Y.jsxs(J,{to:"/movies?category="+n,"aria-label":"View all "+e,className:"text-xs px-3 py-1.5 rounded-full bg-white/5 hover:bg-white/10 text-white/80 hover:text-white border border-white/10 transition-colors duration-200",children:[Y.jsx("span",{className:"relative z-10",children:"View all"}),Y.jsx("span",{className:"ml-1 inline-block",children:"→"})]})]}),Y.jsxs(Ft.div,{className:"relative group",initial:!v&&{opacity:0},animate:{opacity:1},transition:v?{duration:0}:{duration:.4,ease:[.25,.46,.45,.94],delay:.2},children:[Y.jsx("div",{className:"absolute inset-y-0 left-0 w-28 bg-gradient-to-r from-[#121417] to-transparent z-10 pointer-events-none"}),Y.jsx("div",{className:"absolute inset-y-0 right-0 w-28 bg-gradient-to-l from-[#121417] to-transparent z-10 pointer-events-none"}),j.length>0?Y.jsx("div",{style:{opacity:p?1:0,transition:"opacity 0.3s ease-out",willChange:p?"auto":"opacity"},children:Y.jsxs(Z,{modules:[Lt,Pt,Et,zt,Rt],spaceBetween:16,slidesPerView:"auto",speed:400,onSwiper:e=>{m.current=e},navigation:{nextEl:`.${n}-swiper-next`,prevEl:`.${n}-swiper-prev`},mousewheel:{forceToAxis:!0,sensitivity:1,releaseOnEdges:!0},keyboard:{enabled:!0,onlyInViewport:!0},grabCursor:!0,touchRatio:1,touchAngle:45,resistance:!0,resistanceRatio:.85,allowTouchMove:!0,allowSlideNext:!0,allowSlidePrev:!0,watchSlidesProgress:!0,freeMode:{enabled:!0,momentum:!0,momentumVelocityRatio:.75,sticky:!1},observer:!0,observeParents:!0,updateOnWindowResize:!0,className:"px-6 pb-4 overflow-hidden",children:[j.map(((e,s)=>Y.jsx(G,{className:"!w-auto",children:Y.jsx(Ft.div,{onMouseEnter:()=>o&&o(e,s,t),initial:!v&&{opacity:0,y:20,scale:.97},animate:{opacity:1,y:0,scale:1},transition:v?{duration:0}:{duration:.3,ease:[.25,.46,.45,.94],delay:Math.min(.2+.04*s,.8)},style:{transform:"translateZ(0)",willChange:10>s?"transform, opacity":"auto"},children:Y.jsx(Kt,{...e,onClick:()=>l(e),id:e.id,onPrefetch:()=>c&&c(e.id)})})},`${n}-${e.id}-${s}`))),s&&Y.jsx(G,{className:"!w-auto",children:Y.jsx("div",{className:"flex flex-col gap-4 rounded-lg w-64 sm:w-72 md:w-80 flex-shrink-0",children:Y.jsx("div",{className:"relative aspect-[16/10] rounded-lg overflow-hidden bg-black/20 w-full",children:Y.jsx("div",{className:"w-8 h-8 border-4 border-white/20 border-t-white rounded-full animate-spin absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})})})]})}):s?Y.jsx("div",{className:"px-4 pb-4",children:Y.jsxs("div",{className:"flex flex-row gap-4 overflow-hidden",children:[Y.jsx("div",{className:"w-64 sm:w-72 md:w-80 h-40 rounded-lg bg-white/5"}),Y.jsx("div",{className:"w-64 sm:w-72 md:w-80 h-40 rounded-lg bg-white/5"}),Y.jsx("div",{className:"w-64 sm:w-72 md:w-80 h-40 rounded-lg bg-white/5"})]})}):null,Y.jsx("div",{className:n+"-swiper-prev !w-10 !h-10 !bg-white/5 hover:!bg-white/12 !rounded-full !border !border-white/10 !transition-all !duration-300 !ease-out -translate-x-16 opacity-0 group-hover:translate-x-0 group-hover:opacity-100 !absolute !left-0 !-translate-y-1/2 !top-[50%] !m-0 !z-20 flex items-center justify-center hover:shadow-xl hover:shadow-black/20",children:Y.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),Y.jsx("div",{className:n+"-swiper-next !w-10 !h-10 !bg-white/5 hover:!bg-white/12 !rounded-full !border !border-white/10 !transition-all !duration-300 !ease-out translate-x-16 opacity-0 group-hover:translate-x-0 group-hover:opacity-100 !absolute !right-0 !-translate-y-1/2 !top-[50%] !m-0 !z-20 flex items-center justify-center hover:shadow-xl hover:shadow-black/20",children:Y.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 5l7 7-7 7"})})})]})]})}));Gt.displayName="MovieSectionSwiper";const Jt=U.memo((({src:e,alt:t="",className:s="",style:r={},aspectRatio:a="16/10",srcSet:i,sizes:n,placeholderSrc:l,onLoad:o,onError:c,retryCount:d=1,priority:u=!1,...m})=>{const[h,x]=U.useState(!1),[p,f]=U.useState(!1),[v,b]=U.useState(null),[y,j]=U.useState(0),N=U.useRef(null),k=U.useRef(null),C=U.useRef(null),S=U.useRef(null),T=U.useRef(null),_=U.useCallback((e=>e?l||e.replace(/\/(w\d+|original)/,"/w500"):null),[l]);U.useEffect((()=>(p&&d>y&&e&&(C.current=w((()=>{S.current=setTimeout((()=>{f(!1),j((e=>e+1)),S.current=null}),300+200*y)}))),()=>{if(C.current){try{g(C.current)}catch(e){}C.current=null}if(S.current){try{clearTimeout(S.current)}catch(e){}S.current=null}})),[p,y,d,e]),U.useEffect((()=>{if(!e)return b(null),x(!1),void f(!1);x(!1),f(!1),j(0);const t=_(e);b(t);const s=new window.Image;u?(s.fetchpriority="high",s.loading="eager"):s.loading="lazy";const r=768>window.innerWidth;let a=e;return r&&e.includes("/w")&&(e.includes("/w500")?a=e.replace("/w500","/w300"):e.includes("/w780")?a=e.replace("/w780","/w300"):e.includes("/w1280")&&(a=e.replace("/w1280","/w300"))),s.src=a,i&&(s.srcset=i),T.current=s,s.onload=()=>{T.current===s&&(b(a),x(!0),o&&o())},s.onerror=e=>{T.current===s&&(f(!0),c&&c(e))},()=>{if(T.current===s)try{T.current.onload=null,T.current.onerror=null,T.current.src="",T.current.srcset=""}catch(e){}finally{T.current=null}}}),[e,i,_,y,u,o,c]),U.useEffect((()=>()=>{if(C.current){try{g(C.current)}catch(e){}C.current=null}if(S.current){try{clearTimeout(S.current)}catch(e){}S.current=null}if(k.current){try{clearTimeout(k.current)}catch(e){}k.current=null}T.current&&(T.current.onload=null,T.current.onerror=null,T.current.src="",T.current.srcset="",T.current=null)}),[]);const M=!!m.onClick||void 0!==m.tabIndex;return Y.jsxs("div",{className:"relative overflow-hidden "+s,style:{aspectRatio:a,...r},"aria-busy":!h&&!p,"aria-label":t,tabIndex:M?0:void 0,...m,children:[!h&&!p&&Y.jsx(Ft.div,{className:"absolute inset-0 z-0 bg-gradient-to-br from-[#1a1d24] to-[#2b3036]",initial:{opacity:1},animate:{opacity:h?0:1},transition:{duration:.4},children:Y.jsx("div",{className:"absolute inset-0 animate-shimmer",style:{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.07) 50%, transparent)",backgroundSize:"200% 100%",animation:"shimmer 2s infinite linear"}})}),v&&!p&&!h&&Y.jsx(Ft.div,{className:"absolute inset-0 z-10 bg-cover bg-center",style:{backgroundImage:`url("${v}")`,transform:"scale(1.08)",filter:"blur(8px)"},initial:{opacity:0},animate:{opacity:h?0:.7},transition:{duration:.3},"aria-hidden":"true"}),!p&&v&&Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:"absolute inset-0 z-20 bg-cover bg-center",style:{backgroundImage:v===e?`url("${e}")`:"none",backgroundPosition:"center 20%",opacity:h?1:0,transition:h?"none":"opacity 0.5s ease-out"},"aria-hidden":"true"}),e&&Y.jsx("img",{ref:N,src:e,srcSet:i,sizes:n,alt:t,loading:"lazy",decoding:"async",style:{position:"absolute",width:1,height:1,opacity:0,pointerEvents:"none",zIndex:-1},tabIndex:-1,"aria-hidden":"true",draggable:!1,onLoad:()=>{x(!0),o&&o()},onError:e=>{f(!0),c&&c(e)}})]}),p&&Y.jsx("div",{className:"absolute inset-0 z-30 bg-gradient-to-br from-[#1a1d24] to-[#2b3036] flex items-center justify-center",children:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-white/20",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-label":"Image failed to load",role:"img",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})})),Kt=U.memo((({title:e,type:s,image:r,backdrop:n,seasons:l,rating:o,year:c,duration:d,runtime:u,onMouseLeave:m,onClick:h,id:x,prefetching:p,cardClassName:g,poster:f,poster_path:w,backdrop_path:y,overview:j,genres:N,release_date:k,first_air_date:C,vote_average:S,media_type:T,onPrefetch:_,applyWillChange:M})=>{const{addToWatchlist:L,removeFromWatchlist:P,isInWatchlist:E}=t(),[z,R]=U.useState(!1),[I,A]=U.useState(!1),[F,V]=U.useState(!1),B=U.useRef(null),D=U.useRef(null),{isMobile:H}=$t(),[W,O]=U.useState(!1),$=U.useRef(null),[q,Z]=U.useState(!1),[G,J]=U.useState(!1),K=U.useRef({x:0,y:0}),Q=U.useCallback((()=>H?f||w||r||n||y||null:n||y||r||f||w||null),[H,f,w,r,n,y]);U.useEffect((()=>{}),[x,e,H,w,y,Q]),U.useEffect((()=>{R(E(x))}),[x,E]),U.useEffect((()=>{if(!M||"undefined"==typeof window)return;const e=$.current;if(!e||!e.style)return;e.style.willChange="transform, opacity";const t=setTimeout((()=>{try{e.style.willChange="auto"}catch(t){}}),350);return()=>{clearTimeout(t);try{e&&e.style&&(e.style.willChange="auto")}catch(s){}}}),[M]);const X=U.useCallback((async()=>{if(!F&&!I){A(!0);try{const e=[];u&&j||e.push(Ae(x,T||s||"movie").catch((e=>null))),e.push(at(x,T||s||"movie",1).catch((e=>null)));const t=[];if(w){const e=i({poster_path:w},"w342").src;t.push({url:e,priority:"high"})}if(y){const e=a({backdrop_path:y},"w500").src;t.push({url:e,priority:"medium"})}const r=t.map((({url:e,priority:t})=>new Promise((s=>{const r=new window.Image;r.crossOrigin="anonymous",r.loading="high"===t?"eager":"lazy",r.onload=()=>s(!0),r.onerror=()=>s(!1),r.src=e}))));r.length>0&&e.push(Promise.all(r)),await Promise.allSettled(e),V(!0),_&&_(x)}catch(e){}finally{A(!1)}}}),[x,u,j,T,s,F,I,_,w,y]),ee=U.useCallback((t=>{B.current&&clearTimeout(B.current),window&&window.gtag&&!window.__cardHoverTracked?.[x]&&(window.gtag("event","card_hover",{movie_id:x,title:e}),window.__cardHoverTracked=window.__cardHoverTracked||{},window.__cardHoverTracked[x]=!0),t&&"mouseenter"===t.type&&ee.lastTouch&&400>Date.now()-ee.lastTouch||(B.current=setTimeout((()=>{X()}),120))}),[X,x,e]);ee.lastTouch=0;const te=U.useCallback((e=>{ee.lastTouch=Date.now(),ee({type:"touchstart"}),e.touches&&e.touches[0]&&(K.current={x:e.touches[0].clientX,y:e.touches[0].clientY},J(!1))}),[ee]),se=U.useCallback((()=>{J(!1)}),[]),re=U.useCallback((e=>{if(e.touches&&e.touches[0]){const t=e.touches[0].clientX;Math.abs(t-K.current.x)>15&&J(!0)}}),[]),ae=U.useCallback((e=>{K.current={x:e.clientX,y:e.clientY},Z(!0),J(!1)}),[]),ie=U.useCallback((e=>{q&&Math.abs(e.clientX-K.current.x)>15&&J(!0)}),[q]),ne=U.useCallback((()=>{Z(!1),J(!1)}),[]),le=U.useCallback((t=>{Z(!1),J(!1),B.current&&(clearTimeout(B.current),B.current=null),D.current&&(clearTimeout(D.current),D.current=null),window&&window.gtag&&!window.__cardLeaveTracked?.[x]&&(window.gtag("event","card_hover_leave",{movie_id:x,title:e}),window.__cardLeaveTracked=window.__cardLeaveTracked||{},window.__cardLeaveTracked[x]=!0),"function"==typeof m&&m(t)}),[x,e,m]);U.useEffect((()=>()=>{if(B.current)try{clearTimeout(B.current)}catch(e){}finally{B.current=null}if(D.current)try{clearTimeout(D.current)}catch(e){}finally{D.current=null}}),[]);const oe=U.useCallback((e=>{if(q&&G)return e.preventDefault(),void e.stopPropagation();h&&h()}),[q,G,h]),ce=Q(),de="undefined"!=typeof window&&window.innerWidth>1800&&!H?"21/9":H?"2/3":"16/10",ue="undefined"!=typeof window&&window.innerWidth>1800&&!H?"w-[420px]":H?"w-[160px] sm:w-[180px] md:w-[200px]":"w-80 xl:w-[340px]";return Y.jsx("div",{ref:$,className:`flex flex-col gap-4 rounded-lg ${ue} flex-shrink-0 ${g} movie-card-container`,"data-movie-id":x,style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",touchAction:"auto"},children:Y.jsxs("div",{className:`relative ${H?"aspect-[2/3]":"aspect-[16/10]"} rounded-lg overflow-hidden transform-gpu transition-transform duration-300 hover:scale-[1.015] hover:shadow-2xl hover:shadow-black/20 w-full active:scale-[0.995] active:shadow-lg`,children:[p&&Y.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/30 pointer-events-none",children:Y.jsx("div",{className:"w-8 h-8 border-4 border-white/20 border-t-white rounded-full animate-spin"})}),Y.jsxs("div",{className:"w-full h-full cursor-pointer group",onClick:async e=>{if(q&&G)return e.preventDefault(),void e.stopPropagation();try{O(!0);const t=oe(e);t&&"function"==typeof t.then&&await t}finally{O(!1)}},onMouseEnter:ee,onMouseLeave:le,onMouseDown:ae,onMouseMove:ie,onMouseUp:ne,onTouchStart:te,onTouchMove:re,onTouchEnd:se,style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",touchAction:"auto"},children:[Y.jsx(Jt,{src:ce,alt:e,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",aspectRatio:de}),W&&Y.jsx(v,{})]}),Y.jsx("div",{className:"hidden md:block absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent rounded-b-lg p-3 sm:p-4 pointer-events-none z-10",children:Y.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base md:text-lg truncate drop-shadow-lg",children:e})}),Y.jsx("div",{className:"block lg:hidden",children:Y.jsx(b,{rating:o||S,position:"top-left",size:"ultra-small"})}),Y.jsx("div",{className:"hidden lg:block xl:hidden",children:Y.jsx(b,{rating:o||S,position:"top-left",size:"extra-small"})}),Y.jsx("div",{className:"hidden xl:block 2xl:hidden",children:Y.jsx(b,{rating:o||S,position:"top-left",size:"small"})}),Y.jsx("div",{className:"hidden 2xl:block",children:Y.jsx(b,{rating:o||S,position:"top-left",size:"default"})}),Y.jsx("div",{className:"absolute top-3 right-3 z-10",children:Y.jsx("button",{className:"p-2 bg-black/40 backdrop-blur-sm rounded-full opacity-0 group-hover:opacity-100 sm:opacity-100 transition-all duration-300 hover:bg-black/60 hover:scale-110 transform-gpu active:scale-95 touch-manipulation",onClick:t=>{if(t.preventDefault(),t.stopPropagation(),z)P(x),R(!1);else{const t=k||C||"";let a="N/A";if(t){const e=new Date(t).getFullYear();isNaN(e)||(a=e)}const i={id:x,title:e||"",type:T||s||"movie",poster_path:f||w||r||n||"",backdrop_path:n||y||"",overview:j||"",year:a,rating:"number"==typeof S?S:"number"==typeof o?o:0,genres:N||[],release_date:t,addedAt:(new Date).toISOString()};L(i),R(!0)}},type:"button",style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",touchAction:"auto"},children:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${z?"text-white":"text-white/80"} transition-colors duration-300`,viewBox:"0 0 24 24",fill:"currentColor",children:z?Y.jsx("path",{d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-4-7 4V5z"}):Y.jsx("path",{d:"M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V5h10v13z"})})})})]})})})),Qt=U.memo((({title:e,movies:t,loading:s,onLoadMore:r,hasMore:a,currentPage:i,sectionKey:n,onMovieSelect:l,onMovieHover:o,onPrefetch:c})=>{const[d,u]=U.useState(!1),[m,h]=U.useState(!1),[x,p]=U.useState(!1),[g,f]=U.useState(!1);$t();const[w,v]=U.useState([]),b=U.useRef(null),y=U.useRef(!1),j=U.useRef(!1),N=U.useRef(null),k=U.useRef(null),C=U.useRef(null),S=U.useRef(new Set);U.useEffect((()=>{}),[n,e,t,s,a,i]);const T=U.useCallback((async()=>{if(!a||d||j.current||!r)return;const e=i+1;if(S.current.has(e))return;j.current=!0;performance.now();try{v((t=>[...t,`${n}-${e}`]));const t=r(n),s=new Promise(((e,t)=>setTimeout((()=>t(Error("Preload timeout"))),1e4)));await Promise.race([t,s]),S.current.add(e),performance.now()}catch(t){if(S.current.delete(e),"NetworkError"===t.name||t.message.includes("timeout"))return void setTimeout((()=>{j.current=!1}),2e3)}finally{j.current=!1,v((t=>t.filter((t=>t!==`${n}-${e}`))))}}),[a,d,i,n]);U.useCallback((()=>{if(!b.current||y.current||!a||d)return;const{scrollTop:e,scrollHeight:t,clientHeight:s}=b.current,r=400>t-e-s;f(!0),C.current&&clearTimeout(C.current),C.current=setTimeout((()=>{f(!1)}),100),r&&(N.current&&clearTimeout(N.current),N.current=setTimeout((()=>{T()}),50))}),[a,d]),U.useEffect((()=>{m&&a&&!d&&!S.current.has(i+1)&&T()}),[m,a,d,i]);const _=U.useCallback((()=>{b.current&&b.current.scrollTo({top:0,behavior:"smooth"}),S.current.clear(),N.current&&(clearTimeout(N.current),N.current=null),f(!1),C.current&&(clearTimeout(C.current),C.current=null),y.current=!1,u(!1),v((e=>e.filter((e=>!e.startsWith(n)))))}),[n]),M=U.useCallback((()=>{if(x)return;p(!0),m?(_(),h(!1),b.current&&(b.current.style.transition="all 0.3s ease-out",setTimeout((()=>{b.current&&(b.current.style.transition="")}),300))):(h(!0),a&&!S.current.has(i+1)&&(window.requestIdleCallback?requestIdleCallback((()=>T()),{timeout:1e3}):setTimeout(T,100)),setTimeout((()=>{const e=document.getElementById("section-"+n);if(e){const t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),t.disconnect())}))}),{threshold:.1});t.observe(e);const s=setTimeout((()=>{t&&(t.disconnect(),e.scrollIntoView({behavior:"smooth",block:"start"}))}),300);return()=>{s&&clearTimeout(s),t&&t.disconnect()}}}),150));const e=setTimeout((()=>{p(!1)}),450);return()=>{e&&clearTimeout(e)}}),[m,x,a,i,T,n,_]);return U.useEffect((()=>()=>{if([N.current,C.current,k.current].forEach((e=>{if(e)try{clearTimeout(e)}catch(t){}})),autoRotateIntervalRef.current)try{clearInterval(autoRotateIntervalRef.current)}catch(e){}if(visibilityObserverRef.current)try{visibilityObserverRef.current.disconnect()}catch(e){}N.current=null,C.current=null,k.current=null,autoRotateIntervalRef.current=null,visibilityObserverRef.current=null,isTransitioningRef.current=!1,y.current=!1,j.current=!1}),[]),U.useEffect((()=>{const e=()=>{const e=window.innerWidth>768&&!(window.navigator&&window.navigator.userAgent&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent));setIsDesktop((t=>t!==e?e:t))};e();const t=e;try{window.addEventListener("resize",t,{passive:!0})}catch(s){window.addEventListener("resize",t)}return()=>{try{window.removeEventListener("resize",t)}catch(s){}}}),[]),U.useEffect((()=>{y.current=!1,u(!1),j.current=!1}),[m]),s&&!t.length?Y.jsxs("div",{className:"mb-16",children:[Y.jsx("div",{className:"flex items-center justify-between px-4 pb-3",children:Y.jsx("h2",{className:"text-white text-2xl font-bold leading-tight tracking-[-0.02em]",children:e})}),Y.jsx("div",{className:"relative px-2 pt-2",children:Y.jsx("div",{className:"flex gap-3 sm:gap-4 md:gap-6 overflow-x-auto pb-4 scrollbar-hide horizontal-scroll-container",children:[...[,,,,,,]].map(((e,t)=>Y.jsx("div",{className:"flex-shrink-0",children:Y.jsxs("div",{className:"w-full max-w-[180px] sm:max-w-[220px] md:max-w-[250px]",children:[Y.jsx("div",{className:"aspect-[2/3] bg-gray-800 rounded-lg w-full"}),Y.jsx("div",{className:"h-4 bg-gray-800 rounded mt-2 w-3/4"}),Y.jsx("div",{className:"h-3 bg-gray-800 rounded mt-1 w-1/2"})]})},`loader-${n}-${t}`)))})})]}):Y.jsxs("div",{id:"section-"+n,className:" group/section",children:[Y.jsxs("div",{className:"flex flex-row items-center justify-between px-4 pb-3 pt-4 gap-2 sm:gap-0",children:[Y.jsxs("div",{className:"flex flex-row items-center gap-2 sm:gap-4 flex-1 min-w-0",children:[Y.jsx("h2",{className:"text-white/80 leading-relaxed pl-0 sm:pl-6 text-lg sm:text-2xl font-bold leading-tight tracking-[-0.02em] group-hover/section:text-[#a1abb5] transition-colors duration-300 whitespace-nowrap truncate",children:e}),Y.jsx("span",{className:"h-4 w-[1px] bg-white/10 group-hover/section:bg-white/20 transition-colors duration-300 hidden sm:inline-block"}),Y.jsx("span",{className:"text-white/50 text-xs sm:text-sm font-medium group-hover/section:text-white/70 transition-colors duration-300 truncate hidden sm:inline",children:m?"Scroll to explore":t.length>1?"Swipe to explore":"Swipe to view"})]}),Y.jsx("div",{className:"flex items-center gap-2 sm:gap-4 flex-shrink-0",children:Y.jsxs("button",{onClick:M,className:"opacity-100 sm:opacity-0 sm:group-hover/section:opacity-100 transition-all duration-300 text-[#a1abb5] hover:text-white text-xs sm:text-sm font-medium flex items-center gap-1 sm:gap-2 hover:gap-2 sm:hover:gap-3 relative overflow-hidden",children:[Y.jsxs("span",{className:"relative inline-block",children:[Y.jsx("span",{className:"block transition-transform duration-300 "+(m?"translate-y-[-100%]":"translate-y-0"),children:"View All"}),Y.jsx("span",{className:"block absolute top-0 left-0 transition-transform duration-300 "+(m?"translate-y-0":"translate-y-[100%]"),children:"View Less"})]}),Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-all duration-300 "+(m?"rotate-180":"sm:group-hover/section:translate-x-1"),viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"})})]})})]}),Y.jsxs("div",{className:"relative px-2 pt-2",children:[Y.jsx("div",{className:"absolute inset-y-0 left-0 w-24 bg-gradient-to-r from-[#121417] to-transparent z-10 pointer-events-none"}),Y.jsx("div",{className:"absolute inset-y-0 right-0 w-24 bg-gradient-to-l from-[#121417] to-transparent z-10 pointer-events-none"}),Y.jsx("div",{className:"transition-all duration-400 ease-in-out transform "+(x?"opacity-0 scale-95":"opacity-100 scale-100"),style:{willChange:"transform, opacity"},children:m?Y.jsxs("div",{ref:b,className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-4 sm:gap-6 max-h-[600px] overflow-y-auto overflow-x-hidden w-full px-4 sm:px-6 scrollbar-hide justify-items-center scroll-container-fix ultra-smooth-scroll",style:{scrollbarWidth:"thin",scrollbarColor:g?"rgba(255, 255, 255, 0.2) transparent":"rgba(255, 255, 255, 0.1) transparent",scrollBehavior:"smooth",overscrollBehavior:"auto",WebkitOverflowScrolling:"touch",scrollSnapType:"y proximity",scrollPadding:"1rem",willChange:"scroll-position",transform:"translateZ(0)",backfaceVisibility:"hidden",perspective:"1000px",scrollSnapAlign:"start",scrollSnapStop:"always",maxWidth:"100vw"},children:[t.map(((e,s)=>Y.jsx("div",{id:`movie-card-${n}-${e.id}`,className:"scroll-snap-align-start w-full flex justify-center",style:{willChange:"transform"},onMouseEnter:()=>o&&o(e,s,t),children:Y.jsx(Kt,{...e,onClick:()=>l(e),id:e.id,priority:10>s,prefetching:w.includes(e.id),onPrefetch:()=>c&&c(e.id)})},`${n}-${e.id}-${s}`))),d&&Y.jsx("div",{className:"col-span-full flex justify-center py-4",children:Y.jsx("div",{className:"w-8 h-8 border-4 border-white/20 border-t-white rounded-full animate-spin"})}),!a&&t.length>0&&Y.jsx("div",{className:"col-span-full text-center py-4 text-white/60",children:"No more movies to load"})]}):Y.jsxs("div",{className:"flex gap-3 sm:gap-4 md:gap-6 overflow-x-auto scrollbar-hide pb-4 px-2 sm:px-4 horizontal-scroll-container",style:{scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",willChange:"scroll-position",transform:"translateZ(0)"},children:[t.map(((e,s)=>Y.jsx("div",{className:"flex-shrink-0",onMouseEnter:()=>o&&o(e,s,t),children:Y.jsx(Kt,{...e,onClick:()=>l(e),id:e.id,onPrefetch:()=>c&&c(e.id)})},`${n}-${e.id}-${s}`))),d&&Y.jsx("div",{className:"flex-shrink-0",children:Y.jsx("div",{className:"group flex flex-col gap-4 rounded-lg w-80 flex-shrink-0",children:Y.jsx("div",{className:"relative aspect-[16/10] rounded-lg overflow-hidden bg-black/20 w-full",children:Y.jsx("div",{className:"w-8 h-8 border-4 border-white/20 border-t-white rounded-full animate-spin absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})})})]})})]})]})})),Xt=U.memo((({featuredContent:e,trendingMovies:r,onMovieSelect:i,onGenreClick:n,onCastMemberClick:l})=>{const{addToWatchlist:o,removeFromWatchlist:c,isInWatchlist:d}=t(),{viewingProgress:u}=s(),[m,h]=U.useState(!1),x=U.useRef(null),[p,g]=U.useState(!1),[f,w]=U.useState(null),v=U.useMemo((()=>!!e&&d(e.id)),[e,d]),b=U.useMemo((()=>{if(!e||!e.id||!u)return!1;if("movie"===(e.type||e.media_type||e.mediaType||"movie")){const t="movie_"+e.id;if(u[t])return!0;const s=u[t];return!(!s||"number"!=typeof s.progress||0>=s.progress)}const t=`tv_${e.id}_`;return Object.entries(u).some((([e,s])=>e.startsWith(t)&&"number"==typeof s?.progress&&s.progress>0))}),[e,u]);U.useMemo((()=>{if(!e||!e.id)return!1;const t=r.some((t=>t.id===e.id)),s=(e.popularity||0)>5e3,a=e.release_date||e.first_air_date,i=!!a&&new Date(a).getFullYear()>=(new Date).getFullYear()-1;return t||s||i}),[e,r]);const y=U.useCallback((async t=>{if(t?.stopPropagation?.(),!e||!e.id)return;let s=e.trailer||e.trailerKey||null;try{if(!s){const t=e.media_type||e.mediaType||e.type||"movie";if("function"==typeof rt){const r=await rt(e.id,t).catch((()=>null)),a=r?.results?.find((e=>"Trailer"===e.type&&"YouTube"===e.site));s=a?.key||null}}}catch(r){}w(s),g(!0)}),[e]),j=U.useCallback((()=>{g(!1),setTimeout((()=>w(null)),200)}),[]),N=U.useCallback((t=>{if(t.stopPropagation(),e&&e.id&&e.title)try{if(v)c(e.id);else{const t=e.release_date||e.first_air_date||"";let r="N/A";if(t)try{const e=new Date(t).getFullYear();isNaN(e)||1900>=e||e>(new Date).getFullYear()+10||(r=e)}catch(s){}let a=0;if("number"!=typeof e.rating||isNaN(e.rating)){if("string"==typeof e.rating){const t=parseFloat(e.rating);isNaN(t)||(a=Math.max(0,Math.min(10,t)))}}else a=Math.max(0,Math.min(10,e.rating));const i={id:e.id,title:e.title.trim()||"Untitled",type:e.type||"movie",poster_path:e.poster_path||e.backdrop||"",backdrop_path:e.backdrop||e.poster_path||"",overview:e.overview?.trim()||"No overview available",year:r,rating:a,genres:Array.isArray(e.genres)?e.genres:[],release_date:t,addedAt:(new Date).toISOString(),originalLanguage:e.original_language||"en",popularity:e.popularity||0,voteCount:e.vote_count||0,mediaType:e.media_type||e.type||"movie"};o(i)}}catch(s){}}),[e,v,o,c]);if(!e)return null;const k={hidden:{opacity:0,y:8,scale:.9,filter:"blur(0.5px)"},visible:e=>({opacity:1,y:0,scale:1,filter:"blur(0px)",transition:{delay:.2+.08*e,duration:.35,ease:[.25,.46,.45,.94],y:{duration:.35},scale:{duration:.35},opacity:{duration:.3},filter:{duration:.2}}})};return Y.jsxs(At,{reducedMotion:Ot()?"always":"user",transition:{type:"tween"},children:[void 0,Y.jsxs("div",{ref:x,className:"relative min-h-[55vh] sm:min-h-[60vh] min-h-[420px] sm:min-h-[480px] lg:min-h-[70vh] xl:min-h-[80vh] 2xl:min-h-[90vh] xl:max-h-[850px] 2xl:max-h-[950px] w-full overflow-hidden flex items-stretch scrollbar-hide hero-section",children:[Y.jsx(Ft.img,{className:"absolute inset-0 w-full h-full object-cover transform-gpu",src:a(e,"w1280").src,srcSet:a(e,"w1280").srcSet,alt:(e.title||e.name||"Featured")+" backdrop",decoding:"async",loading:"eager",fetchpriority:"high",sizes:"(min-width: 1536px) 100vw, (min-width: 1280px) 100vw, (min-width: 1024px) 100vw, 100vw",style:{backfaceVisibility:"hidden",transform:"translateZ(0)",imageRendering:"optimizeQuality"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,ease:[.25,.46,.45,.94],opacity:{duration:.8}}}),Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#121417] via-[#121417]/90 sm:via-[#121417]/80 to-[#121417]/40 sm:to-transparent"}),Y.jsx("div",{className:"relative h-full max-w-7xl px-4 sm:px-6 lg:px-8 flex items-end transform-gpu hero-content",children:Y.jsxs("div",{className:"w-full max-w-2xl lg:max-w-3xl xl:max-w-4xl flex flex-col gap-4 sm:gap-6 rounded-2xl p-4 sm:p-6 md:p-10 overflow-auto lg:overflow-visible max-h-[85vh] sm:max-h-[90vh] md:max-h-[85vh] lg:max-h-none mt-4 sm:mt-8 mx-auto lg:mx-0 scrollbar-hide",children:[Y.jsx("div",{className:"flex items-center gap-2 mb-2 sm:mb-4",children:Y.jsxs("div",{className:"relative group",children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-primary/10 blur-md group-hover:blur-lg transition-all duration-300 rounded-full transform-gpu"}),Y.jsxs("div",{className:"relative flex items-center gap-2 px-3 sm:px-4 py-1 sm:py-1.5 bg-black/40 backdrop-blur-sm rounded-full border border-white/10 transform-gpu",children:[Y.jsx("svg",{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-primary transform-gpu",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Y.jsx("path",{d:"M13 2L3 14H12L11 22L21 10H12L13 2Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),Y.jsx("span",{className:"text-xs sm:text-sm font-medium text-white/90 tracking-wide transform-gpu",children:"Trending Now"})]})]})}),Y.jsx(Vt,{children:e.logo?Y.jsx(Ft.div,{className:"mb-2 sm:mb-4",variants:{hidden:{opacity:0,scale:.9,filter:"blur(0.5px)"},visible:{opacity:1,scale:1,filter:"blur(0px)",transition:{duration:.4,ease:[.25,.46,.45,.94],scale:{duration:.4},opacity:{duration:.3},filter:{duration:.2}}}},initial:"hidden",animate:"visible",exit:"hidden",children:Y.jsx("img",{src:e.logo,alt:e.title,className:"w-[180px] sm:w-[220px] md:w-[280px] lg:w-[320px] xl:w-[340px] max-w-full h-auto object-contain transform-gpu hero-logo",style:{backfaceVisibility:"hidden",imageRendering:"optimizeQuality"},onError:e=>{const t=e?.currentTarget||e?.target;t&&t.style&&(t.style.display="none")},onLoad:e=>{e.target.style.transition="opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)",e.target.style.opacity="1"},loading:"eager",fetchpriority:"high"})}):Y.jsx(Ft.h1,{className:"text-2xl sm:text-3xl md:text-5xl lg:text-6xl font-extrabold mb-2 sm:mb-4 uppercase tracking-tight leading-tight bg-gradient-to-br from-white via-primary to-[#6b7280] bg-clip-text text-transparent drop-shadow-[0_4px_32px_rgba(99,102,241,0.25), 0 2px 16px rgba(0,0,0,0.45)] animate-hero-title",style:{WebkitTextStroke:"1px rgba(0,0,0,0.12)",letterSpacing:"-0.02em",lineHeight:"1.08",textShadow:"0 4px 32px rgba(99,102,241,0.25), 0 2px 16px rgba(0,2,16,0.45)",willChange:"transform, opacity"},variants:{hidden:{opacity:0,y:15,filter:"blur(1px)"},visible:{opacity:1,y:0,filter:"blur(0px)",transition:{duration:.5,ease:[.25,.46,.45,.94],opacity:{duration:.4},y:{duration:.5},filter:{duration:.3}}}},initial:"hidden",animate:"visible",exit:"hidden",children:e.title})}),Y.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-8 mb-2 text-white/80",children:[Y.jsx("div",{className:"flex items-center gap-1.5 sm:gap-2",children:Y.jsx("div",{className:"px-2 py-1 rounded-full text-xs font-medium "+("tv"===e.type?"bg-purple-500/20 text-purple-300 border border-purple-400/30":"bg-blue-500/20 text-blue-300 border border-blue-400/30"),children:"tv"===e.type?"TV Series":"Movie"})}),Y.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-white/60",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"})}),Y.jsx("span",{className:"text-sm sm:text-base",children:e.year})]}),Y.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-yellow-400",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),Y.jsx("span",{className:"text-sm sm:text-base",children:"number"==typeof e.rating?e.rating.toFixed(1):"string"==typeof e.rating?parseFloat(e.rating).toFixed(1):"N/A"})]}),Y.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-white/60",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4.2 14.2L11 13V7h1.5v5.2l4.5 2.7-.8 1.3z"})}),Y.jsx("span",{className:"text-sm sm:text-base",children:"tv"===e.type&&e.number_of_seasons?`${e.number_of_seasons} Season${e.number_of_seasons>1?"s":""}`:e.runtime?`${Math.floor(e.runtime/60)}h ${e.runtime%60}m`:e.episode_run_time?`${Math.floor(e.episode_run_time[0]/60)}h ${e.episode_run_time[0]%60}m`:"N/A"})]}),e.original_language&&Y.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 sm:h-4 sm:w-4 text-white/60",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.9 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2s.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2s.07-1.35.16-2h4.68c.09.65.16 1.32.16 2s-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2s-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"})}),Y.jsx("span",{className:"text-sm sm:text-base uppercase",children:(C=e.original_language,{en:"English",hi:"Hindi",es:"Spanish",fr:"French",de:"German",it:"Italian",pt:"Portuguese",ru:"Russian",ja:"Japanese",ko:"Korean",zh:"Chinese",ar:"Arabic",tr:"Turkish",nl:"Dutch",sv:"Swedish",da:"Danish",fi:"Finnish",no:"Norwegian",pl:"Polish",cs:"Czech",hu:"Hungarian",el:"Greek",he:"Hebrew",ro:"Romanian",th:"Thai",vi:"Vietnamese",id:"Indonesian",ms:"Malay",fa:"Persian",uk:"Ukrainian",bg:"Bulgarian",hr:"Croatian",sk:"Slovak",sl:"Slovenian",et:"Estonian",lv:"Latvian",lt:"Lithuanian",sr:"Serbian",ca:"Catalan",eu:"Basque",gl:"Galician",is:"Icelandic",mk:"Macedonian",bs:"Bosnian",hy:"Armenian",ka:"Georgian",az:"Azerbaijani",uz:"Uzbek",kk:"Kazakh",ky:"Kyrgyz",tg:"Tajik",mn:"Mongolian",ne:"Nepali",si:"Sinhala",km:"Khmer",lo:"Lao",my:"Burmese",jw:"Javanese",su:"Sundanese",ceb:"Cebuano",hmn:"Hmong",haw:"Hawaiian",yi:"Yiddish",fy:"Frisian",xh:"Xhosa",zu:"Zulu",af:"Afrikaans",lb:"Luxembourgish",ga:"Irish",mt:"Maltese",cy:"Welsh",gd:"Scottish Gaelic",kw:"Cornish",br:"Breton",sm:"Samoan",mi:"Maori",to:"Tongan",fj:"Fijian",ty:"Tahitian",mg:"Malagasy",sw:"Swahili",am:"Amharic",ha:"Hausa",yo:"Yoruba",ig:"Igbo",sn:"Shona",st:"Sesotho",so:"Somali",om:"Oromo",ti:"Tigrinya",ak:"Akan",rw:"Kinyarwanda",ny:"Chichewa",sg:"Sango",ln:"Lingala",wo:"Wolof",ff:"Fula",dz:"Dzongkha",bo:"Tibetan",ug:"Uyghur",ps:"Pashto",ku:"Kurdish",sd:"Sindhi",pa:"Punjabi",gu:"Gujarati",bn:"Bengali",as:"Assamese",or:"Odia",ta:"Tamil",te:"Telugu",kn:"Kannada",ml:"Malayalam",mr:"Marathi",sa:"Sanskrit"}[C]||C.toUpperCase())})]})]}),Y.jsxs("div",{className:"relative mb-2 transition-all duration-300 ease-in-out max-w-full",children:[Y.jsx("div",{className:"text-white/80 leading-relaxed transition-all duration-300 ease-in-out break-words text-sm sm:text-base "+(m?"":"line-clamp-2"),style:{overflow:m?"auto":"hidden",wordBreak:"break-word",whiteSpace:"pre-line",willChange:"opacity"},children:e.overview}),e.overview.length>150&&Y.jsx("button",{onClick:()=>h(!m),className:"mt-2 text-primary text-xs sm:text-sm font-medium transition-colors duration-200 hover:text-primary/80",children:m?"Show less":"Read more"})]}),e.genres&&e.genres.length>0&&Y.jsx("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-2",children:e.genres.slice(0,5).map(((e,t)=>{let s="";try{s="object"==typeof e?e.name:e+""}catch(a){s="object"==typeof e&&e.name||"Unknown"}const r="object"==typeof e?e:{name:s};return Y.jsx(Ft.span,{className:"px-2 sm:px-3 py-1 bg-white/10 text-white/80 rounded-full text-xs sm:text-sm cursor-pointer hover:bg-white/20 focus:outline-none focus:ring-2 focus:ring-white/30",custom:t,variants:k,initial:"hidden",animate:"visible",role:"button",tabIndex:0,onClick:()=>n&&n(r),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n&&n(r))},children:s},s)}))}),e.cast&&e.cast.length>0&&Y.jsx("div",{className:"flex items-center gap-2 sm:gap-4",children:e.cast.slice(0,4).map(((e,t)=>Y.jsxs("div",{className:"flex flex-col items-center cursor-pointer hover:scale-105 transition-transform duration-200",onClick:()=>l(e),children:[Y.jsx("img",{src:e.image,alt:e.name,className:"w-8 h-8 sm:w-12 sm:h-12 rounded-full object-cover border-2 border-white/20 shadow",style:{background:"#222"}}),Y.jsx("span",{className:"text-xs text-white/80 mt-1 max-w-[50px] sm:max-w-[60px] truncate text-center",children:e.name})]},t)))}),Y.jsxs("div",{className:"flex flex-row items-center gap-2 sm:gap-3 md:gap-4 overflow-visible px-2 py-4 w-full mb-6",children:[Y.jsxs("button",{onClick:()=>i(e),className:"group relative flex-1 sm:w-auto px-4 sm:px-6 md:px-8 py-2.5 sm:py-3 bg-white text-black rounded-full hover:bg-white/90 transition-all duration-300 flex items-center justify-center gap-2 font-medium hover:scale-105 hover:shadow-lg hover:shadow-white/20 overflow-hidden flex-shrink-0 transform-gpu",children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-300"}),Y.jsxs("div",{className:"relative flex items-center gap-2",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5 transition-all duration-300 group-hover:scale-110 group-hover:rotate-12",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("polygon",{points:"8,5 20,12 8,19"})}),Y.jsx("span",{className:"text-sm sm:text-base",children:b?"Resume":"Watch Now"})]})]}),Y.jsxs("button",{onClick:y,className:"hidden md:flex group relative flex-1 sm:w-auto px-3 sm:px-4 md:px-6 py-2.5 sm:py-3 rounded-full transition-all duration-300 items-center justify-center gap-2 font-medium hover:scale-105 hover:shadow-lg overflow-hidden flex-shrink-0 transform-gpu bg-white/10 text-white/90 border border-white/10 hover:bg-white/20",children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-300"}),Y.jsxs("div",{className:"relative flex items-center gap-2",children:[Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"h-4 w-4 sm:h-5 sm:w-5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Y.jsx("circle",{cx:"12",cy:"12",r:"9"}),Y.jsx("polygon",{points:"10,8 16,12 10,16",fill:"currentColor",stroke:"none"})]}),Y.jsx("span",{className:"text-sm sm:text-base",children:"Watch Trailer"})]})]}),Y.jsxs("button",{onClick:N,className:"group relative flex-1 sm:w-auto px-3 sm:px-4 md:px-6 py-2.5 sm:py-3 rounded-full transition-all duration-300 flex items-center justify-center gap-2 font-medium hover:scale-105 hover:shadow-lg overflow-hidden flex-shrink-0 transform-gpu "+(v?"bg-white/20 text-white border border-white/30 hover:bg-white/30":"bg-white/10 text-white/90 border border-white/10 hover:bg-white/20"),style:{whiteSpace:"nowrap"},children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-300"}),Y.jsxs("div",{className:"relative flex items-center gap-2 min-w-0",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5 transition-all duration-300 group-hover:scale-110 "+(v?"group-hover:rotate-12":"group-hover:rotate-90"),viewBox:"0 0 24 24",fill:"currentColor",children:v?Y.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}):Y.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),Y.jsx("span",{className:"text-sm sm:text-base truncate whitespace-nowrap",children:v?"Added to List":"Add to List"})]})]})]})]})}),p&&Y.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:j,children:Y.jsxs("div",{className:"relative w-[90vw] md:w-[70vw] lg:w-[60vw] aspect-video bg-black rounded-xl overflow-hidden shadow-2xl border border-white/10",onClick:e=>e.stopPropagation(),children:[Y.jsx("button",{onClick:j,"aria-label":"Close Trailer",className:"absolute top-3 right-3 z-10 bg-white text-black rounded-full h-9 w-9 flex items-center justify-center shadow-lg hover:scale-105 transition",children:Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[Y.jsx("path",{d:"M6 18L18 6"}),Y.jsx("path",{d:"M6 6l12 12"})]})}),f?Y.jsx("iframe",{title:"Trailer",width:"100%",height:"100%",src:`https://www.youtube.com/embed/${f}?autoplay=1&rel=0`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{display:"block"}}):Y.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/70",children:"Trailer unavailable"})]})}),Y.jsxs("div",{className:"absolute bottom-1 sm:bottom-2 md:bottom-2 left-1/2 -translate-x-1/2 z-10 flex flex-col items-center pointer-events-none select-none",children:[Y.jsx(Ft.div,{initial:{y:0,opacity:.7},animate:{y:[0,10,0],opacity:[.7,1,.7]},transition:{duration:1.5,repeat:1/0},children:Y.jsx("svg",{className:"h-5 w-5 sm:h-6 sm:w-6 md:h-7 md:w-7 text-white/60 sm:text-white/70",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})}),Y.jsx("span",{className:"text-xs text-white/50 sm:text-white/60 mt-1",children:"Scroll"})]})]})]});var C})),es=U.memo((({featuredContent:e,trendingMovies:r,loading:a,onMovieSelect:i,onGenreClick:n,onCastMemberClick:l})=>{const{addToWatchlist:o,removeFromWatchlist:c,isInWatchlist:d}=t(),{viewingProgress:u}=s(),[m,h]=U.useState(0),x=U.useRef(null),[p,g]=U.useState(!1),f=U.useRef(null),w=U.useMemo((()=>e&&e.length>0?e.slice(0,6):r&&r.length>0?r.slice(0,6):[]),[e,r]),v=U.useMemo((()=>Array.from({length:6},((e,t)=>({id:"placeholder-"+t,title:"Loading...",poster_path:null,backdrop_path:null,isPlaceholder:!0,type:"movie"})))),[]),b=U.useMemo((()=>a&&0===w.length?v:w.length>0?w:v),[a,w,v]),y=U.useMemo((()=>w.length>0?[...w.slice(0,2),...w.slice(2)]:b),[w,b]),j=U.useCallback((e=>!!e&&d(e.id)),[d]),N=U.useCallback((e=>{if(!e||!e.id||!u)return!1;if("movie"===(e.type||e.media_type||e.mediaType||"movie")){const t=u["movie_"+e.id];return!(!t||"number"!=typeof t.progress||0>=t.progress)}const t=`tv_${e.id}_`;return Object.entries(u).some((([e,s])=>e.startsWith(t)&&"number"==typeof s?.progress&&s.progress>0))}),[u]),k=U.useCallback((e=>{if(!x.current||0>e||e>=y.length)return;const t=e*(x.current.scrollWidth/y.length);x.current.scrollTo({left:t,behavior:"smooth"})}),[y.length]),C=U.useCallback((()=>{if(!x.current)return;const e=x.current.scrollLeft,t=x.current.scrollWidth/y.length,s=Math.round(e/t);s!==m&&h(s)}),[m,y.length]),S=U.useCallback((e=>{h(e),k(e)}),[k]),T=U.useCallback(((e,t)=>{if(e.stopPropagation(),t)try{if(j(t))c(t.id);else{const e=t.release_date||t.first_air_date||"";let r="N/A";if(e)try{const t=new Date(e).getFullYear();isNaN(t)||1900>=t||t>(new Date).getFullYear()+10||(r=t)}catch(s){}let a=0;if("number"!=typeof t.rating||isNaN(t.rating)){if("string"==typeof t.rating){const e=parseFloat(t.rating);isNaN(e)||(a=Math.max(0,Math.min(10,e)))}}else a=Math.max(0,Math.min(10,t.rating));const i={id:t.id,title:t.title?.trim()||t.name?.trim()||"Untitled",type:t.type||"movie",poster_path:t.poster_path||t.backdrop||"",backdrop_path:t.backdrop||t.poster_path||"",overview:t.overview?.trim()||"No overview available",year:r,rating:a,genres:Array.isArray(t.genres)?t.genres:[],release_date:e,addedAt:(new Date).toISOString(),originalLanguage:t.original_language||"en",popularity:t.popularity||0,voteCount:t.vote_count||0,mediaType:t.media_type||t.type||"movie"};o(i)}}catch(s){}}),[j,o,c]);return U.useEffect((()=>{const e=new IntersectionObserver((([e])=>{g(e.isIntersecting)}),{threshold:.1});return f.current&&e.observe(f.current),()=>e.disconnect()}),[]),U.useEffect((()=>{const e=e=>{if("ArrowLeft"===e.key){e.preventDefault();const t=m>0?m-1:y.length-1;S(t)}else if("ArrowRight"===e.key){e.preventDefault();const t=(m+1)%y.length;S(t)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[m,y.length]),!a||w&&0!==w.length?Y.jsxs("div",{ref:f,className:"px-4 py-6 sm:hidden pb-0",children:[a&&Y.jsx("div",{className:"flex items-center gap-2 mb-3 ml-2 md:ml-0",children:Y.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500/20 backdrop-blur-sm rounded-full border border-blue-400/20",children:[Y.jsx("div",{className:"w-3.5 h-3.5 bg-blue-400 rounded-full"}),Y.jsx("span",{className:"text-sm font-medium text-blue-200 tracking-wide",children:"Loading content..."})]})}),Y.jsx("div",{className:"flex items-center gap-2 mb-4 ml-2 md:ml-0",children:Y.jsxs("div",{className:"relative",children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-primary/10 blur-md rounded-full"}),Y.jsxs("div",{className:"relative flex items-center gap-2 px-3 py-1.5 bg-black/40 backdrop-blur-sm rounded-full border border-white/10",children:[Y.jsx("svg",{className:"w-3.5 h-3.5 text-primary",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Y.jsx("path",{d:"M13 2L3 14H12L11 22L21 10H12L13 2Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),Y.jsx("span",{className:"text-sm font-medium text-white/90 tracking-wide",children:"Trending Now"})]})]})}),Y.jsxs("div",{className:"relative",children:[Y.jsx("div",{ref:x,className:"flex gap-6 overflow-x-auto scrollbar-hide pb-4 snap-x snap-mandatory px-1",style:{scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",scrollSnapType:"x mandatory",scrollPadding:"0 1rem",willChange:"scroll-position"},onScroll:C,children:y.map(((e,t)=>{const s=j(e),r=N(e);let a="N/A";try{const t=[e.release_date,e.first_air_date,e.releaseDate,e.firstAirDate,e.air_date,e.airDate].filter(Boolean);if(t.length>0)for(const e of t)try{const t=new Date(e);if(!isNaN(t.getTime())&&t.getFullYear()>1900&&t.getFullYear()<=(new Date).getFullYear()+10){a=t.getFullYear();break}}catch(o){continue}if("N/A"===a){const t=(e.title||e.name||"").match(/\((\d{4})\)/);if(t){const e=parseInt(t[1]);e>1900&&e<=(new Date).getFullYear()+10&&(a=e)}}}catch(c){a="N/A"}let l="N/A";try{if("tv"===e.type){if(e.number_of_seasons&&e.number_of_seasons>0)l=`${e.number_of_seasons} Season${e.number_of_seasons>1?"s":""}`;else if(e.episode_run_time&&Array.isArray(e.episode_run_time)&&e.episode_run_time.length>0){const t=e.episode_run_time[0];if(t&&t>0){const e=Math.floor(t/60),s=t%60;l=e>0?`${e}h ${s}m`:s+"m"}}else if(e.episodeRunTime&&Array.isArray(e.episodeRunTime)&&e.episodeRunTime.length>0){const t=e.episodeRunTime[0];if(t&&t>0){const e=Math.floor(t/60),s=t%60;l=e>0?`${e}h ${s}m`:s+"m"}}else if(e.episode_runtime){const t=e.episode_runtime;if(t&&t>0){const e=Math.floor(t/60),s=t%60;l=e>0?`${e}h ${s}m`:s+"m"}}"N/A"===l&&(l="TV Series")}else{const t=[e.runtime,e.duration,e.movie_runtime].filter((e=>e&&e>0));if(t.length>0){const e=t[0],s=Math.floor(e/60),r=e%60;l=s>0?`${s}h ${r}m`:r+"m"}else l="Movie"}}catch(c){l="tv"===e.type?"TV Series":"Movie"}return Y.jsxs("div",{className:"flex-shrink-0 w-[calc(100vw-2rem)] max-w-md rounded-3xl overflow-hidden border border-white/10 shadow-2xl snap-center transition-all duration-500 flex flex-col "+(e.isPlaceholder?"cursor-default":"cursor-pointer hover:scale-[1.03] active:scale-[0.97]"),onClick:e.isPlaceholder?void 0:()=>i(e),children:[Y.jsxs("div",{className:"relative h-56 w-full overflow-hidden",children:[e.isPlaceholder?Y.jsx("div",{className:"w-full h-full bg-gray-700"}):Y.jsx("img",{src:e.backdrop||e.poster_path,alt:(e.title||e.name||"Content")+" backdrop",className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110",loading:2>t?"eager":"lazy",fetchpriority:2>t?"high":"auto",decoding:"async"}),Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/60 via-black/30 to-transparent"}),Y.jsx("div",{className:"absolute inset-0 bg-radial-gradient from-transparent via-transparent to-black/20"}),Y.jsx("div",{className:"absolute top-4 left-4",children:Y.jsx("div",{className:"px-2.5 py-1.5 rounded-full text-xs font-medium transition-all duration-300 "+("tv"===e.type?"bg-purple-500/20 text-purple-200 border border-purple-400/20":"bg-blue-500/20 text-blue-200 border border-blue-400/20"),children:"tv"===e.type?"TV Series":"Movie"})}),Y.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-1.5 px-2.5 py-1.5 bg-black/30 backdrop-blur-md rounded-full border border-white/10",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 text-yellow-400",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),Y.jsx("span",{className:"text-xs text-white font-medium",children:"number"==typeof e.rating?e.rating.toFixed(1):"string"==typeof e.rating?parseFloat(e.rating).toFixed(1):"N/A"})]})]}),Y.jsxs("div",{className:"p-5 flex flex-col flex-1 pb-6",children:[Y.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Y.jsx("div",{className:"flex-1 pr-4",children:e.isPlaceholder?Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:"h-6 bg-gray-700 rounded mb-3"}),Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("div",{className:"h-4 bg-gray-700 rounded w-12"}),Y.jsx("div",{className:"h-4 bg-gray-700 rounded w-2"}),Y.jsx("div",{className:"h-4 bg-gray-700 rounded w-16"})]})]}):Y.jsxs(Y.Fragment,{children:[Y.jsx("h2",{className:"text-xl font-medium text-white/90 mb-3 overflow-hidden leading-tight",style:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:e.title||e.name}),Y.jsxs("div",{className:"flex items-center gap-3 text-white/60 text-sm",children:[Y.jsx("span",{children:a}),Y.jsx("span",{className:"text-white/40",children:"•"}),Y.jsx("span",{children:l})]})]})}),Y.jsx("div",{className:"flex flex-row gap-2 flex-shrink-0",children:e.isPlaceholder?Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-full"}),Y.jsx("div",{className:"w-12 h-12 bg-gray-700 rounded-full"})]}):Y.jsxs(Y.Fragment,{children:[Y.jsx("button",{onClick:t=>{t.stopPropagation(),i(e)},className:"w-12 h-12 bg-white/90 backdrop-blur-sm text-black rounded-full hover:bg-white transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-110 active:scale-95",title:r?"Resume":"Watch Now",children:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("polygon",{points:"8,5 20,12 8,19"})})}),Y.jsx("button",{onClick:t=>{t.stopPropagation(),T(t,e)},className:"w-12 h-12 rounded-full transition-all duration-300 flex items-center justify-center shadow-lg hover:shadow-xl transform hover:scale-110 active:scale-95 backdrop-blur-sm "+(s?"bg-white/20 text-white border border-white/20 hover:bg-white/30":"bg-white/10 text-white/95 border border-white/10 hover:bg-white/20"),title:s?"Remove from List":"Add to List",children:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:s?Y.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}):Y.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})]})})]}),e.isPlaceholder?Y.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Y.jsx("div",{className:"h-4 bg-gray-700 rounded w-16"}),Y.jsx("div",{className:"h-4 bg-gray-700 rounded w-2"}),Y.jsx("div",{className:"h-4 bg-gray-700 rounded w-20"})]}):e.genres&&e.genres.length>0&&Y.jsx("div",{className:"flex items-center gap-2 mb-3 flex-wrap",children:e.genres.slice(0,2).map(((t,s)=>{let r="";try{r="object"==typeof t?t.name:t+""}catch(i){r="object"==typeof t&&t.name||"Unknown"}const a="object"==typeof t?t:{name:r};return Y.jsxs(K.Fragment,{children:[Y.jsx("span",{className:"text-white/70 text-xs cursor-pointer hover:text-white transition-colors duration-200",onClick:e=>{e.stopPropagation(),n&&n(a)},children:r}),s<e.genres.slice(0,2).length-1&&Y.jsx("span",{className:"text-white/40 text-xs",children:"•"})]},r)}))}),e.isPlaceholder?Y.jsxs("div",{className:"space-y-2",children:[Y.jsx("div",{className:"h-4 bg-gray-700 rounded w-full"}),Y.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4"})]}):Y.jsx("p",{className:"text-white/70 text-sm leading-relaxed mb-0 overflow-hidden",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:e.overview})]})]},`${e.id}-${t}`)}))}),Y.jsx("div",{className:"flex justify-center mt-4",children:Y.jsx("div",{className:"flex items-center gap-2",children:y.map(((e,t)=>Y.jsx("button",{onClick:()=>S(t),className:"w-2 h-2 rounded-full transition-all duration-200 cursor-pointer "+(t===m?"bg-white":"bg-white/20 hover:bg-white/40"),"aria-label":"Go to card "+(t+1)},t)))})}),Y.jsx("div",{className:"flex justify-center mt-3",children:Y.jsxs("div",{className:"flex items-center gap-2 text-white/60 text-xs mb-3",children:[Y.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Y.jsx("path",{d:"M7 17L17 7M17 7H7M17 7V17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Y.jsx("span",{children:"Swipe to see more"})]})})]})]}):Y.jsxs("div",{className:"px-4 py-6 sm:hidden pb-0",children:[Y.jsx("div",{className:"flex items-center gap-2 mb-4 ml-2 md:ml-0",children:Y.jsxs("div",{className:"relative",children:[Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/20 to-primary/10 blur-md rounded-full"}),Y.jsxs("div",{className:"relative flex items-center gap-2 px-3 py-1.5 bg-black/40 backdrop-blur-sm rounded-full border border-white/10",children:[Y.jsx("div",{className:"w-3.5 h-3.5 bg-gray-800 rounded-full"}),Y.jsx("div",{className:"w-20 h-4 bg-gray-800 rounded"})]})]})}),Y.jsx("div",{className:"flex gap-6 overflow-x-auto pb-4",children:[...[,,,]].map(((e,t)=>Y.jsxs("div",{className:"flex-shrink-0 w-[calc(100vw-2rem)] max-w-md bg-black rounded-3xl overflow-hidden",children:[Y.jsx("div",{className:"h-56 bg-gray-900"}),Y.jsxs("div",{className:"p-5 space-y-3",children:[Y.jsx("div",{className:"h-6 bg-gray-800 rounded w-3/4"}),Y.jsx("div",{className:"h-4 bg-gray-800 rounded w-1/2"}),Y.jsx("div",{className:"h-4 bg-gray-800 rounded w-2/3"}),Y.jsx("div",{className:"h-4 bg-gray-800 rounded w-1/3"})]})]},t)))})]})})),ts=[{id:"all",label:"All",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:Y.jsx("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Browse all available content",color:"from-blue-500 to-indigo-600",gradient:"bg-gradient-to-r from-blue-500/20 to-indigo-600/20"},{id:"trending",label:"Trending",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Discover what's trending right now",color:"from-orange-500 to-red-600",gradient:"bg-gradient-to-r from-orange-500/20 to-red-600/20"},{id:"popular",label:"Popular",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Most loved and watched content",color:"from-pink-500 to-rose-600",gradient:"bg-gradient-to-r from-pink-500/20 to-rose-600/20"},{id:"topRated",label:"Top Rated",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Highest rated and critically acclaimed",color:"from-yellow-500 to-amber-600",gradient:"bg-gradient-to-r from-yellow-500/20 to-amber-600/20"},{id:"upcoming",label:"Coming Soon",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"New releases and upcoming premieres",color:"from-blue-500 to-indigo-600",gradient:"bg-gradient-to-r from-blue-500/20 to-indigo-600/20"},{id:"action",label:"Action",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M13 4v2.67l-1 1-1-1V4h2m7 7v2h-2.67l-1-1 1-1H20M6.67 11l1 1-1 1H4v-2h2.67M12 16.33l1 1V20h-2v-2.67l1-1M15 2H9v5.5l3 3 3-3V2zm7 7h-5.5l-3 3 3 3H22V9zM7.5 9H2v6h5.5l3-3-3-3zm4.5 4.5l-3 3V22h6v-5.5l-3-3z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"High-octane thrillers and explosive adventures",color:"from-red-500 to-orange-600",gradient:"bg-gradient-to-r from-red-500/20 to-orange-600/20"},{id:"comedy",label:"Comedy",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Laugh-out-loud humor and witty entertainment",color:"from-yellow-400 to-orange-500",gradient:"bg-gradient-to-r from-yellow-400/20 to-orange-500/20"},{id:"drama",label:"Drama",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15h2v2h-2zm0-8h2v6h-2z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Emotional storytelling and character-driven narratives",color:"from-purple-500 to-indigo-600",gradient:"bg-gradient-to-r from-purple-500/20 to-indigo-600/20"},{id:"horror",label:"Horror",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm2-4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm-2-4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm2-4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Spine-chilling thrills and supernatural suspense",color:"from-gray-700 to-black",gradient:"bg-gradient-to-r from-gray-700/20 to-black/20"},{id:"sciFi",label:"Sci-Fi",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Futuristic technology and space exploration",color:"from-blue-500 to-cyan-600",gradient:"bg-gradient-to-r from-blue-500/20 to-cyan-600/20"},{id:"documentary",label:"Documentary",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11zM7 10h5v5H7z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Real-world stories and educational content",color:"from-green-500 to-emerald-600",gradient:"bg-gradient-to-r from-green-500/20 to-emerald-600/20"},{id:"family",label:"Family",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm0 6v6h2v-6H8zm8-6c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm0 6v6h2v-6h-2z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Wholesome entertainment for all ages",color:"from-purple-500 to-pink-600",gradient:"bg-gradient-to-r from-purple-500/20 to-pink-600/20"},{id:"animation",label:"Animation",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Animated films and series",color:"from-yellow-500 to-orange-600",gradient:"bg-gradient-to-r from-yellow-500/20 to-orange-600/20"},{id:"awardWinning",label:"Award Winning",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Critically acclaimed and award-winning content",color:"from-amber-500 to-yellow-600",gradient:"bg-gradient-to-r from-amber-500/20 to-yellow-600/20"},{id:"latest",label:"Latest",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Fresh releases and newest additions",color:"from-green-500 to-emerald-600",gradient:"bg-gradient-to-r from-green-500/20 to-emerald-600/20"},{id:"popularTV",label:"Popular TV",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5l-1 3v1h8v-1l-1-3h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H3V5h18v10z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Most popular TV shows and series",color:"from-purple-500 to-pink-600",gradient:"bg-gradient-to-r from-purple-500/20 to-pink-600/20"},{id:"topRatedTV",label:"Top Rated TV",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h5l-1 3v1h8v-1l-1-3h5c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H3V5h18v10zM12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Highest rated TV shows and series",color:"from-amber-500 to-orange-600",gradient:"bg-gradient-to-r from-amber-500/20 to-orange-600/20"},{id:"airingToday",label:"Airing Today",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"TV shows airing today",color:"from-blue-500 to-cyan-600",gradient:"bg-gradient-to-r from-blue-500/20 to-cyan-600/20"},{id:"nowPlaying",label:"Now Playing",icon:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 transition-transform duration-200 hover:scale-110",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",role:"img",children:Y.jsx("path",{d:"M8 5v14l11-7z",stroke:"currentColor",strokeWidth:"0.5",fillRule:"evenodd",clipRule:"evenodd"})}),description:"Movies currently in theaters",color:"from-red-500 to-pink-600",gradient:"bg-gradient-to-r from-red-500/20 to-pink-600/20"}];U.memo(Qt);const ss=U.memo(Xt),rs=U.memo(es);U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.a7))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)));const as=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{(()=>{const[e,t]=U.useState({firstContentfulPaint:0,largestContentfulPaint:0,firstInputDelay:0,cumulativeLayoutShift:0,timeToInteractive:0,memoryUsage:0,memoryLimit:0,cacheHitRate:0}),s=U.useRef([]),r=U.useRef(!0),a=U.useRef(null);U.useEffect((()=>{if("PerformanceObserver"in window){const e=new PerformanceObserver((e=>{if(!r.current)return;const s=e.getEntries(),a=s[s.length-1];a&&"number"==typeof a.startTime&&t((e=>({...e,firstContentfulPaint:a.startTime})))}));try{e.observe({entryTypes:["paint"]}),s.current.push(e)}catch(he){}const a=new PerformanceObserver((e=>{if(!r.current)return;const s=e.getEntries(),a=s[s.length-1];a&&"number"==typeof a.startTime&&t((e=>({...e,largestContentfulPaint:a.startTime})))}));try{a.observe({entryTypes:["largest-contentful-paint"]}),s.current.push(a)}catch(he){}const i=new PerformanceObserver((e=>{if(!r.current)return;const s=e.getEntries(),a=s[s.length-1];a&&"number"==typeof a.processingStart&&"number"==typeof a.startTime&&t((e=>({...e,firstInputDelay:a.processingStart-a.startTime})))}));try{i.observe({entryTypes:["first-input"]}),s.current.push(i)}catch(he){}const n=new PerformanceObserver((e=>{if(!r.current)return;let s=0;for(const t of e.getEntries())t&&"number"==typeof t.value&&(s+=t.value);t((e=>({...e,cumulativeLayoutShift:s})))}));try{n.observe({entryTypes:["layout-shift"]}),s.current.push(n)}catch(he){}}if(performance.memory){const e=()=>{if(r.current)try{const e=performance.memory.usedJSHeapSize/1024/1024,s=performance.memory.jsHeapSizeLimit/1024/1024;"number"==typeof e&&"number"==typeof s&&isFinite(e)&&isFinite(s)&&t((t=>({...t,memoryUsage:e,memoryLimit:s})))}catch(he){}},s=6e4;a.current=setInterval((()=>{"visible"===document.visibilityState&&r.current&&e()}),s),e()}const e=()=>{if(r.current)try{const e=(Object.keys(localStorage).filter((e=>e.startsWith("movieCache_"))).length,JSON.parse(localStorage.getItem("cacheStats")||'{"hits": 0, "misses": 0}')),s=e.hits+e.misses>0?e.hits/(e.hits+e.misses)*100:0;"number"==typeof s&&isFinite(s)&&t((e=>({...e,cacheHitRate:s})))}catch(he){}},i=setInterval((()=>{"visible"===document.visibilityState&&r.current&&e()}),18e4);return e(),()=>{r.current=!1,s.current.forEach((e=>{if(e&&"function"==typeof e.disconnect)try{e.disconnect()}catch(he){}})),s.current=[],a.current&&(clearInterval(a.current),a.current=null),clearInterval(i)}}),[])})();const{isPointerFine:p,isLowEndDevice:g}=(()=>{const[e,t]=U.useState({reducedMotion:!1,isPointerFine:!0,isLowEndDevice:!1});return U.useEffect((()=>{let e,s=!1,r=!0,a=!1;try{s="undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch(i){s=!1}try{r="undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(pointer: fine)").matches}catch(i){r=!0}try{const e="undefined"!=typeof navigator?navigator:{},t=e.connection||e.mozConnection||e.webkitConnection||{},s="undefined"!=typeof navigator&&navigator.deviceMemory?navigator.deviceMemory:void 0,r="undefined"!=typeof navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:void 0,i=t.effectiveType||"",n=t.saveData||!1;("number"==typeof s&&2>=s||"number"==typeof r&&2>=r||/(^2g$|^slow-2g$|^3g$)/i.test(i)||n)&&(a=!0)}catch(i){}t({reducedMotion:s,isPointerFine:r,isLowEndDevice:a});try{if("undefined"!=typeof window&&window.matchMedia){e=window.matchMedia("(prefers-reduced-motion: reduce)");const s=e=>{try{t((t=>({...t,reducedMotion:!(!e||!e.matches)})))}catch(i){}};return e.addEventListener?e.addEventListener("change",s):e.addListener&&e.addListener(s),()=>{try{e&&(e.removeEventListener?e.removeEventListener("change",s):e.removeListener&&e.removeListener(s))}catch(i){}}}}catch(i){}}),[]),e})(),f=Ot();U.useEffect((()=>{try{(()=>{if("undefined"!=typeof document)try{if(!document.getElementById("homepage-swiper-styles")){const e=document.createElement("style");e.id="homepage-swiper-styles",e.textContent="\n  /* 🚀 OPTIMIZED: Minimal GPU usage - removed unnecessary transforms */\n  .swiper,\n  .swiper-wrapper {\n    overflow: visible;\n  }\n\n  .swiper-container {\n    overflow: hidden;\n    position: relative;\n  }\n\n  .swiper-wrapper {\n    align-items: flex-start;\n    justify-content: flex-start;\n  }\n  \n  .swiper-slide {\n    backface-visibility: hidden;\n    width: auto !important;\n  }\n\n  /* 🚀 OPTIMIZED: Reduced transition effects for better performance */\n  .swiper-button-prev,\n  .swiper-button-next {\n    transition: background 0.2s ease, opacity 0.2s ease;\n    background: rgba(255,255,255,0.06);\n  }\n\n  .swiper-button-prev:hover,\n  .swiper-button-next:hover {\n    background: rgba(255, 255, 255, 0.12);\n  }\n\n  .swiper-button-prev:active,\n  .swiper-button-next:active {\n    opacity: 0.8;\n  }\n\n  /* 🚀 OPTIMIZED: Removed scale transforms to reduce GPU load */\n  .swiper-slide-active {\n    /* Removed transform scale for performance */\n  }\n\n  .swiper-slide-prev,\n  .swiper-slide-next {\n    opacity: 0.95;\n    transition: opacity 0.2s ease;\n  }\n\n  /* Smooth momentum scrolling */\n  .swiper-wrapper {\n    transition-timing-function: cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  }\n\n  /* Enhanced touch feedback */\n  .swiper-slide {\n    touch-action: pan-y pinch-zoom;\n  }\n\n  /* Improved focus states for accessibility */\n  .swiper-button-prev:focus,\n  .swiper-button-next:focus {\n    outline: 2px solid rgba(255, 255, 255, 0.5);\n    outline-offset: 2px;\n  }\n    flex-shrink: 0;\n  }\n\n  /* Enhanced movie card overlay styling - FIXED positioning */\n  .movie-card-container .absolute.inset-0 {\n    border-radius: 0.5rem;\n    overflow: hidden;\n    /* Ensure overlay stays within card boundaries */\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    /* Prevent overlay from extending beyond card */\n    clip-path: inset(0 0 0 0);\n  }\n\n  .movie-card-container .bg-gradient-to-t {\n    background: linear-gradient(to top, \n      rgba(0, 0, 0, 0.95) 0%, \n      rgba(0, 0, 0, 0.7) 30%, \n      rgba(0, 0, 0, 0.4) 60%, \n      transparent 100%);\n    /* Ensure gradient respects card boundaries */\n    border-radius: inherit;\n  }\n\n  /* Fix overlay positioning for movie cards */\n  .movie-card-container .relative.group {\n    overflow: hidden;\n    border-radius: 0.5rem;\n  }\n\n  /* Ensure overlay content stays within bounds */\n  .movie-card-container .absolute.bottom-0 {\n    border-radius: 0 0 0.5rem 0.5rem;\n    overflow: hidden;\n  }\n\n  /* Additional fixes for movie card positioning */\n  .movie-card-container {\n    position: relative;\n    overflow: hidden;\n    border-radius: 0.5rem;\n  }\n\n  /* Ensure all absolute positioned elements within cards are contained */\n  .movie-card-container .absolute {\n    position: absolute;\n    overflow: hidden;\n  }\n\n  /* Fix for gradient overlay extending beyond boundaries */\n  .movie-card-container .bg-gradient-to-t {\n    mask-image: radial-gradient(circle at center, black 100%, transparent 100%);\n    -webkit-mask-image: radial-gradient(circle at center, black 100%, transparent 100%);\n    /* Additional containment */\n    contain: layout style paint;\n  }\n\n  /* Ensure proper z-index stacking for overlays */\n  .movie-card-container .absolute.inset-0 {\n    z-index: 1;\n  }\n\n  /* Fix for any remaining overflow issues */\n  .movie-card-container * {\n    box-sizing: border-box;\n  }\n\n  /* Swiper container spacing */\n  .swiper {\n    padding-left: 1.5rem;\n    padding-right: 1.5rem;\n    overflow: visible;\n  }\n\n  /* Ensure first and last slides have proper spacing */\n  .swiper-wrapper {\n    padding-left: 0;\n    padding-right: 0;\n    overflow: visible;\n  }\n\n  /* Fix swiper slide overflow issues */\n  .swiper-slide {\n    overflow: hidden;\n    border-radius: 0.5rem;\n  }\n\n  /* Enhanced gradient overlay positioning */\n  .relative.group .absolute.inset-y-0 {\n    width: 7rem; /* w-28 */\n  }\n\n  /* Ensure proper spacing for first and last cards */\n  .swiper-slide:first-child {\n    margin-left: 0;\n  }\n\n  .swiper-slide:last-child {\n    margin-right: 0;\n  }\n  \n\n  \n  /* Navigation buttons - consolidated styles */\n  .swiper-button-next,\n  .swiper-button-prev,\n  .category-swiper-next,\n  .category-swiper-prev {\n    width: 40px !important;\n    height: 40px !important;\n    background: rgba(255, 255, 255, 0.06) !important;\n    border: 1px solid rgba(255, 255, 255, 0.2) !important;\n    border-radius: 50% !important;\n    /* 🚀 OPTIMIZED: Reduced transition complexity */\n    transition: background 0.2s ease, opacity 0.2s ease !important;\n    position: absolute !important;\n    top: 50% !important;\n    transform: translateY(-50%) !important;\n    z-index: 20 !important;\n  }\n  \n  .swiper-button-next,\n  .category-swiper-next {\n    right: 0 !important;\n  }\n  \n  .swiper-button-prev,\n  .category-swiper-prev {\n    left: 0 !important;\n  }\n  \n  .swiper-button-next::after,\n  .swiper-button-prev::after {\n    font-size: 14px !important;\n    font-weight: bold !important;\n    color: white !important;\n  }\n  \n  /* 🚀 OPTIMIZED: Simplified hover effects */\n  .swiper-button-next:hover,\n  .swiper-button-prev:hover,\n  .category-swiper-next:hover,\n  .category-swiper-prev:hover {\n    background: rgba(255, 255, 255, 0.15) !important;\n  }\n  \n  /* Visibility control for custom navigation */\n  .category-swiper-next,\n  .category-swiper-prev {\n    opacity: 0 !important;\n  }\n  \n  .group:hover .category-swiper-next,\n  .group:hover .category-swiper-prev {\n    opacity: 1 !important;\n  }\n\n  /* Category button active state - use CSS transitions instead of direct DOM mutation */\n  .swiper-slide-active button {\n    transform: scale(1.05);\n    transition: transform 0.18s ease-out;\n  }\n\n  .swiper-slide:not(.swiper-slide-active) button {\n    transform: scale(1);\n    transition: transform 0.18s ease-out;\n  }\n",document.head.appendChild(e)}if(!document.getElementById("ultra-smooth-scroll-styles")){const e=document.createElement("style");e.id="ultra-smooth-scroll-styles",e.textContent="\n      /* Base scroll styles */\n      .ultra-smooth-scroll,\n      .scroll-container-fix {\n        scroll-behavior: smooth;\n        -webkit-overflow-scrolling: touch;\n        overscroll-behavior: auto;\n        scroll-padding: 1rem;\n      }\n      \n      /* Horizontal scrolling */\n      .ultra-smooth-scroll {\n        scroll-snap-type: x proximity;\n      }\n      \n      /* Vertical scrolling */\n      .scroll-container-fix {\n        scroll-snap-type: y proximity;\n      }\n      \n      /* Webkit scrollbar styles */\n      .ultra-smooth-scroll::-webkit-scrollbar {\n        height: 4px;\n        width: 4px;\n      }\n      \n      .scroll-container-fix::-webkit-scrollbar {\n        width: 6px;\n      }\n      \n      .ultra-smooth-scroll::-webkit-scrollbar-track,\n      .scroll-container-fix::-webkit-scrollbar-track {\n        background: transparent;\n      }\n      \n      .ultra-smooth-scroll::-webkit-scrollbar-thumb {\n        background: rgba(255, 255, 255, 0.2);\n        border-radius: 2px;\n        transition: background 0.2s ease;\n      }\n      \n      .scroll-container-fix::-webkit-scrollbar-thumb {\n        background: rgba(255, 255, 255, 0.1);\n        border-radius: 3px;\n        transition: background 0.2s ease;\n      }\n      \n      .ultra-smooth-scroll::-webkit-scrollbar-thumb:hover {\n        background: rgba(255, 255, 255, 0.4);\n      }\n      \n      .scroll-container-fix::-webkit-scrollbar-thumb:hover {\n        background: rgba(255, 255, 255, 0.2);\n      }\n      \n      /* Touch device optimization */\n      @media (hover: none) and (pointer: coarse) {\n        .ultra-smooth-scroll,\n        .scroll-container-fix {\n          scroll-behavior: auto;\n          -webkit-overflow-scrolling: touch;\n          overscroll-behavior: contain;\n        }\n      }\n\n      /* Utility to hide scrollbars while preserving touch/trackpad scrolling\n         Applied to a wrapper (e.g. .hide-scrollbar) so child scrollable elements\n         keep momentum scrolling but visual scrollbars are hidden. */\n      .hide-scrollbar,\n      .hide-scrollbar * {\n        -ms-overflow-style: none; /* IE and Edge */\n        scrollbar-width: none; /* Firefox */\n      }\n\n      /* Webkit-based browsers */\n      .hide-scrollbar *::-webkit-scrollbar {\n        display: none;\n        height: 0;\n        width: 0;\n      }\n    ",document.head.appendChild(e)}}catch(e){}})()}catch(e){}}),[]),Bt((e=>e.setSectionMovies)),Bt((e=>e.setSectionLoading)),Bt((e=>e.setSectionError)),Bt((e=>e.appendSectionMovies)),Bt((e=>e.incrementSectionPage)),Bt((e=>e.resetSection)),Bt((e=>e.updateUI)),Bt((e=>e.setSelectedMovie)),Bt((e=>e.setFeaturedContent));const{isSectionCached:w,getCachedSection:v,shouldSkipInitialLoading:b}=_e();Me({throttle:16,enableMomentum:!0,enableIntersectionObserver:!0,scrollOffset:80}),Le({threshold:.1,triggerOnce:!1}),Le({threshold:.2,triggerOnce:!0});const{get:y,set:j,clear:N}=Pe({ttl:36e5,maxSize:100,maxMemoryMB:10}),{optimizedFetch:k,clearPending:C}=Ee({retryAttempts:3,retryDelay:1e3,timeout:1e4,rateLimit:10});ze({batchDelay:50});const[S,T]=U.useState([]),[_,M]=U.useState([]),[L,P]=U.useState([]),[E,z]=U.useState([]),[R,I]=U.useState([]),[A,F]=U.useState([]),[V,B]=U.useState([]),[D,H]=U.useState([]),[W,O]=U.useState([]),[$,Z]=U.useState([]),[G,J]=U.useState([]),[K,Q]=U.useState([]),[X,ee]=U.useState([]),[te,se]=U.useState([]),[re,ae]=U.useState([]),[ie,ne]=U.useState([]),[le,oe]=U.useState([]),[ce,de]=U.useState([]),[ue,me]=U.useState(null),[he,xe]=U.useState(null);U.useState(!1);const[pe,ge]=U.useState(0),[fe,we]=U.useState("all"),[ve,be]=U.useState(!1),{isMobile:ye}=$t(),[je,Ne]=U.useState(!1),[ke,Ce]=U.useState(!1);U.useEffect((()=>{const e=("undefined"!=typeof window&&(window.requestIdleCallback||(e=>setTimeout(e,1500))))((()=>{try{if("undefined"==typeof window||768>window.innerWidth)return;const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,t=e&&(e.saveData||!1),s=e&&e.effectiveType;if(t||s&&/(^2g$|^slow-2g$|^3g$)/i.test(s))return}catch(e){}Ce(!0)}));return()=>{try{"undefined"!=typeof window&&window.cancelIdleCallback&&"number"==typeof e&&window.cancelIdleCallback(e)}catch(t){}}}),[]),U.useEffect((()=>{if(je)try{localStorage.setItem("adBlockerToastShown","true")}catch(e){}}),[je]);const[Se,Te]=U.useState(null),[Re,Ie]=U.useState(!1),[rt,at]=U.useState({}),{loadingStates:it,setLoadingState:nt}=e(),{isInWatchlist:lt}=t(),{refreshFromStorage:ot,viewingProgress:ct,hasContinueWatching:dt}=s(),[ut,mt]=U.useState({trending:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},popular:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},topRated:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},upcoming:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},action:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},comedy:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},drama:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},horror:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},sciFi:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},documentary:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},family:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},animation:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},awardWinning:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},latest:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},popularTV:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},topRatedTV:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},airingToday:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null},nowPlaying:{current:1,total:1,isLoading:!1,hasMore:!0,lastFetched:null}}),[ht]=U.useState((()=>({trending:new Set,popular:new Set,topRated:new Set,upcoming:new Set,action:new Set,comedy:new Set,drama:new Set,horror:new Set,sciFi:new Set,documentary:new Set,family:new Set,animation:new Set,awardWinning:new Set,latest:new Set,popularTV:new Set,topRatedTV:new Set,airingToday:new Set,nowPlaying:new Set}))),[xt,pt]=U.useState({}),[gt,ft]=U.useState(null),wt=36e5,vt="2.0",bt=432e5,yt=1048576,jt=U.useMemo((()=>({featured:9e5,trending:12e5,nowPlaying:18e5,popular:54e5,topRated:54e5,upcoming:72e5,popularTV:54e5,topRatedTV:54e5,airingToday:18e5})),[]),Nt=()=>{const e=Date.now();Object.keys(js.current).forEach((t=>{e-js.current[t].timestamp>Ns&&delete js.current[t]}))},kt=U.useCallback((e=>{if(!e||"string"!=typeof e)return e;const t=e.indexOf("_page_");return t>-1?e.slice(0,t):e}),[]),Ct=U.useCallback((e=>{const t=kt(e);return jt[t]||wt}),[jt,wt,kt]),St=U.useRef(new Map),Tt=U.useRef([]),_t=U.useRef(0),[Mt,Lt]=U.useState(!1),[Pt,Et]=U.useState(new Set),[zt,Rt]=U.useState(new Set),[It,Vt]=U.useState(!1),[qt,Jt]=U.useState({lastCleanup:Date.now(),itemsInMemory:0,maxItemsAllowed:500}),[Kt,Qt]=U.useState(!1),[Xt,es]=U.useState(null),[as,is]=U.useState(0),[ns,ls]=U.useState(!1),os=U.useCallback((e=>{try{if(!e||zt.has(e))return;Rt((t=>new Set([...t,e]))),It||(Vt(!0),setTimeout((()=>{try{Rt(new Set),Vt(!1)}catch(e){Vt(!1)}}),100))}catch(t){Vt(!1)}}),[zt,It]),cs=U.useCallback((e=>{ks.current&&(ks.current.prefetched[e]=Date.now(),ks.current.totalPrefetched++)}),[]),ds=U.useCallback((e=>{if(ks.current&&ks.current.prefetched[e]){const t=ks.current.prefetched[e],s=Date.now()-t;ks.current.usageTimes||(ks.current.usageTimes=[]),ks.current.usageTimes.push(s),ks.current.usageTimes.length>100&&(ks.current.usageTimes=ks.current.usageTimes.slice(-100))}}),[]);U.useState({critical:["trending","popular"],high:["topRated","upcoming"],medium:["action","comedy","drama"],low:["horror","sciFi","documentary","family","animation","awardWinning","latest","popularTV","topRatedTV","airingToday","nowPlaying"]});const[us,ms]=U.useState(new Set(["all","trending","popular","topRated","upcoming","action","comedy","drama","horror","sciFi","documentary","family","animation","awardWinning","latest","popularTV","topRatedTV","airingToday","nowPlaying"]));U.useState({itemHeight:300,overscan:2,batchSize:10,throttleMs:16});const[hs,xs]=U.useState(new Set),ps=U.useMemo((()=>ts),[]);U.useMemo((()=>gt?{...gt,isInWatchlist:lt(gt.id),isResumeAvailable:!(!ct||!gt.id)&&(ct["movie_"+gt.id]||ct["tv_"+gt.id])?.progress>0}:null),[gt,lt,ct]);const gs=U.useRef(null),[fs,ws]=U.useState(new Set),vs=U.useCallback((e=>{Te(e),Ie(!0)}),[]),bs=U.useCallback((()=>{Ie(!1),Te(null)}),[]),ys=U.useCallback((async e=>{if(!e)return;const t=e.id;ds(t);const s=e.media_type||e.type||"movie",r=Cs(t);if(r)return me(r),Lt(!1),void Ae(t,s).then((e=>{JSON.stringify(e)!==JSON.stringify(r)&&(Ss(t,e),me(e))})).catch((()=>{}));Lt(!0);try{const e=await Ae(t,s);Ss(t,e),me(e)}catch(a){me({...e,error:"Failed to load details."})}finally{Lt(!1)}}),[]),js=U.useRef({}),Ns=3e5,ks=U.useRef({prefetched:{},used:{},totalPrefetched:0,totalUsed:0}),Cs=e=>{const t=js.current[e];return t&&Date.now()-t.timestamp<Ns?t.data:null},Ss=(e,t)=>{js.current[e]={data:t,timestamp:Date.now()};const s=Object.keys(js.current);if(s.length>50){s.sort(((e,t)=>js.current[e].timestamp-js.current[t].timestamp));for(let e=0;e<s.length-50;e++)delete js.current[s[e]]}};U.useEffect((()=>{if("IntersectionObserver"in window)return gs.current=new IntersectionObserver((e=>{const t=new Set,s=new Set;e.forEach((e=>{if(e.isIntersecting){const r=e.target.dataset.section;r&&(t.add(r),s.add(r))}})),t.size>0&&ms((e=>new Set([...e,...t]))),s.size>0&&ws((e=>new Set([...e,...s])))}),{rootMargin:"200px 0px",threshold:.05,passive:!0,trackVisibility:!1,delay:100}),()=>{gs.current&&(gs.current.disconnect(),gs.current=null),ms(new Set(["all","trending","popular","topRated","upcoming","action","comedy","drama","horror","sciFi","documentary","family","animation","awardWinning","latest","popularTV","topRatedTV","airingToday","nowPlaying"])),ws(new Set)}}),[]),U.useEffect((()=>{ot();const e=()=>{document.hidden||ot()};document.addEventListener("visibilitychange",e);const t=()=>{ot()};return window.addEventListener("focus",t),()=>{document.removeEventListener("visibilitychange",e),window.removeEventListener("focus",t)}}),[ot]),U.useEffect((()=>{try{const e="homepage-reduced-gpu-styles";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.textContent="\n          /* Reduced GPU mode: disable heavy visual effects */\n          .homepage-reduced-gpu * {\n            transition-duration: 0.12s !important;\n            transition-delay: 0s !important;\n            animation-duration: 0.001s !important;\n            animation-delay: 0s !important;\n            animation-iteration-count: 1 !important;\n            will-change: auto !important;\n            filter: none !important;\n            box-shadow: none !important;\n            backdrop-filter: none !important;\n            -webkit-backdrop-filter: none !important;\n          }\n          .homepage-reduced-gpu .swiper-slide, .homepage-reduced-gpu .movie-card-container {\n            transform: none !important;\n            scale: 1 !important;\n          }\n          .homepage-reduced-gpu .animate-hero-title,\n          .homepage-reduced-gpu .hero-logo,\n          .homepage-reduced-gpu .animate-shimmer,\n          .homepage-reduced-gpu .spinner::after,\n          .homepage-reduced-gpu .spinner::before {\n            animation: none !important;\n            opacity: 1 !important;\n          }\n          .homepage-reduced-gpu img { image-rendering: auto !important; }\n        ",document.head.appendChild(t)}document.documentElement;const t=".performance-scroll",s=document.querySelector(t)||document.body,r="homepage-reduced-gpu";return g?s.classList.add(r):s.classList.remove(r),()=>{}}catch(e){}}),[g]),U.useEffect((()=>{let e=!0;r.registerComponent("HomePage");const t=r.registerCleanupCallback((()=>{e&&(St.current&&St.current.clear(),Tt.current&&(Tt.current.length=0),_s.current&&_s.current.clear(),Ps.current&&(Ps.current.forEach((e=>{try{clearTimeout(e)}catch(t){}})),Ps.current.clear()),Es.current&&(Es.current.forEach((e=>{try{clearInterval(e)}catch(t){}})),Es.current.clear()),Nt(),gs.current&&(gs.current.disconnect(),gs.current=null),ws(new Set),ms(new Set(["all","trending","popular","topRated","upcoming","action","comedy","drama","horror","sciFi","documentary","family","animation","awardWinning","latest","popularTV","topRatedTV","airingToday","nowPlaying"])))}),"HomePage");return()=>{if(e=!1,r.unregisterComponent("HomePage"),t(),gs.current){try{gs.current.disconnect()}catch(s){}gs.current=null}Ps.current&&(Ps.current.forEach((e=>{try{clearTimeout(e)}catch(s){}})),Ps.current.clear()),Es.current&&(Es.current.forEach((e=>{try{clearInterval(e)}catch(s){}})),Es.current.clear())}}),[]);const Ts=e=>({trending:Je,popular:Ge,topRated:st,upcoming:Ze,action:qe,comedy:Ye,drama:tt,horror:et,sciFi:Xe,documentary:Qe,family:Ue,animation:$e,awardWinning:Oe,latest:We,popularTV:He,topRatedTV:De,airingToday:Be,nowPlaying:Ve}[e]),_s=U.useRef(new Map),Ms=U.useRef({isSlow:!1,lastCheck:Date.now(),averageResponseTime:0}),Ls=U.useRef(null),Ps=U.useRef(new Set),Es=U.useRef(new Set),zs=U.useRef(!0),Rs=U.useRef(null);U.useRef(null),U.useRef(!1);const Is=U.useCallback((()=>{if(zs.current){if(Ls.current){try{Ls.current.disconnect()}catch(e){}Ls.current=null}if(_s.current&&_s.current.clear(),St.current&&St.current.clear(),Tt.current&&(Tt.current.length=0),_t.current&&(_t.current=0),zs.current)try{Rt(new Set),Vt(!1),Et(new Set),ms(new Set(["all","trending","popular","topRated","upcoming","action","comedy","drama","horror","sciFi","documentary","family","animation","awardWinning","latest","popularTV","topRatedTV","airingToday","nowPlaying"])),Jt({lastCleanup:Date.now(),itemsInMemory:0,maxItemsAllowed:500})}catch(e){}Ms.current&&(Ms.current={isSlow:!1,lastCheck:Date.now(),averageResponseTime:0}),js.current&&(js.current={}),ks.current&&(ks.current={prefetched:{},used:{},totalPrefetched:0,totalUsed:0});try{Ds()}catch(e){}if(window.performanceObserver)try{window.performanceObserver.disconnect()}catch(e){}if(Rs.current){try{Rs.current.disconnect()}catch(e){}Rs.current=null}if(gs&&gs.current)try{gs.current.disconnect(),gs.current=null}catch(e){}zs.current=!1}}),[]);U.useCallback((()=>{}),[Is]);const As=U.useCallback(((e,t)=>{if(!zs.current)return null;const s=setTimeout((()=>{if(zs.current)try{e()}catch(t){}Ps.current&&Ps.current.delete(s)}),t);return Ps.current&&Ps.current.add(s),s}),[]),Fs=U.useCallback(((e,t)=>{if(!zs.current)return null;const s=setInterval((()=>{if(zs.current)try{e()}catch(t){}}),t);return Es.current&&Es.current.add(s),s}),[]),Vs=U.useCallback((e=>{if(e&&Ps.current)try{clearTimeout(e),Ps.current.delete(e)}catch(t){}}),[]),Bs=U.useCallback((e=>{if(e&&Es.current)try{clearInterval(e),Es.current.delete(e)}catch(t){}}),[]),Ds=U.useCallback((()=>{Ps.current&&(Ps.current.forEach((e=>{try{clearTimeout(e)}catch(t){}})),Ps.current.clear()),Es.current&&(Es.current.forEach((e=>{try{clearInterval(e)}catch(t){}})),Es.current.clear())}),[]),Hs=U.useCallback((async(e,t)=>{if(_s.current.has(e))return _s.current.get(e);const s=t();_s.current.set(e,s);try{const t=await s;return _s.current.delete(e),t}catch(r){throw _s.current.delete(e),r}}),[]),Ws=U.useCallback((e=>{const t=Date.now();t-Ms.current.lastCheck>5e3&&(Ms.current.averageResponseTime=(Ms.current.averageResponseTime+e)/2,Ms.current.isSlow=e>2e3,Ms.current.lastCheck=t)}),[]),Os=async()=>{const e=performance.now();try{nt("initial",!0),xe(null);const t={featured:nr,trending:()=>Js("trending"),popular:()=>Js("popular"),topRated:()=>Js("topRated"),upcoming:()=>Js("upcoming"),action:()=>Js("action"),comedy:()=>Js("comedy"),drama:()=>Js("drama"),horror:()=>Js("horror"),sciFi:()=>Js("sciFi"),documentary:()=>Js("documentary"),family:()=>Js("family"),animation:()=>Js("animation"),awardWinning:()=>Js("awardWinning"),latest:()=>Js("latest"),popularTV:()=>Js("popularTV"),topRatedTV:()=>Js("topRatedTV"),airingToday:()=>Js("airingToday"),nowPlaying:()=>Js("nowPlaying")},s={featured:ft,trending:T,popular:M,topRated:P,upcoming:z,action:I,comedy:F,drama:B,horror:H,sciFi:O,documentary:Z,family:J,animation:Q,awardWinning:ee,latest:se,popularTV:ae,topRatedTV:ne,airingToday:oe,nowPlaying:de},r=await Fe.executeInitialLoad(t,s,{throttleDelay:200,maxConcurrent:3}),a=performance.now()-e;if(r){nt("initial",!1),nt("trending",!1),nt("popular",!1),Fe.addObserver(((e,t)=>{})),Ke.recordHomepageMetric("initialLoadTime",a);const e=Fe.getPerformanceState();Ke.recordHomepageMetric("criticalContentLoad",e.performanceMetrics.criticalLoadTime),Ke.recordHomepageMetric("highPriorityContentLoad",e.performanceMetrics.highPriorityLoadTime)}Dt.trackPageLoad("HomePage")}catch(t){t.message.includes("Network connection failed")||t.message.includes("Request timeout")||t.message.includes("ERR_CONNECTION_RESET")||t.message.includes("Failed to fetch")||xe("Failed to load initial content. Please refresh the page."),nt("initial",!1),Ht("fetchInitialMovies",0,!1)}},$s=U.useMemo((()=>({trending:{movies:S},popular:{movies:_},topRated:{movies:L},upcoming:{movies:E},action:{movies:R},comedy:{movies:A},drama:{movies:V},horror:{movies:D},sciFi:{movies:W},documentary:{movies:$},family:{movies:G},animation:{movies:K},awardWinning:{movies:X},latest:{movies:te},popularTV:{movies:re},topRatedTV:{movies:ie},airingToday:{movies:le},nowPlaying:{movies:ce}})),[S,_,L,E,R,A,V,D,W,$,G,K,X,te,re,ie,le,ce]),Us=U.useCallback((()=>{const e=[];if(gt&&gt.backdrop_path){const t=a(gt,"w1280").src;t&&t.includes("image.tmdb.org")&&e.push(t)}if($s&&$s.trending&&$s.trending.movies&&$s.trending.movies.length>0&&$s.trending.movies.slice(0,3).forEach((t=>{if(t.poster_path){const s=i(t,"w500").src;s&&s.includes("image.tmdb.org")&&e.push(s)}})),e.length>0){const t=[];performance.now(),e.forEach(((e,s)=>{try{if(!e||!e.startsWith("https://image.tmdb.org/"))return;const r=document.createElement("link");r.rel="preload",r.as="image",r.href=e,r.fetchPriority=0===s?"high":"auto",r.onerror=()=>{try{r.parentNode&&document.head.contains(r)&&r.parentNode.removeChild(r)}catch(e){}},r.onload=()=>{performance.now()},document.head.appendChild(r),t.push(r)}catch(r){}}));const s=As((()=>{t.forEach((e=>{try{e&&e.parentNode&&document.head.contains(e)&&e.parentNode.removeChild(e)}catch(t){}}))}),15e3);s&&Ps.current&&Ps.current.add(s)}}),[]);U.useEffect((()=>{let e;return e="undefined"!=typeof window&&window.requestIdleCallback?requestIdleCallback(Us,{timeout:1e3}):setTimeout(Us,200),()=>{if(e)try{"undefined"!=typeof window&&window.cancelIdleCallback?cancelIdleCallback(e):clearTimeout(e)}catch(t){}}}),[]),U.useEffect((()=>{if("PerformanceObserver"in window)try{Ls.current=new PerformanceObserver((e=>{try{e.getEntries().forEach((e=>{e.entryType}))}catch(t){}})),Ls.current.observe({entryTypes:["measure"]})}catch(e){}return()=>{if(Ls.current)try{Ls.current.disconnect()}catch(e){}finally{Ls.current=null}}}),[]);const Ys=U.useCallback((()=>{performance.now();let e=0;try{const r=Object.keys(localStorage).filter((e=>e.startsWith("movieCache_")));if(0===r.length)return;const a={};for(const s of r)try{const t=localStorage.getItem(s);if(!t)continue;const r=JSON.parse(t),i=t.length;if(!r||"number"!=typeof r.timestamp||!r.data){localStorage.removeItem(s);continue}if(null===r.data||void 0===r.data){localStorage.removeItem(s);continue}e+=i;const n=s.replace("movieCache_","").split("_"),l=n[0],o=n.includes("page"),c=o?parseInt(n[n.length-1]):0;a[l]||(a[l]={pages:[],other:[],totalSize:0,lastAccess:0}),o&&!isNaN(c)?a[l].pages.push({key:s,timestamp:r.timestamp,size:i,age:Date.now()-r.timestamp,pageNum:c,accessCount:r.accessCount||0}):a[l].other.push({key:s,timestamp:r.timestamp,size:i,age:Date.now()-r.timestamp,accessCount:r.accessCount||0}),a[l].totalSize+=i,a[l].lastAccess=Math.max(a[l].lastAccess,r.timestamp)}catch(t){localStorage.removeItem(s)}for(const[t,s]of Object.entries(a))if(s.pages.length>5){s.pages.sort(((e,t)=>t.pageNum-e.pageNum));const t=s.pages.slice(5);for(const s of t)localStorage.removeItem(s.key),e-=s.size}const i=36e5;for(const[t,s]of Object.entries(a)){const t=[...s.pages,...s.other].filter((e=>e.age>i));for(const s of t)localStorage.removeItem(s.key),e-=s.size}if(e>yt){const t=[];for(const[e,s]of Object.entries(a))t.push(...s.pages,...s.other);t.sort(((e,t)=>e.timestamp-t.timestamp));for(const s of t){if(838860.8>=e)break;localStorage.removeItem(s.key),e-=s.size}}const n=Object.keys(localStorage).filter((e=>e.startsWith("movieCache_")));if(n.length>25){const e=[];for(const r of n)try{const t=localStorage.getItem(r);if(t){const s=JSON.parse(t);e.push({key:r,timestamp:s.timestamp})}}catch(s){localStorage.removeItem(r)}e.sort(((e,t)=>e.timestamp-t.timestamp));const t=e.slice(0,n.length-25);for(const s of t)localStorage.removeItem(s.key)}performance.now()}catch(r){try{Object.keys(localStorage).filter((e=>e.startsWith("movieCache_"))).forEach((e=>{localStorage.removeItem(e)}))}catch(a){}}}),[]),qs=U.useCallback((()=>{const e=performance.now();try{if(!performance.memory)return;const s=performance.memory.usedJSHeapSize/1024/1024,r=(performance.memory.totalJSHeapSize,performance.memory.jsHeapSizeLimit/1024/1024);if(Ys(),s>.8*r&&(ws(new Set),ms(new Set(["all","trending","popular","topRated"]))),window.gc)try{window.gc()}catch(t){}s>.7*r&&window.performance&&window.performance.memory&&void 0!==window.performance.memory.usedJSHeapSize&&performance.memory.usedJSHeapSize;const a=performance.now()-e;Jt((e=>({...e,lastOptimization:Date.now(),optimizationDuration:a,itemsCleaned:0})))}catch(s){try{Ys()}catch(r){}}}),[Ys]);U.useCallback((e=>{try{const t=localStorage.getItem("movieCache_"+e);if(!t)return!1;const s=JSON.parse(t),{timestamp:r,data:a,version:i}=s||{};if(!r||void 0===a)return!1;if(i&&i!==vt)return!1;const n=Ct(e);return Date.now()-r<n}catch(t){return!1}}),[Ct,vt]);const Zs=U.useCallback((e=>{const t=performance.now(),s={validationTime:0,retrievalTime:0,parsingTime:0,totalTime:0};try{const i=performance.now();if(!e||"string"!=typeof e)return null;if(0===e.length||e.length>100)return null;if(e.includes("..")||e.includes("__proto__")||e.includes("constructor"))return null;s.validationTime=performance.now()-i;const n="movieCache_"+e,l=performance.now();let o;try{o=localStorage.getItem(n)}catch(r){return null}if(s.retrievalTime=performance.now()-l,!o)return null;const c=performance.now();if(o.length>10485760)return localStorage.removeItem(n),null;let d;try{d=JSON.parse(o)}catch(a){return localStorage.removeItem(n),null}if(s.parsingTime=performance.now()-c,!d||"object"!=typeof d)return localStorage.removeItem(n),null;if(!d.hasOwnProperty("data"))return localStorage.removeItem(n),null;if(d.timestamp){const t=Date.now()-d.timestamp;if(t>Ct(e)+3e5+bt)return localStorage.removeItem(n),null}return null===d.data||void 0===d.data?(localStorage.removeItem(n),null):(s.totalTime=performance.now()-t,d.data)}catch(i){try{const t="movieCache_"+e;localStorage.removeItem(t)}catch(n){try{Object.keys(localStorage).filter((e=>e.startsWith("movieCache_"))).forEach((e=>localStorage.removeItem(e)))}catch(l){}}return null}}),[Ct,wt,bt]),Gs=U.useCallback(((e,t)=>{const s=performance.now(),r={validationTime:0,cleanupTime:0,serializationTime:0,storageTime:0,totalTime:0};try{let l=function(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t|=0;return Math.abs(t).toString(16).slice(0,8)};const o=performance.now();if(!e||"string"!=typeof e)return!1;if(0===e.length||e.length>100)return!1;if(e.includes("..")||e.includes("__proto__")||e.includes("constructor"))return!1;if(null==t)return!1;r.validationTime=performance.now()-o;const c=performance.now();Ys(),r.cleanupTime=performance.now()-c;const d=performance.now(),u=JSON.stringify(t),m={data:t,timestamp:Date.now(),version:vt,checksum:l(u)},h=JSON.stringify(m);if(h.length>yt)return!1;r.serializationTime=performance.now()-d;const x=performance.now(),p="movieCache_"+e;try{localStorage.setItem(p,h);try{localStorage.setItem("movieCache_lastUpdate",JSON.stringify({key:e,ts:Date.now()}))}catch(a){}return r.storageTime=performance.now()-x,r.totalTime=performance.now()-s,!0}catch(i){if("QuotaExceededError"===i.name||i.message.includes("quota")){Ys();try{return localStorage.setItem(p,h),!0}catch(n){return!1}}return!1}}catch(l){return!1}return!1}),[Ys,vt,yt]);U.useEffect((()=>{let e,t=!0;const s=async()=>{if(t)try{if(b()){const s=["featured","trending"];for(const e of s){if(!t)break;if(w(e)){const t=v(e);if(t){const s=Ks(e);s&&s(t)}}}return nt("initial",!1),nt("trending",!1),nt("popular",!1),void(e=setTimeout((()=>{t&&Os()}),50))}await Os()}catch(s){t&&xe("Failed to initialize. Please refresh the page.")}};let r=!1;const a=setTimeout((()=>{if(t){try{Fe&&"function"==typeof Fe.performMemoryCleanup&&Fe.performMemoryCleanup()}catch(e){}try{portalManagerService&&"function"==typeof portalManagerService.cleanupInactivePortals&&portalManagerService.cleanupInactivePortals()}catch(e){}try{t&&xe&&xe("Initialization timed out. Retrying...")}catch(e){}r||(r=!0,setTimeout((()=>{if(t)try{s()}catch(e){}}),5e3))}}),3e4);s();const i=Fs(Ys,3e5);return()=>{t=!1,e&&clearTimeout(e),a&&clearTimeout(a),i&&Bs(i),Nt(),St.current&&St.current.clear(),Tt.current&&(Tt.current.length=0),_s.current&&_s.current.clear(),Rt(new Set),Vt(!1),Et(new Set),ms(new Set(["all","trending","popular","topRated","upcoming","action","comedy","drama","horror","sciFi","documentary","family","animation","awardWinning","latest","popularTV","topRatedTV","airingToday","nowPlaying"])),ws(new Set);try{N(),C()}catch(s){}}}),[]),U.useEffect((()=>{if(it.initial){const e=As((()=>{nt("initial",!1),xe("Loading took longer than expected. Some content may not be available.")}),3e4);return()=>{Vs(e)}}}),[it.initial,nt]),U.useEffect((()=>(he&&(he.includes("Network connection failed")||he.includes("Request timeout")||he.includes("ERR_CONNECTION_RESET")),()=>{xe(null)})),[he,xe]),U.useEffect((()=>()=>{gs&&gs.current&&(gs.current.disconnect(),gs.current=null),ws(new Set),ms(new Set(["all","trending","popular","topRated","upcoming","action","comedy","drama","horror","sciFi","documentary","family","animation","awardWinning","latest","popularTV","topRatedTV","airingToday","nowPlaying"]))}),[qs,Ys]),U.useEffect((()=>{}),[ye,S.length,_.length,L.length,E.length,fe]),U.useEffect((()=>{const e=()=>{if(!Ke.homepageMetrics.userInteractionTime){const e=performance.now();Ke.recordHomepageMetric("userInteraction",e)}},t=["click","scroll","keydown","touchstart","mousemove","wheel"],s=["scroll","wheel","touchstart","touchmove"];let r;t.forEach((t=>{const r=s.includes(t);document.addEventListener(t,e,{passive:r})}));const a=()=>{r&&clearTimeout(r),r=setTimeout((()=>{if(document.hidden)return;const e=document.documentElement.scrollHeight,t=window.innerHeight,s=Math.max(1,e-t),r=window.pageYOffset,a={scrollTop:r,scrollHeight:e,viewportHeight:t,scrollPercentage:r/s*100};Ke.recordHomepageMetric("scrollPerformance",a)}),250)};return document.addEventListener("scroll",a,{passive:!0}),()=>{t.forEach((t=>{document.removeEventListener(t,e)})),document.removeEventListener("scroll",a),r&&clearTimeout(r)}}),[]),U.useCallback((async(e,t=1)=>{const s=`${e}_page_${t}`,r=y(s);if(r)return r;try{const r=Ts(e);if(!r)throw Error("No fetch function for "+e);const a=await k(s,(()=>r(t)));return j(s,a),a}catch(a){throw a}}),[y,j,k]);const Js=async(e,t=0)=>{let s,r;const a=performance.now();try{if(!e||"string"!=typeof e)throw Error("Invalid section key: "+e);if(s={key:e,fetch:Ts(e),setter:Ks(e),ids:ht[e]},!s.fetch||!s.setter||!s.ids)throw Error("Invalid section configuration for: "+e);let t=!1;const a=Zs(s.key);if(a&&Array.isArray(a)&&a.length>0)try{return s.setter(a),a.forEach((e=>{e&&e.id&&"number"==typeof e.id&&s.ids.add(e.id)})),t=!0,void Ke.recordHomepageMetric("cacheHit",1)}catch(i){}if(t||(nt(s.key,!0),Ke.recordHomepageMetric("cacheHit",0)),r=s.key+"-page-1",hs.has(r))return;let o;xs((e=>new Set([...e,r])));try{o=await Hs(r,(async()=>{const e=new Promise(((e,t)=>{setTimeout((()=>t(Error("Request timeout"))),2e4)})),t=s.fetch(1);return await Promise.race([t,e])}))}catch(n){o=null}if(!o)return;if(o&&o.movies&&Array.isArray(o.movies)&&o.movies.length>0){const e=o.movies.filter((e=>e&&e.id&&"number"==typeof e.id&&e.title&&"string"==typeof e.title));e.length,o.movies.length,s.setter(e),e.forEach((e=>s.ids.add(e.id))),mt((e=>({...e,[s.key]:{current:1,total:o.totalPages||1,hasMore:(o.totalPages||1)>1,lastFetched:Date.now()}})));try{Gs(s.key,e)}catch(l){}}}catch(n){const t=n.message.includes("Network connection failed")||n.message.includes("Request timeout")||n.message.includes("ERR_CONNECTION_RESET")||n.message.includes("Failed to fetch");if(t);else{const t="Request timeout"===n.message?"Request timeout for "+e:`Failed to fetch ${e} movies`;xe(t)}try{const t="movieCache_"+e;localStorage.removeItem(t)}catch(o){}const s=(rt[e]||0)+1;if(("Request timeout"===n.message||t)&&3>s){const t=Math.min(5e3*Math.pow(2,s-1),3e4);at((t=>({...t,[e]:s}))),setTimeout((()=>{Js(e,s).catch((e=>{}))}),t)}else 3>s||at((t=>({...t,[e]:0})))}finally{r&&xs((e=>{const t=new Set(e);return t.delete(r),t}));const t=performance.now()-a;Ke.recordHomepageMetric("apiCall",t),nt(s?s.key:e,!1)}},Ks=e=>({trending:T,popular:M,topRated:P,upcoming:z,action:I,comedy:F,drama:B,horror:H,sciFi:O,documentary:Z,family:J,animation:Q,awardWinning:ee,latest:se,popularTV:ae,topRatedTV:ne,airingToday:oe,nowPlaying:de}[e]),Qs=U.useRef(0),Xs=U.useCallback((async(e,t,s)=>{if(!e)return;const r=performance.now();if(150>r-Qs.current)return;Qs.current=r;const a=e.id;cs(a);const i=e.media_type||e.type||"movie";if(!Cs(a))try{const e=await Ae(a,i);Ss(a,e)}catch(n){}if(Array.isArray(s)){const e=[];t>0&&e.push(s[t-1]),t<s.length-1&&e.push(s[t+1]);for(const t of e){if(!t)continue;const e=t.id;cs(e);const s=t.media_type||t.type||"movie";Cs(e)||Ae(e,s).then((t=>{Ss(e,t)})).catch((()=>{}))}}}),[]);U.useEffect((()=>{if(S[pe]){const e=S[pe].id;be(lt(e))}}),[pe,S.length,lt]);const er=U.useCallback((async(e,t=1)=>{const s=`${e}-${t}`,r=performance.now(),a=xt[s];if(a&&Date.now()-a.timestamp<wt){const s=performance.now()-r;return window.gtag&&window.gtag("event","cache_hit",{category:e,page:t,response_time:s}),a}return Hs(s,(async()=>{const r=performance.now();let a;try{nt(e,!0);const i=Ms.current.isSlow?25e3:2e4;switch(e){case"all":a={movies:[],totalPages:1};break;case"trending":a=await Promise.race([Je(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"popular":a=await Promise.race([Ge(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"topRated":a=await Promise.race([fetch(`${n()}/tmdb/proxy/movie/top_rated?page=${t}`).then((e=>e.json())),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"upcoming":a=await Promise.race([Ze(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"action":a=await Promise.race([qe(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"comedy":a=await Promise.race([Ye(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"drama":a=await Promise.race([fetch(`${n()}/tmdb/proxy/discover/movie?with_genres=18&page=${t}`).then((e=>e.json())),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"horror":a=await Promise.race([fetch(`${n()}/tmdb/proxy/discover/movie?with_genres=27&page=${t}`).then((e=>e.json())),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"sciFi":a=await Promise.race([fetch(`${n()}/tmdb/proxy/discover/movie?with_genres=878&page=${t}`).then((e=>e.json())),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"documentary":a=await Promise.race([fetch(`${n()}/tmdb/proxy/discover/movie?with_genres=99&page=${t}`).then((e=>e.json())),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"family":a=await Promise.race([Ue(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"animation":a=await Promise.race([$e(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"awardWinning":a=await Promise.race([Oe(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"latest":a=await Promise.race([We(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;case"popularTV":if(a=await Promise.race([He(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]),a&&a.results){const e=a.results.slice(0,6),t=await Promise.all(e.map((async e=>{try{const t=await Ae(e.id,"tv");return{...e,...t}}catch(t){return e}})));a={movies:[...t,...a.results.slice(6).map((e=>({...e,title:e.name,release_date:e.first_air_date,media_type:"tv"})))],totalPages:a.total_pages}}break;case"topRatedTV":if(a=await Promise.race([De(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]),a&&a.results){const e=a.results.slice(0,6),t=await Promise.all(e.map((async e=>{try{const t=await Ae(e.id,"tv");return{...e,...t}}catch(t){return e}})));a={movies:[...t,...a.results.slice(6).map((e=>({...e,title:e.name,release_date:e.first_air_date,media_type:"tv"})))],totalPages:a.total_pages}}break;case"airingToday":if(a=await Promise.race([Be(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]),a&&a.results){const e=a.results.slice(0,6),t=await Promise.all(e.map((async e=>{try{const t=await Ae(e.id,"tv");return{...e,...t}}catch(t){return e}})));a={movies:[...t,...a.results.slice(6).map((e=>({...e,title:e.name,release_date:e.first_air_date,media_type:"tv"})))],totalPages:a.total_pages}}break;case"nowPlaying":a=await Promise.race([Ve(t),new Promise(((e,t)=>setTimeout((()=>t(Error("Timeout"))),i)))]);break;default:throw Error("Unknown category: "+e)}const l=performance.now()-r;Ws(l),a&&a.movies&&pt((r=>{const i={...r};return i[s]={...a,timestamp:Date.now(),responseTime:l,category:e,page:t},i}))}catch(i){throw i}finally{nt(e,!1)}return a}))}),[]),tr=U.useCallback((async()=>{try{ls(!0),Qt(!1),es(null),xe(null),Object.keys(it).forEach((e=>{"initial"!==e&&nt(e,!1)})),St.current&&St.current.clear();const t=["trending","popular","topRated"];for(const s of t)try{nt(s,!0);const e=await er(s,1);if(e&&e.movies&&Array.isArray(e.movies)){const t=Ks(s);t&&t(e.movies)}}catch(e){}finally{nt(s,!1)}is((e=>e+1))}catch(e){Qt(!0),es("Recovery failed: "+(e.message||"Unknown error"))}finally{ls(!1)}}),[it,nt,Ks]),sr=U.useCallback((async e=>{const t=ps.findIndex((t=>t.id===e));if(-1===t)return;const s=[ps[t-1]?.id,ps[t+1]?.id].filter(Boolean);for(const a of s){const e=a+"-1";if(!xt[e]||Date.now()-xt[e].timestamp>wt)try{await er(a)}catch(r){}}}),[ps,wt]),rr=U.useCallback(((e,t)=>{const s={trending:T,popular:M,topRated:P,upcoming:z,action:I,comedy:F,drama:B,horror:H,sciFi:O,documentary:Z,family:J,animation:Q,awardWinning:ee,latest:se,popularTV:ae,topRatedTV:ne,airingToday:oe,nowPlaying:de}[e];s&&(s(t.movies),mt((s=>({...s,[e]:{current:1,total:t.totalPages||1}}))))}),[T,M,P,z,I,F,B,H,O,Z,J,Q,ee,se,ae,ne,oe,de,mt]),ar=U.useCallback((async e=>{nt(e,!0);try{sr(e),we(e);const t=xt[e+"-1"];if(t&&Date.now()-t.timestamp<wt)return void rr(e,t);const s=await er(e);s&&s.movies&&rr(e,s)}catch(t){xe(`Failed to load ${e} movies`);const r=3;let a=0;for(;r>a;)try{const t=await er(e);if(t&&t.movies){rr(e,t);break}}catch(s){a++,await new Promise((e=>setTimeout(e,500*a)))}}finally{nt(e,!1)}}),[we,nt,rr,xe]),ir=e=>{if(!e)return 0;let t=0;const s=e.vote_average||e.rating||0,r="number"==typeof e.popularity?e.popularity:0,a=e.vote_count||e.voteCount||0,i="tv"===e.type;if(t+=.4*r,t+=20*s,t+=.15*Math.min(a/100,100),i?(t+=500,"Returning Series"===e.status&&(t+=200),e.number_of_seasons>1&&(t+=100)):t+=300,e.release_date||e.first_air_date){const s=e.release_date||e.first_air_date;if(s){const e=new Date(s).getFullYear(),r=(new Date).getFullYear()-e;0===r?t+=800:1===r?t+=600:r>3?r>10&&(t-=200):t+=400}}if(e.genre_ids&&Array.isArray(e.genre_ids)){const s=[16,35,10751,10765,10759];e.genre_ids.some((e=>s.includes(e)))&&(t+=300)}const n=Date.now();return 24>(n-(e.last_updated||e.updated_at||n))/36e5&&(t+=400),t},nr=U.useCallback((async()=>{const e=performance.now(),t={cacheCheckTime:0,trendingFetchTime:0,detailsFetchTime:0,processingTime:0,totalTime:0,cacheHit:!1,dataSize:0};try{const a=performance.now(),i=Zs("featured");if(i&&i.id&&i.title){t.cacheHit=!0,t.dataSize=1;const s=performance.now();return ft(i),t.processingTime=performance.now()-s,void(t.totalTime=performance.now()-e)}t.cacheCheckTime=performance.now()-a;const n=performance.now();nt("featured",!0);const l=new Promise(((e,t)=>{setTimeout((()=>t(Error("Trending content request timeout"))),2e4)})),o=async(e,t=2)=>{for(let r=0;t>=r;r++)try{return await Promise.race([e(1),l])}catch(s){if(r===t)throw s;await new Promise((e=>setTimeout(e,1e3*(r+1))))}},[c,d,u]=await Promise.allSettled([o(Je),o(He),o(Ve)]);t.trendingFetchTime=performance.now()-n;let m=[];if("fulfilled"===c.status&&c.value?.movies?.length&&m.push(...c.value.movies),"fulfilled"===d.status&&d.value?.shows?.length&&m.push(...d.value.shows),"fulfilled"===u.status&&u.value?.movies?.length&&m.push(...u.value.movies),!m.length)return c.status,d.status,u.status,void ft({id:550,title:"Fight Club",overview:"An insomniac office worker and a devil-may-care soapmaker form an underground fight club that evolves into something much, much more.",poster_path:"/pB8BM7pdSp6B6Ih7QZ4DrQ3PmJK.jpg",backdrop_path:"/pB8BM7pdSp6B6Ih7QZ4DrQ3PmJK.jpg",type:"movie",popularity:100,vote_average:8.8,release_date:"1999-10-15"});const h=m.filter((e=>e?.id&&e?.title&&"number"==typeof e.id));if(!h.length)throw Error("No valid trending items found");const x=h.slice().sort(((e,t)=>{const s=ir(e);return ir(t)-s}))[0],p=performance.now();let g;try{g=await Ae(x.id,x.type||"movie")}catch(s){g=await Ae(x.id)}t.detailsFetchTime=performance.now()-p;const f=performance.now();if(!g||!g.id||!g.title)throw Error("Invalid movie details received");try{Gs("featured",g)}catch(r){}ft(g),t.dataSize=1,t.processingTime=performance.now()-f,t.totalTime=performance.now()-e}catch(a){try{ft({id:550,title:"Fight Club",overview:"An insomniac office worker and a devil-may-care soapmaker form an underground fight club that evolves into something much, much more.",poster_path:"/pB8BM7pdSp6B6Ih7QZ4DrQ3PmJK.jpg",backdrop_path:"/pB8BM7pdSp6B6Ih7QZ4DrQ3PmJK.jpg",type:"movie",popularity:100,vote_average:8.8,release_date:"1999-10-15"})}catch(i){}const e=a.message.includes("timeout")?"Featured content request timed out. Please try again.":"Failed to load featured content. Please refresh the page.";xe(e);try{const e="movieCache_featured";localStorage.removeItem(e)}catch(n){}const t={id:1,title:"Welcome to Streamr",overview:"Your ultimate streaming companion. Discover the latest movies and TV shows.",poster_path:null,backdrop_path:null,vote_average:0,release_date:(new Date).toISOString().split("T")[0],type:"movie"};ft(t)}finally{nt("featured",!1)}}),[]);U.useEffect((()=>{let e=!0;const t=new AbortController;return(async()=>{if(e&&zs.current&&!t.signal.aborted)try{await nr()}catch(s){}})(),()=>{e=!1,t.abort()}}),[]),U.useEffect((()=>{if(!localStorage.getItem("adBlockerToastShown")){const e=setTimeout((()=>{Ne(!0)}),2e3);return()=>clearTimeout(e)}}),[]),U.useEffect((()=>{let e=!0;const t=new AbortController,s=[];return(async()=>{if(e&&zs.current&&!t.signal.aborted)try{const r=["trending","popular","topRated"].map((async s=>{if(!e||t.signal.aborted)return null;try{nt(s,!0);const e=await er(s,1);if(e&&e.movies&&Array.isArray(e.movies)){const t=Ks(s);return t&&t(e.movies),mt((t=>({...t,[s]:{...t[s],current:1,total:e.totalPages||1,isLoading:!1,hasMore:(e.totalPages||1)>1,lastFetched:Date.now()}}))),{section:s,success:!0,count:e.movies.length}}}catch(r){return t.signal.aborted||(xe(`Failed to load ${s} content. Please try again.`),Qt(!0),es(`Failed to load ${s} content: ${r.message||"Unknown error"}`)),{section:s,success:!1,error:r}}finally{e&&!t.signal.aborted&&nt(s,!1)}})),a=((await Promise.allSettled(r)).filter((e=>"fulfilled"===e.status&&e.value?.success)).map((e=>e.value.section)),setTimeout((async()=>{if(!e||t.signal.aborted)return;const s=["upcoming","action","comedy","drama"];for(const a of s){if(!e||t.signal.aborted)return;try{nt(a,!0);const e=await er(a,1);if(e&&e.movies&&Array.isArray(e.movies)){const t=Ks(a);t&&t(e.movies),mt((t=>({...t,[a]:{...t[a],current:1,total:e.totalPages||1,isLoading:!1,hasMore:(e.totalPages||1)>1,lastFetched:Date.now()}})))}}catch(r){t.signal.aborted||(Qt(!0),es(`Failed to load ${a} content: ${r.message||"Unknown error"}`))}finally{e&&!t.signal.aborted&&nt(a,!1)}}}),500));s.push(a);const i=setTimeout((async()=>{if(!e||t.signal.aborted)return;const s=["horror","sciFi","documentary","family","animation","awardWinning","latest"];for(const a of s){if(!e||t.signal.aborted)return;try{nt(a,!0);const e=await er(a,1);if(e&&e.movies&&Array.isArray(e.movies)){const t=Ks(a);t&&t(e.movies),mt((t=>({...t,[a]:{...t[a],current:1,total:e.totalPages||1,isLoading:!1,hasMore:(e.totalPages||1)>1,lastFetched:Date.now()}})))}}catch(r){t.signal.aborted||(Qt(!0),es(`Failed to load ${a} content: ${r.message||"Unknown error"}`))}finally{e&&!t.signal.aborted&&nt(a,!1)}}}),1e3);s.push(i);const n=setTimeout((async()=>{if(!e||t.signal.aborted)return;const s=["popularTV","topRatedTV","airingToday","nowPlaying"];for(const a of s){if(!e||t.signal.aborted)return;try{nt(a,!0);const e=await er(a,1);if(e&&e.movies&&Array.isArray(e.movies)){const t=Ks(a);t&&t(e.movies),mt((t=>({...t,[a]:{...t[a],current:1,total:e.totalPages||1,isLoading:!1,hasMore:(e.totalPages||1)>1,lastFetched:Date.now()}})))}}catch(r){t.signal.aborted||(Qt(!0),es(`Failed to load ${a} content: ${r.message||"Unknown error"}`))}finally{e&&!t.signal.aborted&&nt(a,!1)}}}),1500);s.push(n)}catch(r){if(!t.signal.aborted){xe("Failed to load movie content. Please refresh the page."),Qt(!0),es("Failed to load movie sections: "+(r.message||"Network error"));try{Ht("HomePageNetworkFailure",0,!1)}catch(a){}}}})(),()=>{e=!1,t.abort(),s.forEach((e=>{e&&clearTimeout(e)}))}}),[]),U.useEffect((()=>{let e;return e&&clearInterval(e),e=Fs((async()=>{if(zs.current){try{const e="movieCache_featured";localStorage.removeItem(e)}catch(e){}await nr()}}),9e5),()=>{e&&Bs(e)}}),[]),U.useEffect((()=>{const e=e=>{if("movieCache_lastUpdate"===e.key&&e.newValue&&zs.current)try{const{key:t}=JSON.parse(e.newValue);if(t&&"string"==typeof t){const e=Ks(kt(t)),s=Zs(t);if(e&&s&&e(s),"featured"===t){const e=Zs("featured");e&&e.id&&ft(e)}}}catch(t){}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]);const lr=U.useCallback((e=>{switch(e){case"all":default:return[];case"trending":return S;case"popular":return _;case"topRated":return L;case"upcoming":return E;case"action":return R;case"comedy":return A;case"drama":return V;case"horror":return D;case"sciFi":return W;case"documentary":return $;case"family":return G;case"animation":return K;case"awardWinning":return X;case"latest":return te;case"popularTV":return re;case"topRatedTV":return ie;case"airingToday":return le;case"nowPlaying":return ce}}),[S,_,L,E,R,A,V,D,W,$,G,K,X,te,re,ie,le,ce]),or=U.useCallback((e=>{e&&e.id&&we(e.id)}),[fe]),cr=U.useCallback((e=>{if(!e)return;const t="string"==typeof e?e:e.name;if(!t)return;const s=new URLSearchParams;s.set("genre",t.toLowerCase()),s.set("category","popular"),window.location.href="/movies?"+s.toString()}),[]),dr=U.useRef(fe);U.useEffect((()=>{const e=dr.current,t=fe;t&&"all"!==t&&t!==e&&(dr.current=t,ar(t))}),[fe]);const ur=U.useCallback(((e,t,s=600)=>{e&&"function"==typeof e.slideTo&&e.slideTo(t,s,"cubic-bezier(0.25, 0.46, 0.45, 0.94)")}),[]),mr=U.useCallback(((e,t=600)=>{e&&"function"==typeof e.slideNext&&e.slideNext(t,"cubic-bezier(0.25, 0.46, 0.45, 0.94)")}),[]),hr=U.useCallback(((e,t=600)=>{e&&"function"==typeof e.slidePrev&&e.slidePrev(t,"cubic-bezier(0.25, 0.46, 0.45, 0.94)")}),[]);U.useEffect((()=>{const e=e=>{if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)return;const t=document.querySelector(".swiper-slide-active")?.closest(".swiper")?.swiper;if(t)switch(e.key){case"ArrowLeft":e.preventDefault(),hr(t,400);break;case"ArrowRight":e.preventDefault(),mr(t,400);break;case"Home":e.preventDefault(),ur(t,0,600);break;case"End":e.preventDefault(),t&&t.slides&&"number"==typeof t.slides.length&&t.slides.length>0&&ur(t,t.slides.length-1,600)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[ur,mr,hr]),U.useEffect((()=>{let e=0,t=0,s=!1;const r=r=>{e=r.touches[0].clientX,t=r.touches[0].clientY,s=!1},a=r=>{if(!s){const a=Math.abs(r.touches[0].clientX-e);a>Math.abs(r.touches[0].clientY-t)&&a>10&&(s=!0)}},i=r=>{if(!s)return;const a=r.changedTouches[0].clientX-e,i=r.changedTouches[0].clientY-t;if(Math.abs(a)>Math.abs(i)&&Math.abs(a)>50){const e=document.querySelector(".swiper-slide-active")?.closest(".swiper")?.swiper;e&&(a>0?hr(e,300):mr(e,300))}s=!1};return document.addEventListener("touchstart",r,{passive:!0}),document.addEventListener("touchmove",a,{passive:!0}),document.addEventListener("touchend",i,{passive:!0}),()=>{document.removeEventListener("touchstart",r),document.removeEventListener("touchmove",a),document.removeEventListener("touchend",i)}}),[mr,hr]);const xr=U.useCallback((async e=>{if(!e||!ut[e])return;const t=ut[e];if(!t.isLoading&&t.hasMore)try{const s=t.current+1,r=Ts(e);if(!r)return;const a=await r(s);if(a&&a.results){const t={trending:T,popular:M,topRated:P,upcoming:z,action:I,comedy:F,drama:B,horror:H,sciFi:O,documentary:Z,family:J,animation:Q,awardWinning:ee,latest:se,popularTV:ae,topRatedTV:ne,airingToday:oe,nowPlaying:de}[e];t&&t((e=>[...e,...a.results])),mt((t=>({...t,[e]:{...t[e],current:s,hasMore:s<(a.totalPages||1),isLoading:!1}})))}}catch(s){mt((t=>({...t,[e]:{...t[e],isLoading:!1}})))}}),[]);U.useEffect((()=>()=>{zs.current=!1;try{Is()}catch(e){}try{Ds()}catch(e){}if(gs&&gs.current){try{gs.current.disconnect()}catch(e){}gs.current=null}if(Rs.current){try{Rs.current.disconnect()}catch(e){}Rs.current=null}if(Ls.current){try{Ls.current.disconnect()}catch(e){}Ls.current=null}Ps.current&&(Ps.current.forEach((t=>{try{clearTimeout(t)}catch(e){}})),Ps.current.clear()),Es.current&&(Es.current.forEach((t=>{try{clearInterval(t)}catch(e){}})),Es.current.clear());try{Nt()}catch(e){}if(St.current)try{St.current.clear()}catch(e){}if(Tt.current)try{Tt.current.length=0}catch(e){}if(_s.current)try{_s.current.clear()}catch(e){}try{document.body.style.overflow="auto"}catch(e){}}),[]);const pr=U.useMemo((()=>{try{if(it.initial){const e=6,t=Object.keys(it).filter((e=>"initial"!==e&&!it[e])).length,s=Math.min(t/e*100,95);return Y.jsx(l,{text:b()?"Loading from cache...":"Loading your cinematic experience...",showProgress:!0,progress:s,variant:"minimalist",showTips:!1})}return null}catch(e){return null}}),[it.initial,b]);return Kt?Y.jsx("div",{className:"min-h-screen bg-[#121417] flex items-center justify-center",children:Y.jsxs("div",{className:"text-center p-8",children:[Y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Something went wrong"}),Y.jsx("p",{className:"text-gray-400 mb-6",children:Xt||"An unexpected error occurred while loading the homepage."}),Y.jsxs("div",{className:"flex gap-4 justify-center",children:[Y.jsx("button",{onClick:tr,disabled:ns,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white px-6 py-3 rounded-lg transition-colors",children:ns?"Recovering...":"Try to Recover"}),Y.jsx("button",{onClick:()=>{Qt(!1),es(null),window.location.reload()},className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Reload Page"})]}),as>0&&Y.jsxs("p",{className:"text-sm text-gray-500 mt-4",children:["Recovery attempts: ",as]})]})}):it.initial?pr:he?Y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#121417]",children:Y.jsx("div",{className:"text-white text-xl",children:he})}):"function"!=typeof tr?Y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#121417]",children:Y.jsx("div",{className:"text-white text-xl",children:"Configuration error. Please refresh the page."})}):Y.jsxs(At,{transition:{duration:.4,ease:[.16,1,.3,1]},reducedMotion:f?"always":"never",children:[Y.jsxs(q,{children:[Y.jsx("title",{children:"Streamr — Home"}),Y.jsx("meta",{name:"description",content:"Streamr - Discover movies, TV shows, and more. Watch your favorite content anytime, anywhere."}),Y.jsx("link",{rel:"canonical",href:"https://streamr.com/"}),Y.jsx("meta",{property:"og:title",content:"Streamr - Home"}),Y.jsx("meta",{property:"og:description",content:"Streamr - Discover movies, TV shows, and more. Watch your favorite content anytime, anywhere."})]}),Y.jsxs("div",{className:"relative flex size-full min-h-screen flex-col bg-[#121417] dark group/design-root overflow-x-hidden font-inter scrollbar-hide smooth-scroll performance-scroll touch-scroll-fix",children:[Y.jsx(o,{fallback:Y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#121417]",children:Y.jsx("div",{className:"text-white text-xl",children:"Something went wrong. Please refresh the page."})}),onError:(e,t)=>{try{Ht("HomePageError",0,!1)}catch(s){}Qt(!0),es("Component error: "+(e.message||"Unknown error"))},children:Y.jsx("div",{className:"layout-container flex h-full grow flex-col scrollbar-hide momentum-scroll",children:Y.jsx("div",{className:"flex flex-1 justify-center",children:Y.jsxs("div",{className:"layout-content-container flex flex-col w-full flex-1 scrollbar-hide custom-scroll-ease",children:[Y.jsx(rs,{featuredContent:gt||null,trendingMovies:S||[],loading:it.featured||it.trending||!1,onMovieSelect:ys,onGenreClick:cr,onCastMemberClick:vs}),Y.jsx("div",{className:"hidden sm:block",children:Y.jsx(ss,{featuredContent:gt||null,trendingMovies:S||[],onMovieSelect:ys,onGenreClick:cr,onCastMemberClick:vs})}),Y.jsx(Zt,{categories:ps||[],activeCategory:fe||"all",onCategoryClick:or,isMobile:ye||!1}),"all"===fe?Y.jsxs(Y.Fragment,{children:[dt()&&Y.jsx(Yt,{placeholderHeight:220,children:Y.jsx(c,{onMovieSelect:ys,isMobile:ye||!1})}),Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:ps.find((e=>"trending"===e.id))?.icon}),Y.jsx("span",{children:"Trending Now"})]}),movies:S||[],loading:it.trending||!1,onLoadMore:()=>xr("trending"),hasMore:ut.trending?.current<ut.trending?.total||!1,currentPage:ut.trending?.current||1,sectionKey:"trending",onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye||!1,isLowPower:Ot()})}),Y.jsx("div",{className:"mt-6 hide-scrollbar",children:Y.jsx(d,{title:`Top ${Math.min(10,(S||[]).length)} Series in Netflix Today`,items:(S||[]).slice(0,10).map((e=>({id:e.id,title:e.title||e.name||"Untitled",poster_path:e.poster_path?"https://image.tmdb.org/t/p/w342"+e.poster_path:e.backdrop_path?"https://image.tmdb.org/t/p/w342"+e.backdrop_path:"",tag:e.recently_added?"Recently added":""})))})}),Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:ps.find((e=>"popularTV"===e.id))?.icon}),Y.jsx("span",{children:"Popular TV Shows"})]}),movies:re||[],loading:it.popularTV||!1,onLoadMore:()=>xr("popularTV"),hasMore:ut.popularTV?.current<ut.popularTV?.total||!1,currentPage:ut.popularTV?.current||1,sectionKey:"popularTV",onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye||!1,isLowPower:Ot()})}),Y.jsx("div",{className:"mt-6 hide-scrollbar",children:Y.jsx(u,{title:`Top ${Math.min(10,(S||[]).length)} Movies in Netflix Today`,items:(S||[]).slice(0,10).map((e=>({id:e.id,title:e.title||e.name||"Untitled",poster_path:e.poster_path?"https://image.tmdb.org/t/p/w342"+e.poster_path:e.backdrop_path?"https://image.tmdb.org/t/p/w342"+e.backdrop_path:"",tag:e.recently_added?"Recently added":""})))})}),Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:ps.find((e=>"popular"===e.id))?.icon}),Y.jsx("span",{children:"Popular Movies"})]}),movies:_,loading:it.popular,onLoadMore:()=>xr("popular"),hasMore:ut.popular.current<ut.popular.total,currentPage:ut.popular.current,sectionKey:"popular",onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye,isLowPower:Ot()})}),Y.jsx("div",{className:"mt-6 hide-scrollbar",children:Y.jsx(m,{title:"Top Korean Movies",items:(S||[]).slice(0,10).map((e=>({id:e.id,title:e.title||e.name||"Untitled",poster_path:e.poster_path?"https://image.tmdb.org/t/p/w342"+e.poster_path:e.backdrop_path?"https://image.tmdb.org/t/p/w342"+e.backdrop_path:"",tag:e.recently_added?"Recently added":""})))})}),Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:ps.find((e=>"topRatedTV"===e.id))?.icon}),Y.jsx("span",{children:"Top Rated TV Shows"})]}),movies:ie,loading:it.topRatedTV,onLoadMore:()=>xr("topRatedTV"),hasMore:ut.topRatedTV.current<ut.topRatedTV.total,currentPage:ut.topRatedTV.current,sectionKey:"topRatedTV",onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye,isLowPower:Ot()})}),Y.jsx("div",{className:"mt-6 hide-scrollbar",children:Y.jsx(h,{title:"Top Korean Movies",items:(S||[]).slice(0,10).map((e=>({id:e.id,title:e.title||e.name||"Untitled",poster_path:e.poster_path?"https://image.tmdb.org/t/p/w342"+e.poster_path:e.backdrop_path?"https://image.tmdb.org/t/p/w342"+e.backdrop_path:"",tag:e.recently_added?"Recently added":""})))})}),Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:ps.find((e=>"nowPlaying"===e.id))?.icon}),Y.jsx("span",{children:"Now Playing"})]}),movies:ce,loading:it.nowPlaying,onLoadMore:()=>xr("nowPlaying"),hasMore:ut.nowPlaying.current<ut.nowPlaying.total,currentPage:ut.nowPlaying.current,sectionKey:"nowPlaying",onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye,isLowPower:Ot()})}),Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:ps.find((e=>"upcoming"===e.id))?.icon}),Y.jsx("span",{children:"Coming Soon"})]}),movies:E,loading:it.upcoming,onLoadMore:()=>xr("upcoming"),hasMore:ut.upcoming.current<ut.upcoming.total,currentPage:ut.upcoming.current,sectionKey:"upcoming",onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye,isLowPower:Ot()})}),Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:ps.find((e=>"airingToday"===e.id))?.icon}),Y.jsx("span",{children:"Airing Today"})]}),movies:le,loading:it.airingToday,onLoadMore:()=>xr("airingToday"),hasMore:ut.airingToday.current<ut.airingToday.total,currentPage:ut.airingToday.current,sectionKey:"airingToday",onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye,isLowPower:Ot()})}),Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:ps.find((e=>"awardWinning"===e.id))?.icon}),Y.jsx("span",{children:"Award Winning"})]}),movies:X,loading:it.awardWinning,onLoadMore:()=>xr("awardWinning"),hasMore:ut.awardWinning.current<ut.awardWinning.total,currentPage:ut.awardWinning.current,sectionKey:"awardWinning",onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye,isLowPower:Ot()})}),Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:ps.find((e=>"latest"===e.id))?.icon}),Y.jsx("span",{children:"Latest Releases"})]}),movies:te,loading:it.latest,onLoadMore:()=>xr("latest"),hasMore:ut.latest.current<ut.latest.total,currentPage:ut.latest.current,sectionKey:"latest",onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye,isLowPower:Ot()})})]}):Y.jsx(Yt,{placeholderHeight:320,children:Y.jsx(Gt,{title:(()=>{const e=ps.find((e=>e.id===fe));return Y.jsxs("span",{className:"inline-flex items-center gap-2",children:[Y.jsx("span",{className:"flex-shrink-0 text-white",children:e?.icon}),Y.jsx("span",{children:e?.label||""})]})})(),movies:lr(fe),loading:it[fe],onLoadMore:()=>xr(fe),hasMore:ut[fe].current<ut[fe].total,currentPage:ut[fe].current,sectionKey:fe,onMovieSelect:ys,onMovieHover:p?Xs:void 0,onPrefetch:os,isMobile:ye})}),Y.jsx("div",{className:"md:hidden pb-20 sm:pb-24"})]})})})}),ue&&Y.jsx(U.Suspense,{fallback:Y.jsx(Ft.div,{className:"fixed inset-0 flex items-center justify-center bg-black/80 backdrop-blur-md z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:Y.jsxs(Ft.div,{className:"flex flex-col items-center space-y-6 p-8 rounded-2xl bg-white/5 border border-white/5 backdrop-blur-sm",initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},transition:{duration:.4,ease:"easeOut"},children:[Y.jsxs("div",{className:"relative",children:[Y.jsx("div",{className:"w-16 h-16 border-4 border-white/20 border-t-white rounded-full animate-spin"}),Y.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-t-white/40 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),Y.jsxs("div",{className:"text-center space-y-2",children:[Y.jsx("p",{className:"text-white/90 text-base font-semibold",children:"Loading movie details..."}),Y.jsx("p",{className:"text-white/60 text-sm",children:"Preparing your viewing experience"})]}),Y.jsx("div",{className:"flex space-x-1",children:[0,1,2].map((e=>Y.jsx(Ft.div,{className:"w-2 h-2 bg-white/40 rounded-full",animate:{scale:[1,1.2,1],opacity:[.4,1,.4]},transition:{duration:1.5,repeat:1/0,delay:.2*e}},e)))})]})}),children:Y.jsx(Ut,{movie:ue,loading:Mt,onClose:()=>{me(null),Lt(!1)},onMovieSelect:ys,onGenreClick:cr,onError:e=>{xe("Failed to load movie details. Please try again.")}})}),Re&&Se&&Y.jsx(x,{person:Se,onClose:bs,onMovieSelect:ys,onSeriesSelect:ys}),!1,!!ke&&Y.jsx(U.Suspense,{fallback:null,children:Y.jsx(Wt,{show:je,onClose:()=>Ne(!1),onDismiss:()=>{localStorage.setItem("adBlockerToastShown","true")}})}),!1,!1]})]})}},Symbol.toStringTag,{value:"Module"})),is=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.a7))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url))),ns=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.ao))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url))),ls=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.ag))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url))),os={popular:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Y.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),top_rated:()=>Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Y.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"}),Y.jsx("path",{d:"M12 6v6l4 2"})]}),upcoming:()=>Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Y.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),Y.jsx("path",{d:"M16 2v4M8 2v4M3 10h18"}),Y.jsx("circle",{cx:"16",cy:"16",r:"3"}),Y.jsx("path",{d:"M16 16v-1.5M16 16l1.2 1.2"})]}),now_playing:()=>Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Y.jsx("circle",{cx:"12",cy:"12",r:"10"}),Y.jsx("polygon",{points:"10,8 16,12 10,16 10,8",fill:"currentColor",stroke:"none"}),Y.jsx("path",{d:"M18 12c0-3.31-2.69-6-6-6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),Y.jsx("path",{d:"M18 12c0 3.31-2.69 6-6 6",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]}),airing_today:()=>Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Y.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),Y.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),Y.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),Y.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),netflix:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 16 16",className:"w-4 h-4",children:Y.jsx("path",{d:"M10 0v8L7 0H4v16h3V8l3 8h3V0z",fill:"currentColor"})}),prime:()=>Y.jsxs("svg",{viewBox:"0 0 92 89",xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8","aria-label":"Prime Video",fill:"none",children:[Y.jsx("title",{children:"Prime Video"}),Y.jsxs("g",{children:[Y.jsx("path",{d:"M6.93 48.53c-.22.01-.43-.06-.59-.2-.14-.17-.2-.38-.18-.6v-20.4c-.03-.22.04-.43.18-.6.17-.13.37-.19.58-.17h2.22c.42-.04.8.25.86.67l.22.8c.64-.62 1.39-1.1 2.22-1.43.85-.34 1.75-.52 2.66-.52 1.82-.06 3.56.75 4.68 2.18 1.24 1.71 1.85 3.78 1.74 5.89.03 1.53-.26 3.05-.86 4.45-.5 1.17-1.3 2.18-2.33 2.93-.99.68-2.18 1.03-3.38 1-.82 0-1.63-.13-2.4-.4-.71-.24-1.36-.61-1.93-1.1v6.72c.02.21-.04.43-.17.6-.17.13-.39.19-.6.17l-2.22-.01zm6.73-9.36c.99.07 1.94-.37 2.53-1.17.62-1.12.9-2.39.81-3.67.1-1.29-.18-2.58-.8-3.71-.59-.81-1.55-1.25-2.55-1.17-1.06 0-2.09.29-3 .83v8.05c.9.56 1.94.85 3 .85z",fill:"currentColor"}),Y.jsx("path",{d:"M25.32 42.21c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24V27.33c-.03-.22.04-.43.18-.6.17-.13.37-.19.58-.17h2.21c.42-.04.8.25.86.67l.4 1.64c.66-.77 1.44-1.42 2.32-1.92.72-.38 1.51-.57 2.32-.57h.43c.22-.02.43.04.61.17.14.17.2.38.18.6v2.58c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18h-.7c-.23 0-.51 0-.86 0-.58.01-1.15.08-1.72.2-.59.11-1.17.28-1.72.51v10.25c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18h-2.21z",fill:"currentColor"}),Y.jsx("path",{d:"M39.07 24.12c-.68.03-1.35-.2-1.87-.64-.48-.45-.74-1.09-.71-1.75-.03-.66.23-1.31.71-1.76 1.1-.88 2.65-.88 3.75 0 .48.45.74 1.09.71 1.75.03.66-.23 1.3-.71 1.75-.67.56-1.34.79-2.18.65zm-1.47 18.1c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24V27.33c-.03-.22.04-.43.18-.6.17-.13.37-.19.58-.17h2.95c.21-.02.43.04.6.17.13.17.19.39.17.6v14.12c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18l-2.94-.01z",fill:"currentColor"}),Y.jsx("path",{d:"M45.88 42.21c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24V27.33c-.03-.22.04-.43.18-.6.17-.13.37-.19.58-.17h2.21c.42-.04.8.25.86.67l.25.83c.91-.63 1.89-1.14 2.93-1.52.86-.3 1.75-.45 2.66-.46 1.58-.13 3.09.64 3.9 2 .91-.63 1.9-1.13 2.95-1.5.92-.31 1.89-.46 2.86-.46 1.23-.07 2.43.36 3.33 1.2.83.91 1.25 2.11 1.18 3.34v10.79c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18h-2.21c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24v-9.84c0-1.39-.62-2.09-1.87-2.09-1.16.01-2.31.29-3.35.8v11.14c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18h-2.21c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24v-9.84c0-1.39-.62-2.09-1.87-2.09-1.18.01-2.33.29-3.38.83v11.1c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18l-2.21-.01z",fill:"currentColor"}),Y.jsx("path",{d:"M79.7 42.67c-2.15.14-4.27-.61-5.85-2.09-1.44-1.65-2.16-3.81-2-6-.14-2.27.59-4.5 2.04-6.25 1.51-1.56 3.64-2.39 5.81-2.27 1.61-.1 3.2.39 4.47 1.38 1.08.92 1.67 2.29 1.61 3.7.07 1.38-.59 2.71-1.74 3.48-1.55.89-3.33 1.3-5.11 1.18-1.01.01-2.02-.1-3-.34.01 1.11.45 2.16 1.24 2.94.93.66 2.07.98 3.21.89.56 0 1.12-.04 1.67-.11.76-.12 1.52-.28 2.26-.48h.18c.1 0 .15 0 .15 0 .35 0 .52.24.52.71v1.41c.02.24-.03.48-.14.69-.14.17-.33.29-.54.35-1.23.34-2.85.61-4.48.58zm-1-9.63c.79.06 1.57-.11 2.27-.48.48-.33.75-.88.71-1.46 0-1.29-.77-1.93-2.3-1.93-1.97 0-3.1 1.21-3.41 3.62.89.17 1.8.25 2.71.25z",fill:"currentColor"}),Y.jsx("path",{d:"M78.09 59.44c-8.76 6.46-21.46 9.89-32.39 9.89-14.61.08-28.72-5.29-39.57-15.07-.82-.74-.09-1.75.9-1.18 12.06 6.89 25.71 10.5 39.59 10.49 10.36-.06 20.61-2.15 30.16-6.17 1.12-.47 2.36 1.09.81 2.04z",fill:"currentColor"}),Y.jsx("path",{d:"M81.78 55.33c-1.12-1.43-7.4-.68-10.23-.34-.86.1-1-.64-.22-1.18 5-3.52 13.23-2.5 14.18-1.32.95 1.18-.25 9.41-5 13.34-.72.6-1.41.28-1.09-.52.99-2.16 3.36-8.06 2.36-9.28z",fill:"currentColor"})]})]}),hbo:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",className:"w-8 h-8",children:Y.jsx("path",{d:"M13 12.07v13.78H9.2v-5.08H6.79v5.08H3V12.07h3.79v5.24H9.2v-5.24Zm17 4.11A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18Zm0 0A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18Zm0 0A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18Zm0 0A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18ZM30 12a7 7 0 0 0-6.41 4.17 3.83 3.83 0 0 0-1.08-3 4.63 4.63 0 0 0-3.37-1H13.8v13.71h5.33a4 4 0 0 0 3.05-.88 4.38 4.38 0 0 0 1.28-3.46A7 7 0 1 0 30 12ZM19.66 22.36a1.24 1.24 0 0 1-.82.29h-1.69v-2.1h1.69A1 1 0 0 1 20 21.62a.94.94 0 0 1-.34.74Zm0-5.07a1.16 1.16 0 0 1-.82.31h-1.7v-2.18h1.67a1.36 1.36 0 0 1 .92.24 1.13 1.13 0 0 1 .27.86 1 1 0 0 1-.33.77Zm1.94 1.63c.29-.18 1-.44 1.42-.72a7 7 0 0 0-.02.8 5.33 5.33 0 0 0 .08 1 9 9 0 0 0-1.47-1.08Zm8.4 3.54A3.46 3.46 0 1 1 33.45 19 3.46 3.46 0 0 1 30 22.46Zm0-6.28A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18Z",fill:"currentColor"})}),hulu:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"5.348 31.697 89.762 29.228",className:"w-8 h-8",children:Y.jsx("path",{d:"M95.109 40.81h-7.148v11.781c0 .532-.207.984-.539 1.354-.334.329-.791.493-1.329.533h-4.155c-.582-.041-1.039-.205-1.372-.533-.333-.369-.54-.82-.54-1.354V40.81h-7.147v12.397c.042 1.643.333 3.078 1.04 4.227.705 1.15 1.619 2.012 2.824 2.586 1.248.574 2.66.904 4.279.904h6.941v-.082c1.496 0 2.783-.328 3.864-.944a6.405 6.405 0 0 0 2.411-2.71c.58-1.149.871-2.505.871-3.982V40.81zm-71.518.739c-1.247-.533-2.618-.78-4.114-.739h-4.613l-1.787.206c-.416.123-.624.205-.624.205v-9.524H5.348v29.228h7.106V49.102c.042-.493.208-.985.582-1.313.374-.328.79-.533 1.371-.533h4.156c.499 0 .956.207 1.33.533.374.329.54.821.582 1.313v11.823h7.106V48.199c0-1.766-.374-3.202-1.08-4.311-.749-1.067-1.705-1.846-2.91-2.339zm24.185 11.043c-.042.532-.208.983-.54 1.354-.374.328-.831.492-1.371.532h-4.156c-.54-.041-.997-.205-1.33-.532-.374-.37-.54-.821-.582-1.354V40.81h-7.106v12.397c0 1.643.333 3.078.998 4.227.665 1.15 1.62 2.012 2.826 2.586 1.247.574 2.618.904 4.28.904h6.981v-.082c1.496 0 2.785-.328 3.824-.944a6.778 6.778 0 0 0 2.451-2.71c.54-1.149.832-2.505.873-3.982V40.81h-7.148v11.782zm12.55 8.333h7.106V31.697h-7.106v29.228z",fill:"currentColor"})}),disney:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192.756 192.756",className:"w-9 h-9",children:Y.jsx("path",{d:"M96.954 66.126a5.674 5.674 0 0 1 3.451 1.38c1.312 1.242 1.656 3.313 1.035 4.97-2.414 4.969-8.155 8.288-12.078 9.386-2.347.552-5.314.552-7.454-.276-1.036.621-1.91 2.628-3.175 1.794-1.831-1.43-.246-3.668-1.303-5.256-.218-.327-.767-.351-1.043-.886-1.45-3.175.345-6.212 2.346-8.627 3.336-3.722 12.907-7.869 18.221-2.485zM85.842 68.61c-1.864.345-3.969 1.156-5.107 2.485-1.139 1.328-1.863 2.623-1.173 4.003 2.416-1.794 3.589-4.279 6.281-5.797-.001-.277.413-.484-.001-.691zm11.251.691c-4.763-.415-8.352 3.175-11.734 6.625-.207.552-1.449 1.173-.483 1.794 4.556.414 8.904-.896 12.217-3.934.967-.897 1.655-2.07 1.174-3.313-.207-.482-.694-.965-1.174-1.172zM138.364 89.868c2.209 5.384 4.072 13.872 0 19.049-1.104 1.242-3.036 2.387-4.278 1.449-4.556-3.657-6.487-8.903-9.317-13.597-.414-.207-.414.346-.621.553-1.035 4.762.897 10.974-2.346 14.7-1.242.207-2.404-.432-2.83-1.656-1.588-4.9.067-10.008.481-14.908.967-2.485 1.381-5.383 3.521-7.247 3.451 1.38 5.107 5.246 7.107 8.076 1.451 2.139 2.623 4.555 4.279 6.487 1.449-.621.736-2.515.691-3.658-.554-4.486-1.796-8.627-2.97-12.906-.067-1.104-.688-2.968.483-3.658 3.11 1.381 4.419 4.624 5.8 7.316zM117.521 88.211c0 1.036-.828 2.33-1.52 2.485-6.625 1.035-14.01.414-20.221 2.484-.207.759.69.897 1.173 1.104 5.313.828 10.905 1.035 16.082 2.347 2.737.695 3.728 3.935 3.935 6.626.127 2.122-.689 4.693-2.761 6.143-5.106 3.244-12.905 3.105-18.083.139-1.979-1.11-3.865-2.898-4.003-5.107.012-1.754.76-3.135 2.002-3.796 4.97-2.002 11.112-.896 15.392 1.656.274 1.381-1.22 1.306-1.935 1.795-4.763 2.761-8.351-3.104-12.768-.967-.621.414-1.07 1.569-.345 1.933 5.452 2.416 11.526.69 16.909-.828.621-.207 1.381-.828 1.449-1.449-.207-2.209-2.691-2.691-4.279-3.312-4.693-1.173-9.869-1.173-14.908-1.656-.966-.207-2.197-.88-2.484-1.656-.552-1.656-.552-3.934.69-5.314 6.418-5.66 16.149-5.176 24.293-3.658.553.203 1.174.41 1.382 1.031zM87.361 90.834c.621 6.625.966 12.769.828 19.739-.138.896-1.173 1.104-1.863 1.449-1.104.207-2.531-.028-2.968-.621-1.587-2.555-1.035-6.004-1.173-9.11.207-4.899.138-10.214 1.519-14.77.264-.662 1.035-1.242 1.656-.829 1.656.829 1.932 2.486 2.001 4.142zM164.041 89.868c.332.558.679 1.42 0 1.794-3.106 1.38-7.315.759-10.905 1.173-.966.828-1.726 2.208-1.382 3.451.347.207.656.522 1.037.482 2.207.139 5.521-1.035 6.972 1.035.354.616-.048 2.916-1.035 2.968-2.693.347-7.121-.338-8.422.347-1.656 1.104-1.519 3.243-2.14 4.97 1.174.759 2.403-.018 3.795-.208 2.556-.414 5.386-1.173 7.938-.621.483.897 1.174 1.864.69 2.968-4.351 3.451-9.963 6.988-15.942 4.486-2.244-1.006-3.244-4.417-2.484-7.314.482-2.071 2.621-4.072 1.311-6.281-.207-.967.346-1.794 1.174-2.001 2.277 0 1.793-2.83 2.967-4.142-1.311-1.449-4.623-1.38-4.278-4.279 1.588-.828 3.521-.552 5.313-.828 4.072-.829 8.627-1.312 12.771-.829.825.166 1.93 1.794 2.62 2.829zM65.482 74.132c6.369 5.206 14.632 14.08 13.597 24.294-1.243 8.076-9.801 14.149-17.048 16.082-7.04 2.07-15.874 1.863-23.053.207-.483 1.312-.966 2.898-2.484 3.451-.966.345-2.209.138-2.968-.483-2.139-2.002-.414-5.867-3.52-7.108-6.074-2.554-12.631-7.593-15.736-13.804-.414-1.242.069-2.484.828-3.45 4.763-3.796 10.767-5.314 16.772-6.488.345.138.207-.345.483-.483.345-4.141.483-8.352 1.794-12.079.299-.523 1.035-.69 1.519-.345 3.796 2.898 2.001 8.352 3.658 12.285 7.247.345 14.494.69 20.222 4.763 1.933 1.587 2.404 4.618 1.794 6.35-.609 1.729-2.622 2.968-4.486 3.104-1.243 0-3.589.121-3.451-.827.138-.949 4.222-2.502 2.968-3.797-1.803-1.861-10.824-2.968-16.415-3.658-.69-.138-1.323.069-1.323.828-.138 5.245-.552 11.042.345 16.082.069.346.483.76.829.827 9.869 1.588 20.291.69 28.021-4.969 3.589-2.897 4.763-6.972 4.141-11.457-3.106-12.492-16.15-20.016-26.848-24.847-10.421-4.555-21.948-6.902-34.302-6.28-1.967.144-5.084.823-5.107 1.519-.023.696 3.531.477 3.105 1.794-.425 1.316-4.037.535-5.107.207-1.07-.328-.966-1.864-.69-2.83 2.692-4.762 10.204-5.147 13.597-5.314 18.772-.484 36.925 6.665 48.865 16.426zM31.663 92.629c-4.763.069-9.801.552-14.218 2.208-.897.345-2.002 1.311-1.312 2.485 1.794 2.415 4.36 4.398 6.764 5.797 2.404 1.397 5.591 3.175 8.49 3.59.69-4.487.69-8.904.621-13.528-.277-.138-.001-.414-.345-.552zM174.323 86.348c-.207 6.004-5.799 9.732-5.799 15.736.207.207.347.483.621.347 4.488-4.901 8.904-11.872 15.461-13.942 1.728-.138 3.289 1.363 3.935 2.485 2.278 4.555 1.728 10.974-1.448 15.115-3.277 4.065-8.974 8.144-15.459 7.453-2.691 6.626-4.558 13.597-5.593 20.844-.552 1.449-1.862.138-2.69-.138-5.59-4.417-1-16.11-.621-17.602.379-1.488 1.875-4.998 2.969-7.937-2.623-4.692-.967-10.353 1.172-14.701 1.656-2.899 3.936-5.798 6.627-8.006.342.001.618.07.825.346zm11.114 7.454c-.828-.138-1.174.967-1.863 1.174-3.174 3.589-6.35 7.178-7.938 11.457 2.141.276 3.934-1.104 5.799-1.863 3.174-2.002 5.176-5.313 4.969-9.11-.139-.623-.691-1.106-.967-1.658z",fill:"currentColor"})}),apple:()=>Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120",className:"w-8 h-8",children:[Y.jsx("path",{d:"M46.55 58.84a9.81 9.81 0 0 1 4.69-8.25 10.14 10.14 0 0 0-7.93-4.3c-3.37-.34-6.59 2-8.3 2s-4.35-1.94-7.15-1.88a10.58 10.58 0 0 0-9 5.43c-3.82 6.63-1 16.46 2.75 21.84 1.82 2.62 4 5.59 6.84 5.48s3.78-1.77 7.1-1.77 4.25 1.77 7.16 1.71 4.82-2.68 6.63-5.32a23.62 23.62 0 0 0 3-6.17 9.53 9.53 0 0 1-5.79-8.77zm-5.45-16.1a9.54 9.54 0 0 0 2.25-6.93A9.72 9.72 0 0 0 37 39.1a9 9 0 0 0-2.3 6.7 8 8 0 0 0 6.4-3.06z",fill:"currentColor"}),Y.jsx("path",{d:"M72 52.85v-5h-6.09v-7H60.5v7h-4.72v5h4.72V71a8.13 8.13 0 0 0 8.12 8.12h2.71v-5.38h-2.71A2.72 2.72 0 0 1 65.91 71V52.85zm25.3-6.4-8.12 24.38-8.13-24.38h-5.42L86.47 79h5.42l10.83-32.51z",fill:"currentColor"})]}),collections:()=>Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Y.jsx("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1"}),Y.jsx("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1"}),Y.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"}),Y.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"})]})},cs={"@keyframes fadeIn":{"0%":{opacity:"0",transform:"translateY(10px)"},"100%":{opacity:"1",transform:"translateY(0)"}},".animate-fadeIn":{animation:"fadeIn 0.5s ease-out forwards"},".ultra-smooth-scroll":{scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",overscrollBehavior:"contain",scrollSnapType:"x proximity",scrollPadding:"1rem",willChange:"scroll-position, transform",transform:"translate3d(0, 0, 0)",contain:"layout style paint"}},ds={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.4,ease:[.25,.46,.45,.94],staggerChildren:.02,delayChildren:.05}}},us={hidden:{opacity:0,y:10,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:200,damping:25,mass:.6}}},ms=U.memo((({movie:e,index:s,onClick:r,onPrefetch:a,onImageLoad:n,onImageError:l,isImageLoaded:o})=>{const{watchlist:c,addToWatchlist:d,removeFromWatchlist:u}=t(),m=c.some((t=>t.id===e.id)),[h,x]=U.useState(o||!1),[p,g]=U.useState(!1),[f,w]=U.useState(!1),[y,j]=U.useState(!1),N=U.useRef(null),[k,S]=U.useState(!1),T=U.useRef(null),_=U.useRef(null),M=U.useRef(null),L=U.useRef(null),P=U.useRef(null),E=U.useRef(!1),z=U.useRef(!0);U.useEffect((()=>{E.current="ontouchstart"in window||navigator.maxTouchPoints>0}),[]);const R=U.useCallback((async t=>{if(P.current)return clearTimeout(P.current),void(P.current=null);P.current=setTimeout((()=>{P.current=null}),300);try{S(!0);const t=r(e);t&&"function"==typeof t.then&&await t}finally{S(!1)}}),[r,e]),I=U.useCallback((e=>{M.current={x:e.touches[0].clientX,y:e.touches[0].clientY,time:Date.now()}}),[]),A=U.useCallback((e=>{if(!M.current)return;L.current={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY,time:Date.now()};const t=M.current,s=L.current,r=Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2)),a=s.time-t.time;10>r&&300>a&&R(e),M.current=null,L.current=null}),[R]),F=U.useCallback((async()=>{if(!y&&!f){w(!0);try{const t=[];e.runtime||e.budget||e.revenue||t.push(Ae(e.id,"movie").catch((e=>null))),t.push(at(e.id,"movie",1).catch((e=>null)));const s=e.poster_path||e.poster;if(s&&!s.startsWith("http")){const e=C(s,"w780");t.push(new Promise((t=>{const s=new Image;s.onload=()=>t(e),s.onerror=()=>t(null),s.src=e})))}const r=e.backdrop_path;if(r){const e=C(r,"w1280");t.push(new Promise((t=>{const s=new Image;s.onload=()=>t(e),s.onerror=()=>t(null),s.src=e})))}await Promise.allSettled(t),j(!0),a&&a(e.id)}catch(t){}finally{w(!1)}}}),[e.id,e.runtime,e.budget,e.revenue,e.poster_path,e.poster,e.backdrop_path,y,f,a]),V=U.useCallback((()=>{const e=Date.now();1e3>e-(V.lastCallTime||0)||(V.lastCallTime=e,T.current&&(clearTimeout(T.current),T.current=null),T.current=setTimeout((()=>{z.current&&F()}),1e3))}),[F,e.id]),B=U.useCallback((()=>{T.current&&(clearTimeout(T.current),T.current=null),_.current&&(clearTimeout(_.current),_.current=null),V.lastCallTime=0}),[]);return U.useEffect((()=>{o&&!h&&x(!0)}),[o,h]),U.useEffect((()=>()=>{z.current=!1,T.current&&(clearTimeout(T.current),T.current=null),_.current&&(clearTimeout(_.current),_.current=null),P.current&&(clearTimeout(P.current),P.current=null),N.current&&(N.current=null),N.current&&N.current.src&&(N.current.src=""),V.lastCallTime=0,w(!1),M.current=null,L.current=null,x(!1),g(!1),j(!1)}),[]),Y.jsx(Ft.div,{variants:us,initial:"hidden",animate:"visible",exit:"exit",className:"group cursor-pointer transform relative touch-manipulation select-none","data-movie-id":e.id,onClick:R,onTouchStart:I,onTouchEnd:A,onMouseEnter:V,onMouseLeave:B,children:Y.jsxs(Ft.div,{layout:!0,className:"aspect-[2/3] rounded-lg overflow-hidden bg-gray-800 relative w-full",children:[Y.jsx(b,{rating:e.vote_average||e.rating,position:"top-left",size:"default"}),Y.jsx(Vt,{children:Y.jsx(Ft.button,{onClick:t=>{t.stopPropagation(),m?u(e.id):d({...e,type:"movie"})},className:"absolute top-2 right-2 z-10 p-2 bg-black/50 rounded-full transition-colors transition-opacity duration-300 hover:bg-black/70 opacity-0 group-hover:opacity-100","aria-label":m?"Remove from watchlist":"Add to watchlist",whileHover:{scale:1.1},whileTap:{scale:.9},children:m?Y.jsx(Ft.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},children:Y.jsx("path",{fillRule:"evenodd",d:"M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21L12 17.5 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z",clipRule:"evenodd"})},"bookmarked"):Y.jsx(Ft.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.5 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})},"not-bookmarked")})}),!h&&Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"absolute inset-0 bg-gray-800 flex items-center justify-center",children:Y.jsx("div",{className:"w-8 h-8 border-4 border-gray-600 border-t-white rounded-full animate-spin"})}),Y.jsx("img",{ref:N,src:(()=>{if(p)return null;const t=e.poster_path||e.poster;return t?t.startsWith("http")?t:i(e,"w500").src:null})()||"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`\n            <svg width="500" height="750" viewBox="0 0 500 750" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <rect width="500" height="750" fill="#1a1a1a"/>\n              <path d="M250 300C277.614 300 300 277.614 300 250C300 222.386 277.614 200 250 200C222.386 200 200 222.386 200 250C200 277.614 222.386 300 250 300Z" fill="#333333"/>\n              <path d="M350 450C350 483.137 323.137 510 290 510H210C176.863 510 150 483.137 150 450V350C150 316.863 176.863 290 210 290H290C323.137 290 350 316.863 350 350V450Z" fill="#333333"/>\n              <path d="M250 400C250 400 230 370 210 370C190 370 170 400 170 400" stroke="#666666" stroke-width="4" stroke-linecap="round"/>\n              <path d="M330 400C330 400 310 370 290 370C270 370 250 400 250 400" stroke="#666666" stroke-width="4" stroke-linecap="round"/>\n              <text x="250" y="550" font-family="Arial" font-size="24" fill="#666666" text-anchor="middle">No Image Available</text>\n              <text x="250" y="580" font-family="Arial" font-size="16" fill="#666666" text-anchor="middle">${e.title}</text>\n            </svg>\n          `),alt:e.title,className:"w-full h-full object-cover "+(h?"opacity-100":"opacity-0"),sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, (max-width: 1280px) 25vw, (max-width: 1536px) 16vw, 12vw",fetchpriority:12>s?"high":"auto",onLoad:()=>{x(!0),n&&n(e.id)},onError:()=>{g(!0),x(!0),l&&l(e.id)},draggable:!1}),k&&Y.jsx(v,{}),Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex items-end p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out",children:Y.jsxs(Ft.div,{className:"text-white",layout:!0,children:[Y.jsx("h4",{className:"font-medium text-sm truncate",children:e.title}),Y.jsxs("p",{className:"text-xs text-gray-300 flex items-center gap-1",children:[e.release_date?.split("-")[0]||e.year||"N/A"," •",Y.jsxs("span",{className:"flex items-center",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-yellow-400 mr-1",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),e.vote_average?.toFixed(1)||e.rating||"N/A"]})]})]})})]})},`${e.id}-${s}`)})),hs=U.memo((({collection:e,index:t,onClick:s})=>{const[r,n]=U.useState(!1),[l,o]=U.useState(!1),[c,d]=U.useState(!1),u=U.useRef(null),m=U.useRef(null),h=U.useRef(!0);U.useEffect((()=>{n(!1),o(!1),u.current&&u.current.complete&&0!==u.current.naturalHeight&&n(!0)}),[e.id]),U.useEffect((()=>()=>{h.current=!1}),[]);const x=U.useCallback((async t=>{if(m.current)return clearTimeout(m.current),void(m.current=null);m.current=setTimeout((()=>{m.current=null}),300);try{d(!0);const t=s(e);t&&"function"==typeof t.then&&await t}finally{h.current&&d(!1)}}),[s,e]),p=U.useCallback((()=>{h.current&&n(!0)}),[]),g=U.useCallback((()=>{h.current&&o(!0)}),[]),f=e=>e?.poster_path?i({poster_path:e.poster_path},"w500").src:e?.backdrop_path?a({backdrop_path:e.backdrop_path},"w780").src:null;return U.useEffect((()=>{const e=u.current;if(!e)return;let t=!1;if(e.complete&&e.naturalWidth>0)return void(t||n(!0));"function"==typeof e.decode&&e.decode().then((()=>{t||n(!0)})).catch((()=>{}));const s=()=>{t||n(!0)},r=()=>{t||o(!0)};e.addEventListener("load",s),e.addEventListener("error",r);const a=setTimeout((()=>{!t&&e.complete&&e.naturalWidth>0&&n(!0)}),3e3);return()=>{t=!0,e.removeEventListener("load",s),e.removeEventListener("error",r),clearTimeout(a)}}),[e.id,e.poster_path,e.backdrop_path]),Y.jsx(Ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},className:"group relative cursor-pointer",onClick:x,children:Y.jsxs("div",{className:"relative aspect-[2/3] rounded-lg overflow-hidden bg-gray-800 shadow-lg transition-all duration-300 group-hover:shadow-xl group-hover:scale-105",children:[(()=>{const t=f(e);return t&&!l?Y.jsx("img",{ref:u,src:t,alt:e.name,className:"w-full h-full object-cover transition-opacity duration-300 "+(r?"opacity-100":"opacity-0"),style:{opacity:r?1:0},onLoad:p,onError:g,loading:"lazy"}):Y.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:Y.jsxs("div",{className:"text-gray-400 text-center",children:[Y.jsx("svg",{className:"w-16 h-16 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),Y.jsx("p",{className:"text-sm font-medium text-gray-300",children:"Collection"}),Y.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No Image Available"})]})})})(),(()=>{const t=f(e);return r||l||!t?null:Y.jsx("div",{className:"absolute inset-0 bg-gray-800 animate-pulse flex items-center justify-center",children:Y.jsx("div",{className:"w-8 h-8 border-2 border-gray-600 border-t-white rounded-full animate-spin"})})})(),Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:Y.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 min-h-[40%]",children:[Y.jsx("h3",{className:"text-white font-semibold text-sm mb-1 line-clamp-2",children:e.name}),Y.jsx("p",{className:"text-gray-300 text-xs mb-2 line-clamp-2",children:e.overview}),Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("span",{className:"text-gray-400 text-xs",children:[e.parts_count," movies"]}),Y.jsxs("div",{className:"flex items-center space-x-1",children:[Y.jsx("svg",{className:"w-3 h-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:Y.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Y.jsx("span",{className:"text-gray-300 text-xs",children:"Collection"})]})]})]})})]})})})),xs=()=>{const t=U.useRef(!0),s=Q(),r=X(),[a,i]=U.useState(""),[n,l]=U.useState(null),[o,c]=U.useState(null);U.useState("popularity");const[d,u]=U.useState([]),[m,h]=U.useState([]);U.useState([]);const[x,p]=U.useState([]),[g,f]=U.useState(null),[w,v]=U.useState(null),[b,C]=U.useState(1),[S,T]=U.useState(1),[_,M]=U.useState(!1);e();const[L,P]=U.useState(!1),[E,z]=U.useState(!1),[R,I]=U.useState(!1),[A,F]=U.useState({}),[V,B]=U.useState(!0),[D,H]=U.useState({header:!1,filters:!1,movies:!1}),W=U.useRef(null),O=U.useRef(null),$=U.useRef(null),[q,Z]=U.useState(null),{ref:G,inView:J}=ee({threshold:.1,root:null,rootMargin:"0px 0px 200px 0px",triggerOnce:!1,delay:100});U.useRef(!1),U.useRef(0),U.useRef(0);const[K,te]=U.useState([]),[se,re]=U.useState(!1),[ae,ie]=U.useState(null),[ne,le]=U.useState(1),[oe,ce]=U.useState(!1),[de,ue]=U.useState("popular"),[me,he]=U.useState(!0),[xe,pe]=U.useState(null),ge=U.useRef(null),[fe,we]=U.useState(!1),[ve,be]=U.useState(!1);U.useState(null),U.useState(null);const[ye,je]=U.useState([]),[Ne,ke]=U.useState([]),{getIconColor:Ce,getBackgroundTransition:Se,getRubberBandVariants:Te}=Ie(de);U.useEffect((()=>{}),[J,me,V,_,de]);const[_e,Me]=U.useState(new Set),[Le,Pe]=U.useState(new Map),[Ee,ze]=U.useState({totalPrefetched:0,successfulPrefetches:0,failedPrefetches:0,cacheHits:0}),Re=U.useRef([]),Fe=U.useRef(!1),Be=U.useRef(null),[De,He]=U.useState(new Set),We=U.useRef(null);U.useEffect((()=>(t.current=!0,()=>{t.current=!1,We.current&&(We.current.disconnect(),We.current=null),W.current&&(W.current.disconnect(),W.current=null),He(new Set)})),[]),U.useEffect((()=>{const e=a?`Search Results for "${a}" - Movies | Streamr`:n?n.name+" Movies | Streamr":de.replace("_"," ").replace(/\b\w/g,(e=>e.toUpperCase()))+" Movies | Streamr",t=a?`Search results for "${a}". Discover movies, collections, and more on Streamr.`:n?`Browse ${n.name} movies. Find the best ${n.name.toLowerCase()} films to watch on Streamr.`:`Discover ${de.replace("_"," ")} movies. Browse popular, top-rated, upcoming, and now playing films on Streamr.`;document.title=e;let s=document.querySelector('meta[name="description"]');s||(s=document.createElement("meta"),s.name="description",document.head.appendChild(s)),s.content=t;let r=document.querySelector('meta[property="og:title"]');r||(r=document.createElement("meta"),r.setAttribute("property","og:title"),document.head.appendChild(r)),r.content=e;let i=document.querySelector('meta[property="og:description"]');return i||(i=document.createElement("meta"),i.setAttribute("property","og:description"),document.head.appendChild(i)),i.content=t,()=>{document.title="Streamr - Watch Movies and TV Shows"}}),[a,n,de]),U.useEffect((()=>()=>{ge.current&&(clearTimeout(ge.current),ge.current=null),Be.current&&(clearTimeout(Be.current),Be.current=null),Ye.current&&(Ye.current=!1),Re.current&&(Re.current.length=0),Fe.current=!1}),[]),U.useEffect((()=>{const e=setTimeout((()=>{const e=$.current;if(!e)return;const t=t=>{t.preventDefault(),e.scrollLeft+=t.deltaY};return e.addEventListener("wheel",t,{passive:!1}),()=>{e&&e.removeEventListener("wheel",t)}}),100);return()=>{clearTimeout(e)}}),[a]);const[Oe,$e]=U.useState(!1);U.useState(!1);const Ue=U.useRef(!0),Ye=U.useRef(!1),qe=U.useRef([]),Je=U.useRef([]),[Ke,Qe]=U.useState(1),[Xe,et]=U.useState(!1),[tt,rt]=U.useState([]),[ht,xt]=U.useState(0),pt=U.useCallback((async(e,t=1)=>{if(!Ye.current){Ye.current=!0,1===t?(B(!0),pe(null)):et(!0);try{let r,a=[],i=1;if(o||n){const s={page:t,vote_count_gte:10,include_adult:!1};switch(e){case"popular":default:s.sort_by="popularity.desc";break;case"top_rated":s.sort_by="vote_average.desc",s.vote_count_gte=50;break;case"upcoming":if(s.sort_by="release_date.asc",!o){const e=new Date;s.primary_release_date_gte=e.toISOString().split("T")[0]}break;case"now_playing":if(s.sort_by="popularity.desc",!o){const e=new Date,t=new Date(e.getTime()-2592e6);s.primary_release_date_gte=t.toISOString().split("T")[0],s.primary_release_date_lte=e.toISOString().split("T")[0]}}o&&(s.primary_release_year=o),n&&n.id&&(s.with_genres=n.id),r=await it(s),a=r.movies||[],i=r.totalPages||1}else{switch(e){case"popular":default:r=await Ge(t);break;case"top_rated":r=await st(t);break;case"upcoming":r=await Ze(t);break;case"now_playing":r=await Ve(t);break;case"collections":r=await lt(t);{const s=r.collections||[],a=r.totalPages||r.total_pages||1;h(1===t?s:e=>{const t=new Set(e.map((e=>e.id))),r=s.filter((e=>!t.has(e.id)));if(0===r.length)return e;const a=[...e,...r];return a.length>200?a.slice(-200):a}),he(a>t),Qe(t),T(a),H((t=>({...t,[e]:!0})))}return;case"netflix":r=await nt(8,t);break;case"prime":const a=[9,119,10,8];let i=null;for(const e of a)try{const s=await nt(e,t);if(s.results&&s.results.length>0){i=s;break}}catch(s){}r=i||await Ge(t);break;case"hbo":const n=[118,384,49,50,119,8,213,2];let l=null;for(const e of n)try{const s=await nt(e,t);if(s.results&&s.results.length>0){l=s;break}}catch(s){}r=l||await Ge(t);break;case"hulu":if(r=await nt(453,t),!r.results||0===r.results.length){const e=await nt(15,t);if(e.results&&e.results.length>0)r=e;else{const e=await nt(122,t);e.results&&e.results.length>0&&(r=e)}}break;case"disney":r=await nt(2,t);break;case"apple":r=await nt(284,t)}a=r.movies||r.results||[],i=r.totalPages||r.total_pages||1}u(1===t?a:e=>{const t=new Set(e.map((e=>e.id))),s=a.filter((e=>!t.has(e.id)));return 0===s.length?e:[...e,...s]}),he(i>t),Qe(t),T(i),H((t=>({...t,[e]:!0})))}catch(r){pe("Failed to load movies: "+(r.message||"Unknown error"))}finally{1===t?B(!1):et(!1),Ye.current=!1}}}),[o,n,de]);U.useEffect((()=>()=>{Ye.current&&(Ye.current=!1),Ue&&"object"==typeof Ue&&(Ue.current=!1)}),[]),U.useEffect((()=>{if(0===d.length&&!V&&!Ye.current){const e=setTimeout((()=>{t.current&&pt(de,1)}),100);return()=>{clearTimeout(e)}}(async()=>{try{const e=await ot.retryWithBackoff((async()=>!0),"initial movies load");e.success||pe(ot.getErrorMessage(e.error,"movies"))}catch(e){pe(ot.getErrorMessage(e,"movies"))}})()}),[de]);const gt=async(e,t=1)=>{try{let s,r=[],a=1,i=!1;return s=o||n?await yt(e,t):await jt(e,t),s&&("collections"===e?(r=s.collections||[],a=s.totalPages||s.total_pages||1,i=a>t):(r=s.movies||s.results||[],a=s.totalPages||s.total_pages||1,i=a>t)),{success:!0,movies:r,collections:"collections"===e?r:[],totalPages:a,hasMore:i,currentPage:t}}catch(s){if(bt(e))try{const e=await Ge(t);return{success:!0,movies:e.movies||e.results||[],totalPages:e.totalPages||e.total_pages||1,hasMore:t<(e.totalPages||e.total_pages||1),currentPage:t,fallback:!0}}catch(r){}return{success:!1,error:s.message||"Failed to fetch movies",movies:[],totalPages:1,hasMore:!1}}},ft=U.useCallback((e=>{try{const t=new URLSearchParams(r.search);if(t.set("category",e),n){const e="object"==typeof n?n.name:(x.find((e=>e.id===n))||{}).name;e&&t.set("genre",e.toLowerCase())}o&&t.set("year",o.toString()),s(`${window.location.pathname}?${t.toString()}`,{replace:!0})}catch(t){}}),[n,o]),wt=U.useCallback((async()=>{xt((e=>e+1)),pe(null);try{await pt(de,1)}catch(e){pe(ot.getErrorMessage(e,"movies"))}}),[de,pt]),vt=U.useCallback((async e=>{if(de!==e&&!Oe){$e(!0),ue(e),u([]),h([]),Qe(1),he(!0),pe(null),B(!0),et(!1),rt([]),Ye.current&&(Ye.current=!1);try{const t=await gt(e,1);t.success?("collections"===e?h(t.collections||[]):u(t.movies||[]),he(t.hasMore||!1),T(t.totalPages||1),Qe(1),ft(e)):(pe(t.error||"Failed to load movies"),u([]),h([]),he(!1))}catch(t){pe("Failed to load movies: "+(t.message||"Unknown error")),u([]),h([]),he(!1)}finally{B(!1),setTimeout((()=>{$e(!1)}),400)}}}),[de,Oe,gt,ft]),bt=e=>["netflix","prime","hbo","hulu","disney","apple"].includes(e),yt=async(e,t)=>{const s={page:t,vote_count_gte:10,include_adult:!1};switch(e){case"popular":default:s.sort_by="popularity.desc";break;case"top_rated":s.sort_by="vote_average.desc",s.vote_count_gte=50;break;case"upcoming":if(s.sort_by="release_date.asc",!o){const e=new Date;s.primary_release_date_gte=e.toISOString().split("T")[0]}break;case"now_playing":if(s.sort_by="popularity.desc",!o){const e=new Date,t=new Date(e.getTime()-2592e6);s.primary_release_date_gte=t.toISOString().split("T")[0],s.primary_release_date_lte=e.toISOString().split("T")[0]}}return o&&(s.primary_release_year=o),n&&n.id&&(s.with_genres=n.id),await it(s)},jt=async(e,t)=>{switch(e){case"popular":default:return await Ge(t);case"top_rated":return await st(t);case"upcoming":return await Ze(t);case"now_playing":return await Ve(t);case"collections":return await lt(t);case"netflix":return await nt(8,t);case"prime":return await Nt(t);case"hbo":return await kt(t);case"hulu":return await Ct(t);case"disney":return await nt(2,t);case"apple":return await nt(284,t)}},Nt=async e=>{const t=[9,119,10,8];for(const r of t)try{const t=await nt(r,e);if(t.results&&t.results.length>0)return t}catch(s){}return await Ge(e)},kt=async e=>{const t=[118,384,49,50,119,8,213,2];for(const r of t)try{const t=await nt(r,e);if(t.results&&t.results.length>0)return t}catch(s){}return await Ge(e)},Ct=async e=>{const t=[453,15,122];for(const r of t)try{const t=await nt(r,e);if(t.results&&t.results.length>0)return t}catch(s){}return await Ge(e)};U.useEffect((()=>()=>{$e(!1),Ye.current&&(Ye.current=!1)}),[]);const St=U.useCallback((async e=>{if(e)if("object"==typeof e&&e.id)l(e);else{const t=x.find((t=>t.id===e||t.id+""==e+""));l(t||null)}else l(null);const t=new URLSearchParams(r.search);if(e){const s="object"==typeof e?e.name:(x.find((t=>t.id+""==e+""))||{}).name;s&&t.set("genre",s.toLowerCase())}else t.delete("genre");s("?"+t.toString(),{replace:!0})}),[s]);U.useEffect((()=>()=>{l(null),be(!1),Ye.current&&(Ye.current=!1)}),[]),U.useEffect((()=>{const e=new URLSearchParams(r.search),s=e.get("category"),a=e.get("genre"),i=e.get("year");if(s&&s!==de){const e=setTimeout((()=>{t.current&&vt(s)}),100);return()=>{clearTimeout(e)}}if(a&&x.length>0&&!n){const e={action:28,adventure:12,animation:16,comedy:35,crime:80,documentary:99,drama:18,family:10751,fantasy:14,history:36,horror:27,music:10402,mystery:9648,romance:10749,"sci-fi":878,"tv movie":10770,thriller:53,war:10752,western:37}[a.toLowerCase()];if(e){const t=x.find((t=>t.id===e));t&&l(t)}}if(i&&!o){const e=parseInt(i);!e||1900>e||e>(new Date).getFullYear()||c(e)}return()=>{Ye.current&&(Ye.current=!1)}}),[r.search,x,de,n,o]),U.useEffect((()=>()=>{Ue.current=!1,ge.current&&(clearTimeout(ge.current),ge.current=null),We.current&&(We.current.disconnect(),We.current=null),W.current&&(W.current.disconnect(),W.current=null),Je.current=[],qe.current=[],Re.current=[],Fe.current=!1,Ye.current=!1,Be.current&&(clearTimeout(Be.current),Be.current=null)}),[]);const Tt=U.useMemo((()=>[{id:"popular",name:"Popular"},{id:"top_rated",name:"Top Rated"},{id:"upcoming",name:"Upcoming"},{id:"now_playing",name:"Now"},{id:"collections",name:"Collections"},{id:"netflix",name:"Netflix",networkId:8},{id:"prime",name:"Prime Video",networkId:9},{id:"hbo",name:"HBO",networkId:118},{id:"hulu",name:"Hulu",networkId:453},{id:"disney",name:"Disney+",networkId:2},{id:"apple",name:"Apple TV+",networkId:284}]),[]),_t=e=>{F((t=>({...t,[e]:!0})))},Mt=e=>{F((t=>({...t,[e]:"error"})))},Lt=U.useCallback((async e=>{const t=Le.get(e.id);if(t?.details)f({...e,...t.details,similar:t.similar?.results||[]});else try{const t=await Ae(e.id,"movie");f({...e,...t})}catch(s){f(e)}}),[Le]);U.useEffect((()=>()=>{f(null),Pe(new Map)}),[]);const Pt=U.useCallback((()=>{f(null)}),[]),Et=U.useCallback((()=>{v(null)}),[]),zt=U.useCallback((e=>{v(e)}),[]);U.useEffect((()=>()=>{f(null),$e(!1)}),[]);const Rt=U.useCallback((e=>{f(e)}),[]);U.useEffect((()=>()=>{f(null),Pe((e=>{const t=new Map;for(const[s,r]of e.entries())r.similar?t.set(s,{...r,similar:null}):t.set(s,r);return t}))}),[]),U.useEffect((()=>{let e=!0;return(async()=>{try{const t=await mt();e&&p(t.genres||[])}catch(t){}})(),()=>{e=!1,p([]),Ye.current&&(Ye.current=!1)}}),[]),U.useEffect((()=>(Ye.current=!1,()=>{ge.current&&(clearTimeout(ge.current),ge.current=null),Ye.current&&(Ye.current=!1),re(!1),ie(null),B(!1),et(!1)})),[]);const It=async(e,t=1)=>{if(!e.trim())return te([]),void ce(!1);try{re(!0),pe(null);const s=await ct(e,t);if(1===t)te(s.results||[]);else{const e=(s.results||[]).filter((e=>!K.some((t=>t.id===e.id))));te((t=>[...t,...e]))}ce(s.page<s.total_pages)}catch(s){pe("Failed to search movies"),te([]),ce(!1)}finally{re(!1)}};U.useEffect((()=>()=>{re(!1),ie(null),te([]),ce(!1),ge.current&&(clearTimeout(ge.current),ge.current=null)}),[]);const At=U.useCallback((async()=>{if(a.trim()&&oe&&!se)try{re(!0);const e=ne+1,t=await ct(a,e);t.results&&(te((e=>{const s=t.results.filter((t=>!e.some((e=>e.id===t.id)))),r=[...e,...s];return r.length>200?r.slice(-200):r})),ce(t.page<t.total_pages),le(e))}catch(e){}finally{re(!1)}}),[a,oe,se,ne]);U.useEffect((()=>()=>{le(1),ce(!1),re(!1),ge.current&&(clearTimeout(ge.current),ge.current=null),te([]),ie(null)}),[]),U.useEffect((()=>{if(J&&oe&&!se&&a.trim()){const e=setTimeout((()=>{t.current&&At()}),100);return()=>{clearTimeout(e)}}return()=>{}}),[J,oe,se,a]),Array.from({length:10},((e,t)=>(new Date).getFullYear()-t)),U.useEffect((()=>{const e=setTimeout((()=>{t.current&&H((e=>({...e,header:!0})))}),100),s=setTimeout((()=>{t.current&&H((e=>({...e,filters:!0})))}),300),r=setTimeout((()=>{t.current&&H((e=>({...e,movies:!0})))}),500);return()=>{clearTimeout(e),clearTimeout(s),clearTimeout(r),H({header:!1,filters:!1,movies:!1}),$e(!1)}}),[]),U.useEffect((()=>{const e=()=>{if(t.current){const e=dt.getHistoryByType("movie"),t=dt.getTrendingSearches(5);je(e.map((e=>e.query))),ke(t)}};e();const s=dt.subscribe((()=>{e()}));return()=>{s&&"function"==typeof s&&s(),je([]),ke([]),re(!1),ge.current&&(clearTimeout(ge.current),ge.current=null)}}),[]),U.useEffect((()=>{const e=e=>{e.target.closest(".dropdown-container")||(P(!1),I(!1),z(!1))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e),P(!1),I(!1),z(!1),be(!1),we(!1)}}),[]),U.useEffect((()=>{const e=e=>{"Escape"===e.key&&(P(!1),I(!1),z(!1))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),P(!1),I(!1),z(!1),be(!1),we(!1)}}),[]);const Bt=U.useCallback((e=>{try{return e&&Array.isArray(e)?e.filter((e=>{if(!e)return!1;let t=!0;n&&n.id&&(t=e.genre_ids&&Array.isArray(e.genre_ids)&&e.genre_ids.includes(n.id));let s=!0;if(o){const t=e.release_date?new Date(e.release_date).getFullYear():null;s=t&&t===parseInt(o)}return t&&s})):[]}catch(t){return e||[]}}),[n,o]);U.useEffect((()=>()=>{l(null),c(null),Ye.current&&(Ye.current=!1)}),[]);const Dt=U.useCallback((()=>{try{return a.trim()&&K.length>0?Bt(K):"collections"===de?m:d}catch(e){return[]}}),[a,K,d,m,de,Bt]);U.useEffect((()=>()=>{i(""),te([]),u([]),$e(!1)}),[]);const Ht=U.useCallback((async e=>{c(e);const t=new URLSearchParams(r.search);e?t.set("year",e.toString()):t.delete("year"),s("?"+t.toString(),{replace:!0})}),[s]);U.useEffect((()=>()=>{c(null),we(!1),Ye.current&&(Ye.current=!1)}),[]),U.useEffect((()=>(d.length>0&&(Je.current=d),()=>{Je.current=[],qe.current=[],Ye.current&&(Ye.current=!1)})),[d]),U.useEffect((()=>{if(!a.trim()){u([]),C(1),he(!0),pe(null),B(!0),et(!1),rt([]);const e=setTimeout((()=>{t.current&&de&&!Ye.current&&pt(de,1)}),100);return()=>{clearTimeout(e),rt([]),et(!1),Ye.current&&(Ye.current=!1)}}return()=>{rt([]),et(!1),Ye.current&&(Ye.current=!1)}}),[o,n,de,a]),U.useEffect((()=>{if(!a.trim()&&0===d.length){const e=setTimeout((()=>{t.current&&de&&!Ye.current&&pt(de,1)}),100);return()=>{clearTimeout(e),Ye.current&&(Ye.current=!1),B(!1),et(!1)}}return()=>{Ye.current&&(Ye.current=!1),B(!1),et(!1)}}),[de,a,d.length]);const Wt=U.useCallback((async()=>{if(!V&&me&&!Ye.current){Ye.current=!0,M(!0),et(!0);try{const t=Ke+1;let s=[];if(o||n){const e={page:t,vote_count_gte:10,include_adult:!1};switch(de){case"popular":default:e.sort_by="popularity.desc";break;case"top_rated":e.sort_by="vote_average.desc",e.vote_count_gte=50;break;case"upcoming":if(e.sort_by="release_date.asc",!o){const t=new Date;e.primary_release_date_gte=t.toISOString().split("T")[0]}break;case"now_playing":if(e.sort_by="popularity.desc",!o){const t=new Date,s=new Date(t.getTime()-2592e6);e.primary_release_date_gte=s.toISOString().split("T")[0],e.primary_release_date_lte=t.toISOString().split("T")[0]}}o&&(e.primary_release_year=o),n&&n.id&&(e.with_genres=n.id);const r=await it(e);s=r.movies||[],he(t<r.totalPages),r.totalPages&&T(r.totalPages)}else{let r;switch(de){case"collections":r=await lt(t);break;case"netflix":r=await nt(8,t);break;case"prime":const s=[9,119,10,8];let a=null;for(const r of s)try{const e=await nt(r,t);if(e.results&&e.results.length>0){a=e;break}}catch(e){}r=a||await Ge(t);break;case"hbo":const i=[118,384,49,50,119,8,213,2];let n=null;for(const r of i)try{const e=await nt(r,t);if(e.results&&e.results.length>0){n=e;break}}catch(e){}r=n||await Ge(t);break;case"hulu":if(r=await nt(453,t),!r.results||0===r.results.length){const e=await nt(15,t);if(e.results&&e.results.length>0)r=e;else{const e=await nt(122,t);e.results&&e.results.length>0&&(r=e)}}break;case"disney":r=await nt(2,t);break;case"apple":r=await nt(284,t);break;default:r=await ut(de,t)}s="collections"===de?r.collections||[]:r.movies||r.results||[];const a=r.totalPages||r.total_pages||1;he(a>t),a&&T(a)}s.length>0?("collections"===de?h((e=>{const t=new Set(e.map((e=>e.id))),r=s.filter((e=>!t.has(e.id)));if(0===r.length)return he(!1),e;const a=[...e,...r];return a.length>200?a.slice(-200):a})):u((e=>{const t=new Set(e.map((e=>e.id))),r=s.filter((e=>!t.has(e.id)));if(0===r.length)return he(!1),e;const a=[...e,...r];return a.length>500?a.slice(-500):a})),Qe(t)):he(!1)}catch(e){pe("Failed to load more movies: "+(e.message||"Unknown error"))}finally{M(!1),et(!1),Ye.current=!1}}}),[V,me,Ke,o,n,de]);U.useEffect((()=>()=>{M(!1),et(!1),Ye.current&&(Ye.current=!1),he(!1)}),[]),U.useEffect((()=>{let e=null;return!J||!me||V||_||Ye.current||(e=setTimeout((()=>{t.current&&Wt()}),100)),()=>{e&&(clearTimeout(e),e=null),M(!1),et(!1)}}),[J,me,V,_,de]);const Ot=U.useMemo((()=>Dt()),[Dt]);U.useEffect((()=>()=>{$e(!1),setTimeout((()=>{F({})}),3e4)}),[]),U.useEffect((()=>{const e=setTimeout((()=>{F({})}),6e4);return()=>clearTimeout(e)}),[de]);const $t=U.useCallback((e=>{Me((t=>t.has(e)?t:new Set([...t,e]))),Me((t=>(t.has(e)||ze((e=>({...e,totalPrefetched:e.totalPrefetched+1,successfulPrefetches:e.successfulPrefetches+1}))),t)))}),[]);U.useEffect((()=>()=>{Me(new Set),ze({totalPrefetched:0,successfulPrefetches:0,failedPrefetches:0,cacheHits:0}),Re.current&&(Re.current.length=0),Be.current&&(clearTimeout(Be.current),Be.current=null),Fe.current=!1,Pe(new Map)}),[]);const Ut=U.useCallback((async()=>{if(!Fe.current&&0!==Re.current.length){Fe.current=!0;try{const e=3,s=Re.current.splice(0,e);await Promise.allSettled(s.map((async e=>{const{movieId:s}=e;try{if(Le.has(s))return void ze((e=>({...e,cacheHits:e.cacheHits+1})));const[e,r]=await Promise.allSettled([Ae(s,"movie"),at(s,"movie",1)]),a="fulfilled"===e.status?e.value:null,i="fulfilled"===r.status?r.value:null;(a||i||null===a&&null===i)&&Pe((e=>{const t=new Map(e);if(t.size>=100){const e=Array.from(t.entries());e.sort(((e,t)=>e[1].timestamp-t[1].timestamp)),e.slice(0,20).forEach((([e])=>t.delete(e)))}return t.set(s,{details:a,similar:i,timestamp:Date.now()}),t})),t.current&&$t(s)}catch(r){ze((e=>({...e,failedPrefetches:e.failedPrefetches+1})))}})))}finally{if(Fe.current=!1,Re.current.length>0){const e=setTimeout((()=>{t.current&&Ut()}),100);Be.current=e}}}}),[Le,$t]);U.useEffect((()=>()=>{Fe.current=!1,Re.current=[],Be.current&&(clearTimeout(Be.current),Be.current=null),Pe(new Map)}),[]);const Yt=U.useCallback(((e,s="normal")=>{const r=Date.now();if(1e3>r-(Yt.lastCallTime||0))return;if(Yt.lastCallTime=r,_e.has(e)||Le.has(e))return;const a=Le.get(e);if(a&&null===a.details&&null===a.similar)return;const i={movieId:e,priority:s,timestamp:Date.now()};20>Re.current.length||(Re.current=Re.current.filter((e=>"high"===e.priority||15e3>Date.now()-e.timestamp))),Re.current.some((t=>t.movieId===e))||("high"===s?Re.current.unshift(i):Re.current.push(i),Fe.current||t.current&&Ut())}),[_e,Le,Ut]);U.useEffect((()=>()=>{Re.current=[],Fe.current=!1,Be.current&&(clearTimeout(Be.current),Be.current=null)}),[]),U.useEffect((()=>()=>{Re.current=[],Fe.current=!1,Be.current&&(clearTimeout(Be.current),Be.current=null)}),[]);const qt=U.useCallback((e=>{const t=De.has(e)?"high":"normal";Yt(e,t)}),[De,Yt]);U.useEffect((()=>()=>{He(new Set),Re.current=[],Fe.current=!1}),[]);const Zt=U.useRef(qt);U.useEffect((()=>(Zt.current=qt,()=>{Zt.current=null,Re.current=[],Fe.current=!1})),[qt]);const Gt=U.useCallback((e=>{const t=Date.now();2e3>t-(Gt.lastCallTime||0)||(Gt.lastCallTime=t,Zt.current(e))}),[]);U.useEffect((()=>{if(We.current)return;const e=new IntersectionObserver((e=>{He((s=>{const r=new Set(s);if(e.forEach((e=>{const s=e.target.dataset.movieId;s&&(e.isIntersecting?(r.add(parseInt(s)),e.intersectionRatio>.5&&t.current&&Gt(parseInt(s))):r.delete(parseInt(s)))})),r.size>50){const e=Array.from(r);return new Set(e.slice(-50))}return r}))}),{rootMargin:"100px 0px",threshold:[0,.5,1]});We.current=e;const s=setTimeout((()=>{t.current&&document.querySelectorAll("[data-movie-id]").forEach((t=>e.observe(t)))}),100);return()=>{clearTimeout(s),We.current&&(We.current.disconnect(),We.current=null),He(new Set),Re.current=[],Fe.current=!1}}),[Gt]),U.useEffect((()=>{if(We.current&&t.current){const e=setTimeout((()=>{t.current&&We.current&&document.querySelectorAll("[data-movie-id]").forEach((e=>{e.dataset.observed||(We.current.observe(e),e.dataset.observed="true")}))}),100);return()=>{clearTimeout(e)}}}),[d.length,K.length]),U.useEffect((()=>{const e=setInterval((()=>{if("visible"!==document.visibilityState||!t.current)return;const e=Date.now();Pe((t=>{const s=new Map;for(const[r,a]of t.entries())6e5>e-a.timestamp&&s.set(r,a);return s})),Me((e=>{const t=new Set;return Array.from(e).slice(-100).forEach((e=>t.add(e))),t})),ze((e=>({totalPrefetched:Math.min(e.totalPrefetched,1e3),successfulPrefetches:Math.min(e.successfulPrefetches,1e3),failedPrefetches:Math.min(e.failedPrefetches,100),cacheHits:Math.min(e.cacheHits,1e3)})))}),3e5);return()=>{clearInterval(e),Pe(new Map),Me(new Set)}}),[]);const Jt=U.useCallback((()=>{try{c(null),l(null);const e=new URLSearchParams(r.search);e.delete("genre"),e.delete("year");const a=e.get("category");if(a&&e.set("category",a),s("?"+e.toString(),{replace:!0}),de&&t.current){u([]),C(1),he(!0),pe(null),B(!0),et(!1),rt([]),Ye.current&&(Ye.current=!1);const e=setTimeout((()=>{t.current&&pt(de,1)}),100);Jt.timeoutId=e}}catch(e){}}),[s,de,pt]);return U.useEffect((()=>()=>{Jt.timeoutId&&(clearTimeout(Jt.timeoutId),Jt.timeoutId=null)}),[]),Y.jsxs(Ft.div,{ref:e=>{O.current=e,Z(e)},className:"min-h-screen bg-[#0F0F0F] text-white overflow-y-auto scrollbar-gutter-stable ultra-smooth-scroll momentum-scroll",exit:{opacity:0},children:[Y.jsxs("div",{className:"w-full px-4 py-8",children:[Y.jsxs("div",{className:"flex flex-col items-center gap-6",children:[Y.jsx("div",{className:"relative w-full",children:Y.jsx("div",{className:"relative max-w-xl mx-auto",children:Y.jsx(U.Suspense,{fallback:Y.jsx("div",{className:"w-full h-12 bg-gray-800 rounded-lg animate-pulse"}),children:Y.jsx(ls,{placeholder:"Search movies...",initialValue:a,onSearch:e=>{i(e),e.trim()?It(e,1):(te([]),ce(!1))},onSearchSubmit:e=>{dt.addToHistory(e,"movie")},onClear:()=>{i(""),te([]),ce(!1)},isLoading:se,showLoadingSpinner:!0,theme:"dark",variant:"floating",size:"md",showSuggestions:!0,suggestions:K.slice(0,5).map((e=>({title:e.title,name:e.title,id:e.id,poster_path:e.poster_path,year:e.release_date?new Date(e.release_date).getFullYear():null}))),onSuggestionSelect:e=>{const t=K.find((t=>t.id===e.id));t&&Lt(t)},searchHistory:ye,showHistory:!0,onHistorySelect:e=>{i(e),It(e,1),dt.incrementSearchCount(e)},clearHistory:()=>dt.clearHistoryByType("movie"),showTrendingSearches:!0,trendingSearches:Ne,onTrendingSelect:e=>{i(e),It(e,1),dt.addToHistory(e,"movie")}})})})}),!a&&Y.jsx("nav",{ref:$,className:"relative inline-flex rounded-full bg-[#1a1a1a] p-1 overflow-x-auto max-w-full horizontal-scroll-container scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},role:"tablist","aria-label":"Movie categories",children:Tt.map((e=>Y.jsxs("button",{onClick:()=>vt(e.id),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),vt(e.id))},role:"tab","aria-selected":de===e.id,"aria-label":e.name+" movies",tabIndex:de===e.id?0:-1,className:"relative px-4 py-0.5 rounded-full text-sm font-medium transition-colors duration-300 whitespace-nowrap focus:outline-none flex items-center gap-2 "+(de===e.id?"text-black":"text-gray-400 hover:text-white"),children:[os[e.id]&&Y.jsx("span",{className:"relative z-10 flex-shrink-0 streaming-icon-color-transition",style:{color:Ce(e.id)},children:(()=>{try{return os[e.id]()}catch(t){return null}})()}),Y.jsx("span",{className:"relative z-10",children:e.name}),de===e.id&&Y.jsx(Ft.div,{layoutId:"activeCategoryBackground",className:"absolute inset-0 bg-white rounded-full",variants:Te(),initial:"initial",animate:"animate",exit:"exit",transition:Se()})]},e.id)))}),Y.jsxs("div",{className:"flex gap-4 justify-center w-full",children:[Y.jsx(y,{selectedYear:o,onYearSelect:Ht,minYear:1900,maxYear:(new Date).getFullYear(),showAllYears:!0,className:"min-w-[120px]"}),Y.jsx(j,{genres:x,selectedGenre:n,onGenreSelect:St,multiSelect:!1,className:"min-w-[140px]"})]})]}),(o||n)&&Y.jsxs(Ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-center items-center gap-2 mt-4",children:[Y.jsx("span",{className:"text-sm text-gray-400",children:"Showing:"}),Y.jsxs("div",{className:"flex gap-2",children:[n&&Y.jsx("span",{className:"px-3 py-1 bg-white text-black text-sm rounded-full font-medium",children:n.name}),o&&Y.jsx("span",{className:"px-3 py-1 bg-white text-black text-sm rounded-full font-medium",children:o}),Y.jsx("button",{onClick:()=>Jt(),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded-full hover:bg-gray-500 transition-colors",children:"Clear All"})]})]}),Y.jsxs(Ft.div,{className:"w-full mt-8",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:[.25,.46,.45,.94]},role:"main","aria-label":de.replace("_"," ")+" movies grid",children:[xe?Y.jsx(N,{isLoading:!1,error:xe,retryCount:ht,onRetry:wt,context:de+" movies",className:"col-span-full"}):V&&0===d.length?Y.jsx(N,{isLoading:!0,error:null,retryCount:ht,onRetry:wt,context:de+" movies",className:"col-span-full",hasContent:d.length>0}):Y.jsxs(Ft.div,{variants:ds,initial:"hidden",animate:"visible",transition:{duration:.4,ease:[.25,.46,.45,.94],staggerChildren:.02,delayChildren:.05},className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 3xl:grid-cols-10 gap-4",role:"list","aria-label":`List of ${de.replace("_"," ")} movies`,children:["collections"===de?Ot.map(((e,t)=>e&&e.id?Y.jsx(hs,{collection:e,index:t,onClick:zt},"collection-"+e.id):null)):Ot.map(((e,t)=>e&&e.id?Y.jsx(ms,{movie:e,index:t,onClick:Lt,onPrefetch:qt,onImageLoad:_t,onImageError:Mt,isImageLoaded:!0===A[e.id]},"movie-"+e.id):null)),Xe&&Y.jsx(Y.Fragment,{children:Array.from({length:20},((e,t)=>Y.jsx(Ft.div,{variants:us,initial:"hidden",animate:"visible",className:"aspect-[2/3] rounded-lg overflow-hidden bg-gray-800",children:Y.jsx(Ft.div,{className:"w-full h-full bg-gray-800",animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},"loading-placeholder-"+t)))})]},`movies-grid-${de}-${n?.id||"all"}-${o||"all"}`),me?Y.jsx("div",{ref:G,className:"h-10"}):Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"h-20 flex items-center justify-center text-white/60 text-sm",children:d.length>0&&Y.jsxs("div",{className:"text-center",children:[Y.jsxs("p",{children:["🎬 You've reached the end of ","upcoming"===de?"upcoming":de," movies"]}),Y.jsx("p",{className:"text-xs text-white/40 mt-1",children:"Check back later for more content!"})]})})]},de),_&&Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"flex justify-center py-8",children:Y.jsxs("div",{className:"flex items-center space-x-3",children:[Y.jsxs("div",{className:"flex space-x-1",children:[Y.jsx(Ft.div,{className:"w-2 h-2 bg-white/40 rounded-full",animate:{opacity:[.4,1,.4]},transition:{duration:1.4,repeat:1/0,delay:0}}),Y.jsx(Ft.div,{className:"w-2 h-2 bg-white/40 rounded-full",animate:{opacity:[.4,1,.4]},transition:{duration:1.4,repeat:1/0,delay:.2}}),Y.jsx(Ft.div,{className:"w-2 h-2 bg-white/40 rounded-full",animate:{opacity:[.4,1,.4]},transition:{duration:1.4,repeat:1/0,delay:.4}})]}),Y.jsx("span",{className:"text-white/50 text-sm font-light",children:"Loading more..."})]})}),!1,Y.jsx(Vt,{children:g&&Y.jsx(U.Suspense,{fallback:null,children:Y.jsx(is,{movie:g,onClose:Pt,onMovieSelect:Rt,onGenreClick:e=>{e&&e.id&&(l(e),P(!1),f(null))}})})}),Y.jsx(Vt,{children:w&&Y.jsx(U.Suspense,{fallback:null,children:Y.jsx(ns,{collection:w,onClose:Et,onMovieSelect:Lt})})})]}),Y.jsx("style",{children:`\n        .custom-scrollbar::-webkit-scrollbar {\n          width: 6px;\n        }\n        \n        .custom-scrollbar::-webkit-scrollbar-track {\n          background: transparent;\n        }\n        \n        .custom-scrollbar::-webkit-scrollbar-thumb {\n          background: #4a4a4a;\n          border-radius: 3px;\n        }\n        \n        .custom-scrollbar::-webkit-scrollbar-thumb:hover {\n          background: #5a5a5a;\n        }\n        ${cs}\n      `}),Y.jsx(k,{})]})};xs.propTypes={};const ps=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"})),gs=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.a7))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url))),fs=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.ap))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url))),ws=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.ag))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url))),vs={popular:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:Y.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),top_rated:()=>Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Y.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"}),Y.jsx("path",{d:"M12 6v6l4 2"})]}),airing_today:()=>Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"w-4 h-4",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[Y.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),Y.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),Y.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),Y.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),netflix:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 16 16",className:"w-4 h-4",children:Y.jsx("path",{d:"M10 0v8L7 0H4v16h3V8l3 8h3V0z",fill:"currentColor"})}),prime:()=>Y.jsxs("svg",{viewBox:"0 0 92 89",xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8","aria-label":"Prime Video",fill:"none",children:[Y.jsx("title",{children:"Prime Video"}),Y.jsxs("g",{children:[Y.jsx("path",{d:"M6.93 48.53c-.22.01-.43-.06-.59-.2-.14-.17-.2-.38-.18-.6v-20.4c-.03-.22.04-.43.18-.6.17-.13.37-.19.58-.17h2.22c.42-.04.8.25.86.67l.22.8c.64-.62 1.39-1.1 2.22-1.43.85-.34 1.75-.52 2.66-.52 1.82-.06 3.56.75 4.68 2.18 1.24 1.71 1.85 3.78 1.74 5.89.03 1.53-.26 3.05-.86 4.45-.5 1.17-1.3 2.18-2.33 2.93-.99.68-2.18 1.03-3.38 1-.82 0-1.63-.13-2.4-.4-.71-.24-1.36-.61-1.93-1.1v6.72c.02.21-.04.43-.17.6-.17.13-.39.19-.6.17l-2.22-.01zm6.73-9.36c.99.07 1.94-.37 2.53-1.17.62-1.12.9-2.39.81-3.67.1-1.29-.18-2.58-.8-3.71-.59-.81-1.55-1.25-2.55-1.17-1.06 0-2.09.29-3 .83v8.05c.9.56 1.94.85 3 .85z",fill:"currentColor"}),Y.jsx("path",{d:"M25.32 42.21c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24V27.33c-.03-.22.04-.43.18-.6.17-.13.37-.19.58-.17h2.21c.42-.04.8.25.86.67l.4 1.64c.66-.77 1.44-1.42 2.32-1.92.72-.38 1.51-.57 2.32-.57h.43c.22-.02.43.04.61.17.14.17.2.38.18.6v2.58c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18h-.7c-.23 0-.51 0-.86 0-.58.01-1.15.08-1.72.2-.59.11-1.17.28-1.72.51v10.25c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18h-2.21z",fill:"currentColor"}),Y.jsx("path",{d:"M39.07 24.12c-.68.03-1.35-.2-1.87-.64-.48-.45-.74-1.09-.71-1.75-.03-.66.23-1.31.71-1.76 1.1-.88 2.65-.88 3.75 0 .48.45.74 1.09.71 1.75.03.66-.23 1.3-.71 1.75-.67.56-1.34.79-2.18.65zm-1.47 18.1c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24V27.33c-.03-.22.04-.43.18-.6.17-.13.37-.19.58-.17h2.95c.21-.02.43.04.6.17.13.17.19.39.17.6v14.12c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18l-2.94-.01z",fill:"currentColor"}),Y.jsx("path",{d:"M45.88 42.21c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24V27.33c-.03-.22.04-.43.18-.6.17-.13.37-.19.58-.17h2.21c.42-.04.8.25.86.67l.25.83c.91-.63 1.89-1.14 2.93-1.52.86-.3 1.75-.45 2.66-.46 1.58-.13 3.09.64 3.9 2 .91-.63 1.9-1.13 2.95-1.5.92-.31 1.89-.46 2.86-.46 1.23-.07 2.43.36 3.33 1.2.83.91 1.25 2.11 1.18 3.34v10.79c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18h-2.21c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24v-9.84c0-1.39-.62-2.09-1.87-2.09-1.16.01-2.31.29-3.35.8v11.14c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18h-2.21c-.36.07-.7-.17-.77-.53-.02-.08-.02-.16 0-.24v-9.84c0-1.39-.62-2.09-1.87-2.09-1.18.01-2.33.29-3.38.83v11.1c.02.21-.04.41-.17.58-.17.14-.38.21-.6.18l-2.21-.01z",fill:"currentColor"}),Y.jsx("path",{d:"M79.7 42.67c-2.15.14-4.27-.61-5.85-2.09-1.44-1.65-2.16-3.81-2-6-.14-2.27.59-4.5 2.04-6.25 1.51-1.56 3.64-2.39 5.81-2.27 1.61-.1 3.2.39 4.47 1.38 1.08.92 1.67 2.29 1.61 3.7.07 1.38-.59 2.71-1.74 3.48-1.55.89-3.33 1.3-5.11 1.18-1.01.01-2.02-.1-3-.34.01 1.11.45 2.16 1.24 2.94.93.66 2.07.98 3.21.89.56 0 1.12-.04 1.67-.11.76-.12 1.52-.28 2.26-.48h.18c.1 0 .15 0 .15 0 .35 0 .52.24.52.71v1.41c.02.24-.03.48-.14.69-.14.17-.33.29-.54.35-1.23.34-2.85.61-4.48.58zm-1-9.63c.79.06 1.57-.11 2.27-.48.48-.33.75-.88.71-1.46 0-1.29-.77-1.93-2.3-1.93-1.97 0-3.1 1.21-3.41 3.62.89.17 1.8.25 2.71.25z",fill:"currentColor"}),Y.jsx("path",{d:"M78.09 59.44c-8.76 6.46-21.46 9.89-32.39 9.89-14.61.08-28.72-5.29-39.57-15.07-.82-.74-.09-1.75.9-1.18 12.06 6.89 25.71 10.5 39.59 10.49 10.36-.06 20.61-2.15 30.16-6.17 1.12-.47 2.36 1.09.81 2.04z",fill:"currentColor"}),Y.jsx("path",{d:"M81.78 55.33c-1.12-1.43-7.4-.68-10.23-.34-.86.1-1-.64-.22-1.18 5-3.52 13.23-2.5 14.18-1.32.95 1.18-.25 9.41-5 13.34-.72.6-1.41.28-1.09-.52.99-2.16 3.36-8.06 2.36-9.28z",fill:"currentColor"})]})]}),hbo:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",className:"w-8 h-8",children:Y.jsx("path",{d:"M13 12.07v13.78H9.2v-5.08H6.79v5.08H3V12.07h3.79v5.24H9.2v-5.24Zm17 4.11A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18Zm0 0A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18Zm0 0A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18Zm0 0A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18ZM30 12a7 7 0 0 0-6.41 4.17 3.83 3.83 0 0 0-1.08-3 4.63 4.63 0 0 0-3.37-1H13.8v13.71h5.33a4 4 0 0 0 3.05-.88 4.38 4.38 0 0 0 1.28-3.46A7 7 0 1 0 30 12ZM19.66 22.36a1.24 1.24 0 0 1-.82.29h-1.69v-2.1h1.69A1 1 0 0 1 20 21.62a.94.94 0 0 1-.34.74Zm0-5.07a1.16 1.16 0 0 1-.82.31h-1.7v-2.18h1.67a1.36 1.36 0 0 1 .92.24 1.13 1.13 0 0 1 .27.86 1 1 0 0 1-.33.77Zm1.94 1.63c.29-.18 1-.44 1.42-.72a7 7 0 0 0-.02.8 5.33 5.33 0 0 0 .08 1 9 9 0 0 0-1.47-1.08Zm8.4 3.54A3.46 3.46 0 1 1 33.45 19 3.46 3.46 0 0 1 30 22.46Zm0-6.28A2.82 2.82 0 1 0 32.81 19 2.82 2.82 0 0 0 30 16.18Z",fill:"currentColor"})}),hulu:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"5.348 31.697 89.762 29.228",className:"w-8 h-8",children:Y.jsx("path",{d:"M95.109 40.81h-7.148v11.781c0 .532-.207.984-.539 1.354-.334.329-.791.493-1.329.533h-4.155c-.582-.041-1.039-.205-1.372-.533-.333-.369-.54-.82-.54-1.354V40.81h-7.147v12.397c.042 1.643.333 3.078 1.04 4.227.705 1.15 1.619 2.012 2.824 2.586 1.248.574 2.66.904 4.279.904h6.941v-.082c1.496 0 2.783-.328 3.864-.944a6.405 6.405 0 0 0 2.411-2.71c.58-1.149.871-2.505.871-3.982V40.81zm-71.518.739c-1.247-.533-2.618-.78-4.114-.739h-4.613l-1.787.206c-.416.123-.624.205-.624.205v-9.524H5.348v29.228h7.106V49.102c.042-.493.208-.985.582-1.313.374-.328.79-.533 1.371-.533h4.156c.499 0 .956.207 1.33.533.374.329.54.821.582 1.313v11.823h7.106V48.199c0-1.766-.374-3.202-1.08-4.311-.749-1.067-1.705-1.846-2.91-2.339zm24.185 11.043c-.042.532-.208.983-.54 1.354-.374.328-.831.492-1.371.532h-4.156c-.54-.041-.997-.205-1.33-.532-.374-.37-.54-.821-.582-1.354V40.81h-7.106v12.397c0 1.643.333 3.078.998 4.227.665 1.15 1.62 2.012 2.826 2.586 1.247.574 2.618.904 4.28.904h6.981v-.082c1.496 0 2.785-.328 3.824-.944a6.778 6.778 0 0 0 2.451-2.71c.54-1.149.832-2.505.873-3.982V40.81h-7.148v11.782zm12.55 8.333h7.106V31.697h-7.106v29.228z",fill:"currentColor"})}),disney:()=>Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 192.756 192.756",className:"w-9 h-9",children:Y.jsx("path",{d:"M96.954 66.126a5.674 5.674 0 0 1 3.451 1.38c1.312 1.242 1.656 3.313 1.035 4.97-2.414 4.969-8.155 8.288-12.078 9.386-2.347.552-5.314.552-7.454-.276-1.036.621-1.91 2.628-3.175 1.794-1.831-1.43-.246-3.668-1.303-5.256-.218-.327-.767-.351-1.043-.886-1.45-3.175.345-6.212 2.346-8.627 3.336-3.722 12.907-7.869 18.221-2.485zM85.842 68.61c-1.864.345-3.969 1.156-5.107 2.485-1.139 1.328-1.863 2.623-1.173 4.003 2.416-1.794 3.589-4.279 6.281-5.797-.001-.277.413-.484-.001-.691zm11.251.691c-4.763-.415-8.352 3.175-11.734 6.625-.207.552-1.449 1.173-.483 1.794 4.556.414 8.904-.896 12.217-3.934.967-.897 1.655-2.07 1.174-3.313-.207-.482-.694-.965-1.174-1.172zM138.364 89.868c2.209 5.384 4.072 13.872 0 19.049-1.104 1.242-3.036 2.387-4.278 1.449-4.556-3.657-6.487-8.903-9.317-13.597-.414-.207-.414.346-.621.553-1.035 4.762.897 10.974-2.346 14.7-1.242.207-2.404-.432-2.83-1.656-1.588-4.9.067-10.008.481-14.908.967-2.485 1.381-5.383 3.521-7.247 3.451 1.38 5.107 5.246 7.107 8.076 1.451 2.139 2.623 4.555 4.279 6.487 1.449-.621.736-2.515.691-3.658-.554-4.486-1.796-8.627-2.97-12.906-.067-1.104-.688-2.968.483-3.658 3.11 1.381 4.419 4.624 5.8 7.316zM117.521 88.211c0 1.036-.828 2.33-1.52 2.485-6.625 1.035-14.01.414-20.221 2.484-.207.759.69.897 1.173 1.104 5.313.828 10.905 1.035 16.082 2.347 2.737.695 3.728 3.935 3.935 6.626.127 2.122-.689 4.693-2.761 6.143-5.106 3.244-12.905 3.105-18.083.139-1.979-1.11-3.865-2.898-4.003-5.107.012-1.754.76-3.135 2.002-3.796 4.97-2.002 11.112-.896 15.392 1.656.274 1.381-1.22 1.306-1.935 1.795-4.763 2.761-8.351-3.104-12.768-.967-.621.414-1.07 1.569-.345 1.933 5.452 2.416 11.526.69 16.909-.828.621-.207 1.381-.828 1.449-1.449-.207-2.209-2.691-2.691-4.279-3.312-4.693-1.173-9.869-1.173-14.908-1.656-.966-.207-2.197-.88-2.484-1.656-.552-1.656-.552-3.934.69-5.314 6.418-5.66 16.149-5.176 24.293-3.658.553.203 1.174.41 1.382 1.031zM87.361 90.834c.621 6.625.966 12.769.828 19.739-.138.896-1.173 1.104-1.863 1.449-1.104.207-2.531-.028-2.968-.621-1.587-2.555-1.035-6.004-1.173-9.11.207-4.899.138-10.214 1.519-14.77.264-.662 1.035-1.242 1.656-.829 1.656.829 1.932 2.486 2.001 4.142zM164.041 89.868c.332.558.679 1.42 0 1.794-3.106 1.38-7.315.759-10.905 1.173-.966.828-1.726 2.208-1.382 3.451.347.207.656.522 1.037.482 2.207.139 5.521-1.035 6.972 1.035.354.616-.048 2.916-1.035 2.968-2.693.347-7.121-.338-8.422.347-1.656 1.104-1.519 3.243-2.14 4.97 1.174.759 2.403-.018 3.795-.208 2.556-.414 5.386-1.173 7.938-.621.483.897 1.174 1.864.69 2.968-4.351 3.451-9.963 6.988-15.942 4.486-2.244-1.006-3.244-4.417-2.484-7.314.482-2.071 2.621-4.072 1.311-6.281-.207-.967.346-1.794 1.174-2.001 2.277 0 1.793-2.83 2.967-4.142-1.311-1.449-4.623-1.38-4.278-4.279 1.588-.828 3.521-.552 5.313-.828 4.072-.829 8.627-1.312 12.771-.829.825.166 1.93 1.794 2.62 2.829zM65.482 74.132c6.369 5.206 14.632 14.08 13.597 24.294-1.243 8.076-9.801 14.149-17.048 16.082-7.04 2.07-15.874 1.863-23.053.207-.483 1.312-.966 2.898-2.484 3.451-.966.345-2.209.138-2.968-.483-2.139-2.002-.414-5.867-3.52-7.108-6.074-2.554-12.631-7.593-15.736-13.804-.414-1.242.069-2.484.828-3.45 4.763-3.796 10.767-5.314 16.772-6.488.345.138.207-.345.483-.483.345-4.141.483-8.352 1.794-12.079.299-.523 1.035-.69 1.519-.345 3.796 2.898 2.001 8.352 3.658 12.285 7.247.345 14.494.69 20.222 4.763 1.933 1.587 2.404 4.618 1.794 6.35-.609 1.729-2.622 2.968-4.486 3.104-1.243 0-3.589.121-3.451-.827.138-.949 4.222-2.502 2.968-3.797-1.803-1.861-10.824-2.968-16.415-3.658-.69-.138-1.323.069-1.323.828-.138 5.245-.552 11.042.345 16.082.069.346.483.76.829.827 9.869 1.588 20.291.69 28.021-4.969 3.589-2.897 4.763-6.972 4.141-11.457-3.106-12.492-16.15-20.016-26.848-24.847-10.421-4.555-21.948-6.902-34.302-6.28-1.967.144-5.084.823-5.107 1.519-.023.696 3.531.477 3.105 1.794-.425 1.316-4.037.535-5.107.207-1.07-.328-.966-1.864-.69-2.83 2.692-4.762 10.204-5.147 13.597-5.314 18.772-.484 36.925 6.665 48.865 16.426zM31.663 92.629c-4.763.069-9.801.552-14.218 2.208-.897.345-2.002 1.311-1.312 2.485 1.794 2.415 4.36 4.398 6.764 5.797 2.404 1.397 5.591 3.175 8.49 3.59.69-4.487.69-8.904.621-13.528-.277-.138-.001-.414-.345-.552zM174.323 86.348c-.207 6.004-5.799 9.732-5.799 15.736.207.207.347.483.621.347 4.488-4.901 8.904-11.872 15.461-13.942 1.728-.138 3.289 1.363 3.935 2.485 2.278 4.555 1.728 10.974-1.448 15.115-3.277 4.065-8.974 8.144-15.459 7.453-2.691 6.626-4.558 13.597-5.593 20.844-.552 1.449-1.862.138-2.69-.138-5.59-4.417-1-16.11-.621-17.602.379-1.488 1.875-4.998 2.969-7.937-2.623-4.692-.967-10.353 1.172-14.701 1.656-2.899 3.936-5.798 6.627-8.006.342.001.618.07.825.346zm11.114 7.454c-.828-.138-1.174.967-1.863 1.174-3.174 3.589-6.35 7.178-7.938 11.457 2.141.276 3.934-1.104 5.799-1.863 3.174-2.002 5.176-5.313 4.969-9.11-.139-.623-.691-1.106-.967-1.658z",fill:"currentColor"})}),apple:()=>Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120",className:"w-8 h-8",children:[Y.jsx("path",{d:"M46.55 58.84a9.81 9.81 0 0 1 4.69-8.25 10.14 10.14 0 0 0-7.93-4.3c-3.37-.34-6.59 2-8.3 2s-4.35-1.94-7.15-1.88a10.58 10.58 0 0 0-9 5.43c-3.82 6.63-1 16.46 2.75 21.84 1.82 2.62 4 5.59 6.84 5.48s3.78-1.77 7.1-1.77 4.25 1.77 7.16 1.71 4.82-2.68 6.63-5.32a23.62 23.62 0 0 0 3-6.17 9.53 9.53 0 0 1-5.79-8.77zm-5.45-16.1a9.54 9.54 0 0 0 2.25-6.93A9.72 9.72 0 0 0 37 39.1a9 9 0 0 0-2.3 6.7 8 8 0 0 0 6.4-3.06z",fill:"currentColor"}),Y.jsx("path",{d:"M72 52.85v-5h-6.09v-7H60.5v7h-4.72v5h4.72V71a8.13 8.13 0 0 0 8.12 8.12h2.71v-5.38h-2.71A2.72 2.72 0 0 1 65.91 71V52.85zm25.3-6.4-8.12 24.38-8.13-24.38h-5.42L86.47 79h5.42l10.83-32.51z",fill:"currentColor"})]})},bs={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.4,ease:[.25,.46,.45,.94],staggerChildren:.02,delayChildren:.05}}};if("undefined"!=typeof document&&!document.getElementById("series-page-scroll-styles")){const e=document.createElement("style");e.id="series-page-scroll-styles",e.textContent="\n  .ultra-smooth-scroll {\n    scroll-behavior: smooth;\n    -webkit-overflow-scrolling: touch;\n    overscroll-behavior: contain;\n    scroll-snap-type: x proximity;\n    scroll-padding: 1rem;\n    transform: translate3d(0, 0, 0);\n    backface-visibility: hidden;\n    perspective: 1000px;\n    will-change: scroll-position, transform;\n    contain: layout style paint;\n    isolation: isolate;\n  }\n",document.head.appendChild(e)}const ys={hidden:{opacity:0,y:10,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:30,mass:.8}}},js=({series:e,onSeriesClick:s,onShowEpisodes:r,index:a=0})=>{const{watchlist:i,addToWatchlist:n,removeFromWatchlist:l}=t(),[o,c]=U.useState({}),d=U.useRef(null),u=U.useRef(null),m=U.useRef(null),h=U.useRef(!1);if(U.useEffect((()=>{h.current="ontouchstart"in window||navigator.maxTouchPoints>0}),[]),U.useEffect((()=>()=>{m.current&&(clearTimeout(m.current),m.current=null),d.current=null,u.current=null}),[]),!e||"object"!=typeof e)return null;const x=i.some((t=>t.id===e.id)),[p,g]=U.useState(!1),f=U.useCallback((async t=>{if(m.current)return clearTimeout(m.current),void(m.current=null);m.current=setTimeout((()=>{m.current=null}),300);try{g(!0);const t=s(e);t&&"function"==typeof t.then&&await t}finally{g(!1)}}),[s,e]),w=U.useCallback((e=>{d.current={x:e.touches[0].clientX,y:e.touches[0].clientY,time:Date.now()}}),[]),y=U.useCallback((e=>{if(!d.current)return;u.current={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY,time:Date.now()};const t=d.current,s=u.current,r=Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2)),a=s.time-t.time;10>r&&300>a&&f(e),d.current=null,u.current=null}),[f]),j=e.name??e.title??"Unknown Title",N=e.first_air_date?new Date(e.first_air_date).getFullYear():e.release_date?new Date(e.release_date).getFullYear():null,k=e.vote_average??e.rating??0;return Y.jsx(Ft.div,{className:"group cursor-pointer transform transition-all duration-300 hover:scale-105 touch-manipulation select-none",onClick:f,onTouchStart:w,onTouchEnd:y,style:{WebkitTapHighlightColor:"transparent",WebkitTouchCallout:"none",WebkitUserSelect:"none",userSelect:"none",touchAction:"manipulation"},children:Y.jsxs("div",{className:"group aspect-[2/3] rounded-lg overflow-hidden bg-gray-800 relative",children:[Y.jsx(b,{rating:k,position:"top-left",size:"default"}),Y.jsx(Vt,{children:Y.jsx(Ft.button,{onClick:t=>{t.stopPropagation(),x?l(e.id):n({...e,title:e.name||e.title,type:"tv"})},className:"absolute top-2 right-2 z-10 p-2 bg-black/50 rounded-full transition-colors transition-opacity duration-300 hover:bg-black/70 opacity-0 group-hover:opacity-100","aria-label":x?"Remove from watchlist":"Add to watchlist",whileHover:{scale:1.1},whileTap:{scale:.9},children:x?Y.jsx(Ft.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",viewBox:"0 0 24 24",fill:"currentColor",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},children:Y.jsx("path",{fillRule:"evenodd",d:"M6.32 2.577a49.255 49.255 0 0111.36 0c1.497.174 2.57 1.46 2.57 2.93V21L12 17.5 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93z",clipRule:"evenodd"})},"bookmarked"):Y.jsx(Ft.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2},children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.5 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"})},"not-bookmarked")})}),e.poster_path?Y.jsxs(Y.Fragment,{children:[Y.jsx("img",{src:(S=e.poster_path,S?C(S,"w500"):"/placeholder-image.jpg"),alt:j,loading:12>a?"eager":"lazy",decoding:"async",fetchpriority:12>a?"high":"auto",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 "+(o[e.id]?"opacity-100":"opacity-0"),sizes:"(max-width: 640px) 50vw, (max-width: 1024px) 33vw, (max-width: 1280px) 25vw, (max-width: 1536px) 16vw, 12vw",onLoad:()=>{return t=e.id,void c((e=>({...e,[t]:!0})));var t}}),!o[e.id]&&Y.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:Y.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-white/20 border-t-white/60"})})]}):Y.jsx("div",{className:"w-full h-full bg-gray-800 flex items-center justify-center",children:Y.jsx("span",{className:"text-white/60 text-center p-2",children:j})}),p&&Y.jsx(v,{}),Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex items-end p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out",children:Y.jsxs("div",{className:"text-white",children:[Y.jsx("h4",{className:"font-medium text-sm truncate",children:j}),Y.jsxs("p",{className:"text-xs text-gray-300 flex items-center gap-1",children:[N," •",Y.jsxs("span",{className:"flex items-center",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-yellow-400 mr-1",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),T(k)]})]})]})})]})});var S};js.propTypes={series:It.shape({id:It.oneOfType([It.number,It.string]).isRequired,name:It.string,title:It.string,poster_path:It.string,backdrop_path:It.string,vote_average:It.number,rating:It.number,first_air_date:It.string,release_date:It.string,genre_ids:It.arrayOf(It.number),overview:It.string}).isRequired,onSeriesClick:It.func.isRequired,onShowEpisodes:It.func,index:It.number};const Ns=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=U.useRef(!0),s=Q(),[r,a]=U.useState([]),[i,n]=U.useState(!0),[l,o]=U.useState(!1),[c,d]=U.useState(null),[u,m]=U.useState(null),[h,x]=U.useState("popular"),[p,g]=U.useState(1),[f,w]=U.useState(!0);U.useState({});const[v,b]=U.useState(null),[C,T]=U.useState(null),[_,M]=U.useState(!1),[L,P]=U.useState(!1),[E,z]=U.useState([]),[R,I]=U.useState(""),[A,F]=U.useState([]),[V,B]=U.useState(!1),[D,H]=U.useState(1),[W,O]=U.useState(!0);U.useState({popular:!1,topRated:!1,airingToday:!1});const $=U.useRef(null),q=U.useRef(null),{ref:Z,inView:G}=ee({threshold:.1,triggerOnce:!1});U.useState(!1),U.useState(!1);const[J,te]=U.useState([]),[se,re]=U.useState([]),[ae,ie]=U.useState(!1),[ne,le]=U.useState(!1),[oe,ce]=U.useState(null),[de,ue]=U.useState(!1),[me,he]=U.useState(0);t();const[xe,pe]=U.useState(!1);U.useEffect((()=>{const e=()=>{const e=ve.find((e=>e.id===h));return e?.label||"TV Series"},t=()=>{let t="Streamr - TV Series";return t=R?`Search: ${R} - Streamr`:v&&C?`${v.name} TV Shows from ${C} - Streamr`:v?v.name+" TV Shows - Streamr":C?`TV Shows from ${C} - Streamr`:e()+" TV Series - Streamr",t},s=()=>R?`Search results for "${R}" in TV series. Discover your next favorite show on Streamr.`:v&&C?`Browse ${v.name} TV shows from ${C}. Stream thousands of series on Streamr.`:v?`Explore the best ${v.name} TV shows. Watch trending series on Streamr.`:C?`Discover TV shows released in ${C}. Stream classic and new series on Streamr.`:`Discover ${e()} TV series. Watch thousands of shows across all genres on Streamr.`;document.title=t();let r=document.querySelector('meta[name="description"]');r||(r=document.createElement("meta"),r.setAttribute("name","description"),document.head.appendChild(r)),r.setAttribute("content",s());let a=document.querySelector('meta[property="og:title"]');a||(a=document.createElement("meta"),a.setAttribute("property","og:title"),document.head.appendChild(a)),a.setAttribute("content",t());let i=document.querySelector('meta[property="og:description"]');i||(i=document.createElement("meta"),i.setAttribute("property","og:description"),document.head.appendChild(i)),i.setAttribute("content",s());let n=document.querySelector('meta[property="og:type"]');n||(n=document.createElement("meta"),n.setAttribute("property","og:type"),document.head.appendChild(n)),n.setAttribute("content","website");let l=document.querySelector('link[rel="canonical"]');l||(l=document.createElement("link"),l.setAttribute("rel","canonical"),document.head.appendChild(l));const o=window.location.origin,c=new URLSearchParams;"popular"!==h&&c.set("category",h),v&&c.set("genre",v.name.toLowerCase()),C&&c.set("year",C);const d=c.toString();return l.setAttribute("href",`${o}/series${d?"?"+d:""}`),()=>{document.title="Streamr"}}),[h,R,v,C]);const{getIconColor:ge,getBackgroundTransition:fe,getRubberBandVariants:we}=Ie(h),ve=K.useMemo((()=>[{id:"popular",label:"Popular",networkId:null},{id:"top_rated",label:"Top Rated",networkId:null},{id:"airing_today",label:"Airing Today",networkId:null},{id:"netflix",label:"Netflix",networkId:213},{id:"prime",label:"Prime Video",networkId:1024},{id:"hbo",label:"HBO",networkId:49},{id:"hulu",label:"Hulu",networkId:453},{id:"disney",label:"Disney+",networkId:2739},{id:"apple",label:"Apple TV+",networkId:2552}]),[]);Array.from({length:10},((e,t)=>(new Date).getFullYear()-t)),U.useEffect((()=>{const e=e=>{const t=q.current;if(!t||R)return;const s=Array.from(t.querySelectorAll("button")),r=ve.findIndex((e=>e.id===h));if("ArrowLeft"===e.key&&r>0){e.preventDefault();const t=ve[r-1];Se(t.id),s[r-1]?.focus()}else if("ArrowRight"===e.key&&r<ve.length-1){e.preventDefault();const t=ve[r+1];Se(t.id),s[r+1]?.focus()}else if("Home"===e.key){e.preventDefault();const t=ve[0];Se(t.id),s[0]?.focus()}else if("End"===e.key){e.preventDefault();const t=ve[ve.length-1];Se(t.id),s[s.length-1]?.focus()}};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[h,ve,R]),U.useEffect((()=>{const e=setTimeout((()=>{const e=q.current;if(!e)return;const t=t=>{t.preventDefault(),e.scrollLeft+=t.deltaY};return e.addEventListener("wheel",t,{passive:!1}),()=>{e&&e.removeEventListener("wheel",t)}}),100);return()=>{clearTimeout(e)}}),[R]),U.useEffect((()=>{const e=()=>{const e=dt.getHistoryByType("tv"),t=dt.getTrendingSearches(5);te(e.map((e=>e.query))),re(t)};return e(),dt.subscribe((()=>{e()}))}),[]),U.useEffect((()=>{if(G&&f&&!i&&!l){const t=setTimeout((()=>{e.current&&Ne()}),100);return()=>{clearTimeout(t)}}}),[G,f,i,l]),U.useEffect((()=>{const e=()=>{const e=768>window.innerWidth||window.navigator&&window.navigator.userAgent&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent);pe(e)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const be=K.useCallback((async t=>{try{const s=await mt();if(t?.aborted)return;const r=(s.genres||[]).filter((e=>!e.type||"tv"===e.type||"both"===e.type));e.current&&!t?.aborted&&z(r)}catch(s){if(t?.aborted)return}}),[]),ye=K.useCallback((async(t=h,s)=>{try{e.current&&!s?.aborted&&n(!0);const r=ve.find((e=>e.id===t))?.networkId;let i;if(r)i=await ht(r,1);else switch(t){case"popular":default:i=await He(1);break;case"top_rated":i=await De(1);break;case"airing_today":i=await Be(1)}if(s?.aborted)return;let l=[],o=1,c=1;if(i&&(i.movies&&Array.isArray(i.movies)?(l=i.movies,o=i.totalPages||1,c=i.currentPage||1):i.results&&Array.isArray(i.results)?(l=i.results,o=i.totalPages||1,c=i.page||1):Array.isArray(i)&&(l=i)),l.length>0){const t=l.map((e=>e.title&&e.poster&&!e.name?{...e,type:"tv",name:e.title,poster_path:e.poster,backdrop_path:e.backdrop,first_air_date:e.year?e.year+"-01-01":null,vote_average:parseFloat(e.rating)||0,rating:S(e.rating),number_of_seasons:e.seasons||0,overview:e.overview||"",genre_ids:e.genre_ids||[],networks:e.networks||[]}:{...e,type:"tv",title:e.name||e.title,year:e.first_air_date?e.first_air_date.split("-")[0]:"N/A",rating:S(e.vote_average),duration:`${e.number_of_seasons||0} Season${1!==(e.number_of_seasons||0)?"s":""}`,backdrop:e.backdrop_path,image:e.poster_path,overview:e.overview,genre_ids:Array.isArray(e.genre_ids)?e.genre_ids:Array.isArray(e.genres)?e.genres.map((e=>"object"==typeof e?e.id:e)):[],networks:e.networks}));!s?.aborted&&e.current&&(a(t),w(o>c),g(c))}else s?.aborted||d("No series available")}catch(r){if(s?.aborted)return;d(ot.getErrorMessage(r,"TV series"))}finally{!s?.aborted&&e.current&&n(!1)}}),[h,ve]);U.useEffect((()=>{e.current=!0;const t=new AbortController,{signal:s}=t;return be(s),ye(h,s),()=>{e.current=!1,t.abort(),$.current&&$.current.disconnect()}}),[be,ye,h]);const je=U.useCallback((async()=>{he((e=>e+1)),d(null);try{await ye(h)}catch(e){d(ot.getErrorMessage(e,"TV series"))}}),[h,ye]),Ne=U.useCallback((async()=>{if(!i&&!l)try{o(!0);const e=p+1,t=ve.find((e=>e.id===h))?.networkId;let s;if(t)s=await ht(t,e);else switch(h){case"popular":default:s=await He(e);break;case"top_rated":s=await De(e);break;case"airing_today":s=await Be(e)}let r=[],i=1,n=e;if(s&&(s.movies&&Array.isArray(s.movies)?(r=s.movies,i=s.totalPages||1,n=s.currentPage||e):s.results&&Array.isArray(s.results)?(r=s.results,i=s.totalPages||1,n=s.page||e):Array.isArray(s)&&(r=s)),r.length>0){const e=r.map((e=>e.title&&e.poster&&!e.name?{...e,type:"tv",name:e.title,poster_path:e.poster,backdrop_path:e.backdrop,first_air_date:e.year?e.year+"-01-01":null,vote_average:parseFloat(e.rating)||0,rating:S(e.rating),number_of_seasons:e.seasons||0,overview:e.overview||"",genre_ids:e.genre_ids||[],networks:e.networks||[]}:{...e,type:"tv",title:e.name||e.title,year:e.first_air_date?e.first_air_date.split("-")[0]:"N/A",rating:S(e.vote_average),duration:`${e.number_of_seasons||0} Season${1!==(e.number_of_seasons||0)?"s":""}`,backdrop:e.backdrop_path,image:e.poster_path,overview:e.overview,genre_ids:Array.isArray(e.genre_ids)?e.genre_ids:Array.isArray(e.genres)?e.genres.map((e=>"object"==typeof e?e.id:e)):[],networks:e.networks}));a((t=>{const s=new Set(t.map((e=>e.id))),r=e.filter((e=>!s.has(e.id)));return[...t,...r]})),w(i>n),g(n)}else d("No more series available")}catch(e){d(ot.getErrorMessage(e,"more TV series"))}finally{o(!1)}}),[i,l,p,h,ve]),ke=X();U.useEffect((()=>{const e=new URLSearchParams(ke.search),t=e.get("category"),s=e.get("genre"),r=e.get("year");if(t&&t!==h&&Se(t),s&&E.length>0&&!v){const e={action:28,adventure:12,animation:16,comedy:35,crime:80,documentary:99,drama:18,family:10751,fantasy:14,history:36,horror:27,music:10402,mystery:9648,romance:10749,"sci-fi":878,"tv movie":10770,thriller:53,war:10752,western:37}[s.toLowerCase()];if(e){const t=E.find((t=>t.id===e));t&&b(t)}}if(r&&!C){const e=parseInt(r);!e||1900>e||e>(new Date).getFullYear()||T(e)}return()=>{ae&&ie(!1)}}),[ke.search,E,h,v,C]);const Ce=U.useCallback((()=>{try{T(null),b(null);const e=new URLSearchParams(ke.search);e.delete("genre"),e.delete("year");const t=e.get("category");t&&e.set("category",t),s("?"+e.toString(),{replace:!0}),h&&(a([]),g(1),w(!0),d(null),n(!0),o(!1),ye(h))}catch(e){}}),[s,h]),Se=U.useCallback((async e=>{if(h===e||ae)return;ie(!0),x(e),a([]),g(1),w(!0),d(null),n(!0),o(!1);const t=new URLSearchParams(ke.search);if(t.set("category",e),v){const e="object"==typeof v?v.id:v,s=E.find((t=>t.id===e))?.name;s&&t.set("genre",s.toLowerCase())}else t.delete("genre");C?t.set("year",C.toString()):t.delete("year"),s("?"+t.toString(),{replace:!0});try{await ye(e)}catch(r){d("Failed to load series: "+(r.message||"Unknown error")),a([]),w(!1)}finally{n(!1),setTimeout((()=>{ie(!1)}),400)}}),[h,ae,s,v,C,E]),Te=async e=>{try{const t=await Ae(e.id,"tv");if(!t)return void d("Series not found or unavailable");const s={...t,type:"tv",title:t.name??t.title??"Unknown Title",name:t.name??t.title??"Unknown Title",release_date:t.first_air_date??t.release_date??null,year:t.first_air_date??t.release_date?new Date(t.first_air_date??t.release_date).getFullYear():null,runtime:t.episode_run_time?.[0]??null,networks:t.networks?.map((e=>e.name)).join(", ")??"N/A",number_of_seasons:t.number_of_seasons??0,number_of_episodes:t.number_of_episodes??0,status:t.status??"Unknown",similar:t.similar?.results??[],videos:t.videos?.results??[],credits:{cast:t.credits?.cast??[],crew:t.credits?.crew??[]}};m(s)}catch(t){d("Failed to load series details")}},_e=U.useCallback((async e=>{T(e);const t=new URLSearchParams(ke.search);e?t.set("year",e.toString()):t.delete("year"),s("?"+t.toString(),{replace:!0})}),[s]),Me=U.useCallback((async e=>{if(e)if("object"==typeof e&&e.id)b(e);else{const t=E.find((t=>t.id===e||t.id+""==e+""));b(t||null)}else b(null);const t=new URLSearchParams(ke.search);if(e){const s="object"==typeof e?e.name:(E.find((t=>t.id+""==e+""))||{}).name;s&&t.set("genre",s.toLowerCase())}else t.delete("genre");s("?"+t.toString(),{replace:!0})}),[s]),Le=async e=>{try{ue(!0),ce(e),le(!0),await xt.getAllSeasons(e.id)}catch(t){d("Failed to load episode information")}finally{ue(!1)}},Pe=U.useCallback((async(e,t=1)=>{if(!e.trim())return F([]),void O(!1);try{B(!0);const s=await ct(e,t,{searchType:"multi"}),r=(s.results||[]).filter((e=>!e?.media_type||"tv"===e.media_type)).map((e=>{if(!e||"object"!=typeof e)return null;const t={id:e.id??e.movie_id??e.tv_id??null,name:e.name??e.title??"Unknown Title",title:e.title??e.name??"Unknown Title",poster_path:e.poster_path??e.poster??"",backdrop_path:e.backdrop_path??e.backdrop??"",overview:e.overview??e.description??"",first_air_date:e.first_air_date??e.release_date??"",release_date:e.release_date??e.first_air_date??"",vote_average:e.vote_average??e.rating??0,vote_count:e.vote_count??0,popularity:e.popularity??0,genre_ids:e.genre_ids??e.genres??[],media_type:e.media_type??"tv",original_language:e.original_language??"en",original_name:e.original_name??e.original_title??"",original_title:e.original_title??e.original_name??"",adult:e.adult??!1,video:e.video??!1,known_for_department:e.known_for_department??"",profile_path:e.profile_path??"",known_for:e.known_for??[]};return t.id&&(t.name||t.title)?t:null})).filter(Boolean);if(1===t)F(r);else{const e=new Set(A.map((e=>e.id))),t=r.filter((t=>!e.has(t.id)));F((e=>[...e,...t]))}O(s.page<s.total_pages)}catch(s){d("Failed to search series")}finally{B(!1)}}),[]),Ee=U.useCallback((async()=>{if(R.trim()&&W&&!V)try{B(!0);const e=D+1,t=await ct(R,e,{searchType:"multi"});if(t.results){const s=(t.results||[]).filter((e=>!e?.media_type||"tv"===e.media_type)).map((e=>e&&"object"==typeof e?{id:e.id??e.movie_id??e.tv_id??null,name:e.name??e.title??"Unknown Title",title:e.title??e.name??"Unknown Title",poster_path:e.poster_path??e.poster??"",backdrop_path:e.backdrop_path??e.backdrop??"",overview:e.overview??e.description??"",first_air_date:e.first_air_date??e.release_date??"",release_date:e.release_date??e.first_air_date??"",year:e.first_air_date??e.release_date?new Date(e.first_air_date??e.release_date).getFullYear():null,vote_average:e.vote_average??e.rating??0,vote_count:e.vote_count??0,popularity:e.popularity??0,genre_ids:e.genre_ids??e.genres??[],media_type:e.media_type??"tv",original_language:e.original_language??"en",original_name:e.original_name??e.original_title??"",original_title:e.original_title??e.original_name??"",adult:e.adult??!1,video:e.video??!1,known_for_department:e.known_for_department??"",profile_path:e.profile_path??"",known_for:e.known_for??[]}:null)).filter(Boolean);F((e=>{const t=new Set(e.map((e=>e.id))),r=s.filter((e=>!t.has(e.id))),a=[...e,...r];return a.length>200?a.slice(-200):a})),O(t.page<t.total_pages),H(e)}}catch(e){}finally{B(!1)}}),[R,W,V,D]);U.useEffect((()=>{if(G&&W&&!V&&R.trim()){const t=setTimeout((()=>{e.current&&Ee()}),100);return()=>{clearTimeout(t)}}}),[G,W,V,R,Ee]);const ze=U.useCallback((e=>e.filter((e=>{if(!e||"object"!=typeof e)return!1;const t=!v||e.genre_ids&&Array.isArray(e.genre_ids)&&e.genre_ids.includes(v.id),s=e.first_air_date?new Date(e.first_air_date).getFullYear():e.release_date?new Date(e.release_date).getFullYear():null;return t&&(!C||s===C)}))),[v,C]),Re=U.useCallback((()=>{const e=R?A:r;return Array.isArray(e)?ze(e):[]}),[R,A,r,v,C]);return U.useEffect((()=>{}),[v]),U.useEffect((()=>{const e=e=>{_&&!e.target.closest(".genre-dropdown")&&M(!1),L&&!e.target.closest(".year-dropdown")&&P(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),Y.jsx("div",{className:"min-h-screen bg-[#141414] text-white",children:Y.jsxs("div",{className:"w-full px-4 py-8",children:[Y.jsxs("div",{className:"flex flex-col items-center gap-6 mb-8",children:[Y.jsx("div",{className:"w-full relative",children:Y.jsx("div",{className:"relative max-w-xl mx-auto",children:Y.jsx(U.Suspense,{fallback:Y.jsx("div",{className:"w-full h-12 bg-gray-800 rounded-lg animate-pulse"}),children:Y.jsx(ws,{placeholder:"Search TV series...",initialValue:R,onSearch:e=>{I(e),e.trim()&&e.length>=2?(H(1),Pe(e,1)):(F([]),O(!1))},onSearchSubmit:e=>{dt.addToHistory(e,"tv")},onClear:()=>{I(""),F([]),O(!1)},isLoading:V,theme:"dark",variant:"floating",size:"md",showSuggestions:!0,suggestions:A.slice(0,5).map((e=>e&&"object"==typeof e?{title:e.name??e.title??"Unknown Title",name:e.name??e.title??"Unknown Title",id:e.id??e.movie_id??e.tv_id??null,poster_path:e.poster_path??e.poster??"",year:e.first_air_date?new Date(e.first_air_date).getFullYear():e.release_date?new Date(e.release_date).getFullYear():null}:null)).filter(Boolean),onSuggestionSelect:e=>{const t=A.find((t=>t.id===e.id));t&&Te(t)},searchHistory:J,showHistory:!0,onHistorySelect:e=>{I(e),Pe(e,1),dt.incrementSearchCount(e)},clearHistory:()=>dt.clearHistoryByType("tv"),showTrendingSearches:!0,trendingSearches:se,onTrendingSelect:e=>{I(e),Pe(e,1),dt.addToHistory(e,"tv")}})})})}),!R&&Y.jsx("div",{ref:q,className:"relative inline-flex rounded-full bg-[#1a1a1a] p-1 overflow-x-auto max-w-full horizontal-scroll-container scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},role:"tablist","aria-label":"TV series categories",children:ve.map((e=>Y.jsxs("button",{onClick:()=>Se(e.id),role:"tab","aria-selected":h===e.id,"aria-controls":e.id+"-series-panel",tabIndex:h===e.id?0:-1,className:"relative px-4 py-0.5 rounded-full text-sm font-medium transition-colors duration-300 whitespace-nowrap focus:outline-none flex items-center gap-2 "+(h===e.id?"text-black":"text-gray-400 hover:text-white"),children:[vs[e.id]&&Y.jsx("span",{className:"relative z-10 flex-shrink-0 streaming-icon-color-transition",style:{color:ge(e.id)},"aria-hidden":"true",children:(()=>{try{return vs[e.id]()}catch(t){return null}})()}),Y.jsx("span",{className:"relative z-10",children:e.label}),h===e.id&&Y.jsx(Ft.div,{layoutId:"activeSeriesCategoryBackground",className:"absolute inset-0 bg-white rounded-full",variants:we(),initial:"initial",animate:"animate",exit:"exit",transition:fe(),"aria-hidden":"true"})]},e.id)))}),Y.jsxs("div",{className:"flex gap-4 justify-center w-full",children:[Y.jsx(y,{selectedYear:C,onYearSelect:_e,minYear:1900,maxYear:(new Date).getFullYear(),showAllYears:!0,className:"min-w-[120px]"}),Y.jsx(j,{genres:E,selectedGenre:v,onGenreSelect:Me,multiSelect:!1,className:"min-w-[140px]"})]})]}),(C||v)&&Y.jsxs(Ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex justify-center items-center gap-2 mt-4",children:[Y.jsx("span",{className:"text-sm text-gray-400",children:"Showing:"}),Y.jsxs("div",{className:"flex gap-2",children:[v&&Y.jsx("span",{className:"px-3 py-1 bg-white text-black text-sm rounded-full font-medium",children:v.name}),C&&Y.jsx("span",{className:"px-3 py-1 bg-white text-black text-sm rounded-full font-medium",children:C}),Y.jsx("button",{onClick:()=>Ce(),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded-full hover:bg-gray-500 transition-colors",children:"Clear All"})]})]}),c?Y.jsx(N,{isLoading:!1,error:c,retryCount:me,onRetry:je,context:h+" TV series",className:"mt-8"}):i&&0===r.length&&!R&&0===A.length?Y.jsx(N,{isLoading:!0,error:null,retryCount:me,onRetry:je,context:h+" TV series",className:"mt-8",hasContent:r.length>0||A.length>0}):V&&0===A.length?Y.jsx(N,{isLoading:!0,error:null,retryCount:0,onRetry:()=>{},context:"searching TV series",className:"mt-8",hasContent:!1}):Y.jsx(Ft.div,{className:"mt-8",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:[.25,.46,.45,.94]},children:(()=>{const e=Re();return Y.jsx(Ft.div,{variants:bs,initial:"hidden",animate:"visible",transition:{duration:.4,ease:[.25,.46,.45,.94],staggerChildren:.02,delayChildren:.05},className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 3xl:grid-cols-10 gap-4",role:"region","aria-label":R?"Search results for "+R:(()=>{const e=ve.find((e=>e.id===h));return e?.label||"TV Series"})()+" TV series",id:h+"-series-panel",children:e.map(((e,t)=>e&&"object"==typeof e?Y.jsx(Ft.div,{variants:ys,initial:"hidden",animate:"visible",children:Y.jsx(js,{series:e,onSeriesClick:Te,onShowEpisodes:Le,index:t})},`${e.id||t}-${t}`):null)).filter(Boolean)},`${h}-${R.trim()?"search":"series"}`)})()},h),l&&Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"flex justify-center py-8",children:Y.jsxs("div",{className:"flex items-center space-x-3",children:[Y.jsxs("div",{className:"flex space-x-1",children:[Y.jsx(Ft.div,{className:"w-2 h-2 bg-white/40 rounded-full",animate:{opacity:[.4,1,.4]},transition:{duration:1.4,repeat:1/0,delay:0}}),Y.jsx(Ft.div,{className:"w-2 h-2 bg-white/40 rounded-full",animate:{opacity:[.4,1,.4]},transition:{duration:1.4,repeat:1/0,delay:.2}}),Y.jsx(Ft.div,{className:"w-2 h-2 bg-white/40 rounded-full",animate:{opacity:[.4,1,.4]},transition:{duration:1.4,repeat:1/0,delay:.4}})]}),Y.jsx("span",{className:"text-white/50 text-sm font-light",children:"Loading more..."})]})}),!i&&!V&&(R&&W||!R&&f)&&Y.jsx("div",{ref:Z,className:"h-10"}),u&&Y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:Y.jsx("div",{className:"relative w-full max-w-7xl max-h-[90vh] bg-[#141414] rounded-xl overflow-hidden",children:Y.jsx(U.Suspense,{fallback:null,children:Y.jsx(gs,{movie:u,onClose:()=>{m(null)},onMovieSelect:async e=>{try{const t=await Ae(e.id,"tv");if(!t)return void d("Series not found or unavailable");const s={...t,type:"tv",title:t.name??"Unknown Title",release_date:t.first_air_date??null,year:t.first_air_date?new Date(t.first_air_date).getFullYear():null,runtime:t.episode_run_time?.[0]??null,networks:t.networks?.map((e=>e.name)).join(", ")??"N/A",number_of_seasons:t.number_of_seasons??0,number_of_episodes:t.number_of_episodes??0,status:t.status??"Unknown",similar:t.similar?.results??[],videos:t.videos?.results??[],credits:{cast:t.credits?.cast??[],crew:t.credits?.crew??[]}};m(s)}catch(t){d("Failed to load series details")}},onGenreClick:e=>{e&&e.id&&(b(e),m(null))}})})})}),ne&&oe&&Y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:Y.jsxs("div",{className:"relative w-full max-w-6xl max-h-[90vh] bg-[#141414] rounded-xl overflow-hidden",children:[Y.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-700",children:[Y.jsxs("div",{children:[Y.jsx("h2",{className:"text-2xl font-bold text-white",children:oe.name}),Y.jsx("p",{className:"text-gray-400 mt-1",children:"Browse Episodes"})]}),Y.jsx("button",{onClick:()=>{le(!1),ce(null)},className:"p-2 text-gray-400 hover:text-white transition-colors","aria-label":"Close episode list",children:Y.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Y.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:Y.jsx(U.Suspense,{fallback:Y.jsx("div",{className:"flex justify-center items-center py-8",children:Y.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),children:Y.jsx(fs,{tvId:oe.id,onEpisodeSelect:(e,t)=>{oe&&le(!1)},onSeasonChange:e=>{},showSearch:!0,showStats:!0,maxEpisodesPerPage:15})})})]})}),Y.jsx(k,{})]})})}},Symbol.toStringTag,{value:"Module"})),ks=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.a7))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url))),Cs="https://streamr-jjj9.onrender.com",Ss=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{user:e,reloadUser:r,loading:a,detectAndUpdateLocation:i}=_(),{continueWatching:n,removeFromContinueWatching:l,clearAllContinueWatching:o}=s(),{watchlist:c,removeFromWatchlist:d}=t(),[u,m]=U.useState("profile"),[h,x]=U.useState(!1),[p,g]=U.useState(!1),[f,w]=U.useState(!1),[v,b]=U.useState(!1),[y,j]=U.useState(null),N=U.useRef(null),[k,C]=U.useState(!1),[S,T]=U.useState(!1),[z,R]=U.useState(null),[I,A]=U.useState({email:"",username:"",currentPassword:"",newPassword:"",confirmPassword:""}),[F,V]=U.useState(!1),[B,D]=U.useState(!1),[H,W]=U.useState({}),[O,$]=U.useState(!1);U.useState(!1);const[q,Z]=U.useState(!1),[G,J]=U.useState(!1),[X,ee]=U.useState(!1),[Ce,Se]=U.useState(!1),[Te,_e]=U.useState({name:"User",username:"user",email:"user@example.com",location:"New York, USA",joinDate:"January 2024",bio:"Movie enthusiast and tech lover",avatar:null,plan:"Premium",socialLinks:{twitter:"",instagram:"",letterboxd:""},stats:{watchTime:"0",completed:"0",reviews:"0"},preferences:{language:"en",quality:"1080p",autoplay:!0,notifications:!0,darkMode:!0,genres:[],rating:"all"}});U.useEffect((()=>{if(e){const t=e;_e((e=>({...e,name:t.name||t.username||"",username:t.username||"",email:t.email||"",avatar:t.profilePicture,location:t.location||"",bio:t.bio||"",joinDate:t.createdAt?new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"}):e.joinDate,preferences:{...e.preferences,...t.preferences},googleId:t.googleId,githubId:t.githubId,socialLinks:t.socialLinks||{twitter:"",instagram:"",letterboxd:""}}))),A((e=>({...e,email:t.email||"",username:t.username||""}))),$(t.twoFactorEnabled||!1)}}),[e]),U.useEffect((()=>{if(n&&c){const e=pt.getComprehensiveStats({viewingProgress:n.reduce(((e,t)=>(e["movie"===t.type?"movie_"+t.id:`tv_${t.id}_${t.season}_${t.episode}`]=t,e)),{}),watchlist:c});j(e)}}),[n,c]);const[Me,Le]=U.useState(null),[Pe,Ee]=U.useState({}),ze=Q(),Re=[{id:"profile",label:"Overview"},{id:"achievements",label:"Achievements"},{id:"collections",label:"Collections"},{id:"history",label:"History"},{id:"preferences",label:"Preferences"},{id:"account",label:"Account"}],Ie={profile:Y.jsx(oe,{className:"w-5 h-5 shrink-0","aria-hidden":"true"}),achievements:Y.jsx(le,{className:"w-5 h-5 shrink-0","aria-hidden":"true"}),collections:Y.jsx(ne,{className:"w-5 h-5 shrink-0","aria-hidden":"true"}),history:Y.jsx(ie,{className:"w-5 h-5 shrink-0","aria-hidden":"true"}),preferences:Y.jsx(ae,{className:"w-5 h-5 shrink-0","aria-hidden":"true"}),account:Y.jsx(re,{className:"w-5 h-5 shrink-0","aria-hidden":"true"})},Ae=(e,t)=>{_e((s=>({...s,[e]:t})))},Fe=(e,t)=>{!t||(e=>{if(!e)return!0;let t=e;e.startsWith("http://")||e.startsWith("https://")||(t="https://"+e);try{return new URL(t),!0}catch{return!1}})(t)?((e,t)=>{let s=t;t&&!t.startsWith("http://")&&!t.startsWith("https://")&&t.includes(".")&&(s="https://"+t),_e((t=>({...t,socialLinks:{...t.socialLinks,[e]:s}})))})(e,t):se.error("Please enter a valid URL for "+e)},Ve=async(e,t)=>{const s={...Te.preferences,[e]:t};if("genres"===e){const e=Te.preferences.genres,r=e.includes(t)?e.filter((e=>e!==t)):[...e,t];s.genres=r}_e((e=>({...e,preferences:s})));try{await gt.updatePreferences({[e]:s[e]})}catch(r){}},Be=()=>{N.current.click()},De=async e=>{const t=e.target.files[0];if(t)if(["image/jpeg","image/jpg","image/png","image/webp"].includes(t.type))if(t.size>5242880)se.error("File size must be less than 5MB");else try{b(!0),se.loading(`Uploading ${t.name}...`,{id:"photo-upload"}),(await gt.uploadProfilePicture(t)).success&&(await r(),se.success("Profile picture updated",{id:"photo-upload"}))}catch(s){se.error(s?.message||"Failed to upload picture",{id:"photo-upload"})}finally{b(!1)}else se.error("Please select a valid image file (JPEG, PNG, or WebP)")},He=(e,t)=>{A((s=>({...s,[e]:t}))),H[e]&&W((t=>({...t,[e]:""})))},We=async e=>{try{await gt.connectOAuth(e)}catch(t){se.error("Failed to connect "+e)}},Oe=async e=>{try{await gt.disconnectOAuth(e),await r(),se.success(e+" disconnected successfully")}catch(t){se.error(t?.message||"Failed to disconnect "+e)}},$e=()=>{const e=Te.socialLinks||{},t=[!!Te.name,!!Te.username,!!Te.bio,!!Te.location,!!Te.avatar,Object.values(e).some((e=>!!e)),Array.isArray(Te.preferences?.genres)&&Te.preferences.genres.length>0],s=t.filter(Boolean).length;return Math.round(s/t.length*100)},Ue=e=>e?e.startsWith("http")?e:"https://image.tmdb.org/t/p/w500"+e:null;return Y.jsxs("div",{className:"min-h-screen bg-[#0f1114] text-white",children:[Y.jsx("div",{className:"container mx-auto px-4 sm:px-6 py-6 sm:py-8",children:Y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-6",children:[Y.jsx("aside",{className:"lg:col-span-4 xl:col-span-3 order-2 lg:order-1",children:Y.jsxs("div",{className:"lg:sticky lg:top-8 space-y-4 sm:space-y-6",children:[Y.jsx("div",{className:"hidden lg:block rounded-xl p-6 border border-white/10 bg-white/[0.03]",children:a?Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5"}),Y.jsxs("div",{className:"flex-1 space-y-2",children:[Y.jsx("div",{className:"h-4 bg-white/5 rounded w-2/3"}),Y.jsx("div",{className:"h-3 bg-white/5 rounded w-1/2"})]}),Y.jsx("div",{className:"h-6 w-16 bg-white/5 rounded-full"})]}):Y.jsxs("div",{className:"flex items-center gap-4",children:[Y.jsxs("div",{className:"relative group",children:[Y.jsx("input",{type:"file",ref:N,onChange:De,accept:"image/*",className:"hidden"}),Y.jsxs("div",{className:"w-16 h-16 rounded-full overflow-hidden border transition-colors relative "+(v?"border-blue-400/50 bg-blue-400/10":"border-white/10 group-hover:border-white/60"),children:[v&&Y.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10",children:Y.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-white border-t-transparent"})}),Te.avatar?Y.jsx("img",{src:Te.avatar.startsWith("http")?Te.avatar:`${Cs}${Te.avatar}`,alt:"Profile",className:"w-full h-full object-cover"}):Y.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#2b3036] text-2xl text-white/40",children:Te.name.charAt(0).toUpperCase()})]}),Y.jsx("button",{onClick:Be,disabled:v,className:"absolute -bottom-1 -right-1 p-1.5 rounded-full shadow-lg transition-colors "+(v?"bg-gray-400 cursor-not-allowed":"bg-white hover:bg-white/90"),"aria-label":"Change profile picture",children:Y.jsx(te,{className:"h-3.5 w-3.5 text-black","aria-hidden":"true"})})]}),Y.jsxs("div",{className:"min-w-0",children:[Y.jsx("h2",{className:"text-xl font-semibold truncate",children:Te.name}),Y.jsxs("p",{className:"text-white/50 text-sm truncate",children:["@",Te.username||"user"]})]}),Y.jsx("span",{className:"ml-auto px-2.5 py-1 bg-white/10 text-white rounded-full text-xs",children:Te.plan})]})}),Y.jsx("nav",{className:"hidden lg:block rounded-xl p-2 border border-white/10 bg-white/[0.03]",children:Re.map((e=>Y.jsxs("button",{onClick:()=>m(e.id),"aria-current":u===e.id?"page":void 0,title:e.label,className:"w-full text-left flex items-center gap-3 px-4 py-3 rounded-full transition-colors "+(u===e.id?"bg-white/10 text-white border border-white/20":"text-white/70 hover:bg-white/5 hover:text-white"),children:[Y.jsx("span",{className:"shrink-0",children:Ie[e.id]}),Y.jsx("span",{className:"font-medium",children:e.label})]},e.id)))})]})}),Y.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 order-1 lg:order-2",children:[Y.jsx("div",{className:"lg:hidden mb-6",children:Y.jsx("div",{className:"bg-black/20 rounded-full p-1 border border-white/10",children:Y.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:Re.map((e=>Y.jsx("button",{onClick:()=>m(e.id),className:"flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 whitespace-nowrap flex items-center "+(u===e.id?"bg-white text-black shadow-lg":"text-white/60 hover:text-white hover:bg-white/10"),children:Y.jsxs("span",{className:"flex items-center",children:[Ie[e.id],Y.jsx("span",{className:"ml-2",children:e.label})]})},e.id)))})})}),a?Y.jsxs("div",{className:"space-y-6",children:[Y.jsx("div",{className:"bg-[#1a1d21] h-40 rounded-xl"}),Y.jsx("div",{className:"bg-[#1a1d21] h-56 rounded-xl"}),Y.jsx("div",{className:"bg-[#1a1d21] h-80 rounded-xl"})]}):Y.jsx(Vt,{mode:"wait",children:Y.jsxs(Ft.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.15},className:"space-y-8",children:["profile"===u&&Y.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[Y.jsx("div",{className:"bg-[#1a1d21] rounded-xl p-4 sm:p-6 border border-white/10",children:Y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 sm:gap-6",children:[Y.jsxs("div",{className:"relative group mx-auto sm:mx-0",children:[Y.jsx("input",{type:"file",ref:N,onChange:De,accept:"image/*",className:"hidden"}),Y.jsxs("div",{className:"w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden border-4 transition-colors relative "+(v?"border-blue-400/50 bg-blue-400/10":"border-white/10 group-hover:border-white"),children:[v&&Y.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-10",children:Y.jsx("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-2 border-white border-t-transparent"})}),Te.avatar?Y.jsx("img",{src:Te.avatar.startsWith("http")?Te.avatar:`${Cs}${Te.avatar}`,alt:"Profile",className:"w-full h-full object-cover"}):Y.jsx("div",{className:"w-full h-full flex items-center justify-center bg-[#2b3036] text-3xl sm:text-5xl text-white/40",children:Te.name.charAt(0).toUpperCase()})]}),Y.jsx("button",{onClick:Be,disabled:v,className:"absolute bottom-0 right-0 p-1.5 sm:p-2 rounded-full shadow-lg transition-colors "+(v?"bg-gray-400 cursor-not-allowed":"bg-white hover:bg-white/90"),"aria-label":"Edit avatar",children:Y.jsx(te,{className:"h-3 w-3 sm:h-4 sm:w-4 text-black","aria-hidden":"true"})})]}),v&&Y.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2",children:Y.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-500/90 text-white text-sm rounded-full",children:[Y.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border border-white border-t-transparent"}),Y.jsx("span",{children:"Uploading..."})]})}),Y.jsxs("div",{className:"flex-grow text-center sm:text-left",children:[Y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mb-2",children:[Y.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:Te.name}),Y.jsx("span",{className:"inline-block max-w-[60vw] sm:max-w-none px-3 py-1 bg-white/10 text-white rounded-full text-sm truncate mx-auto sm:mx-0",children:Te.plan})]}),Y.jsxs("p",{className:"text-white/50 text-sm mb-4",children:["@",Te.username||"user"," • Member since ",Te.joinDate]}),Y.jsx("p",{className:"text-white/70 mb-6",children:Te.bio||"No bio yet"}),Y.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 sm:gap-4 flex-wrap",children:[Te.googleId&&Y.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 bg-[#4285F4]/10 text-[#8ab4f8] rounded-full text-sm",children:[Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 48 48",fill:"currentColor",children:[Y.jsx("path",{fill:"#4285F4",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"}),Y.jsx("path",{fill:"#34A853",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8V44c5.268 0 10.046-1.953 13.611-5.657c3.566-3.704 5.657-8.895 5.657-14.426c0-1.341-.138-2.65-.389-3.917z"}),Y.jsx("path",{fill:"#FBBC05",d:"M10.389 28.417c-1.649-4.657-1.649-9.176 0-13.833L4.732 8.926C1.953 14.774 1.953 21.226 4.732 27.074l5.657-4.657z"}),Y.jsx("path",{fill:"#EA4335",d:"M24 36c-2.459 0-4.729-.691-6.611-1.917l-5.657 5.657C13.954 42.047 18.732 44 24 44s10.046-1.953 13.611-5.657L31.303 32c-1.649 2.657-4.08 4-6.611 4z"})]}),"Logged in with Google"]}),Te.githubId&&Y.jsxs("span",{className:"flex items-center gap-2 px-3 py-1 bg-white/10 text-white/80 rounded-full text-sm",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 16 16",fill:"currentColor",children:Y.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"})}),"Logged in with GitHub"]}),Object.entries(Te.socialLinks).map((([e,t])=>t&&Y.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-white/60 hover:text-white transition-colors",children:Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 24 24",fill:"currentColor",children:["twitter"===e&&Y.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"}),"instagram"===e&&Y.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.012-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"}),"letterboxd"===e&&Y.jsx("path",{d:"M19.098 10.638c-3.868-1.88-8.854-1.326-11.317 1.294-2.977 3.145-2.762 8.788.588 11.537 3.346 2.75 8.893 2.555 11.317-1.294 2.424-3.85 1.168-9.082-2.588-11.537zm-3.267 5.711c-.33.44-.83.66-1.33.66-.5 0-1-.22-1.33-.66-.33-.44-.33-1.1 0-1.54.33-.44.83-.66 1.33-.66.5 0 1 .22 1.33.66.33.44.33 1.1 0 1.54z"})]})},e)))]}),Y.jsxs("div",{className:"flex flex-row flex-wrap gap-4 mt-4 items-center justify-center sm:justify-start",children:[h?Y.jsxs(Y.Fragment,{children:[Y.jsx("button",{onClick:async e=>{if(e.preventDefault(),Te.name?.trim())if(Te.username?.trim())if(3>Te.username.length)se.error("Username must be at least 3 characters long");else if(/^[a-zA-Z0-9_]+$/.test(Te.username))try{g(!0);const e={name:Te.name.trim(),username:Te.username.trim(),location:Te.location?.trim()||"",bio:Te.bio?.trim()||"",socialLinks:{twitter:Te.socialLinks.twitter?.trim()||"",instagram:Te.socialLinks.instagram?.trim()||"",letterboxd:Te.socialLinks.letterboxd?.trim()||""}};await gt.updateProfile(e),await r(),T(!0),setTimeout((()=>{x(!1),R(null),T(!1)}),1500),se.success("Profile updated successfully and saved to database",{duration:4e3,icon:"✅",style:{background:"#10B981",color:"white",fontWeight:"bold"}})}catch(t){se.error(t?.message||"Failed to update profile")}finally{g(!1)}else se.error("Username can only contain letters, numbers, and underscores");else se.error("Username is required");else se.error("Display name is required")},disabled:p||JSON.stringify(Te)===JSON.stringify(z),className:"px-4 py-2 rounded-full transition-colors "+(p?"bg-white/60 text-black cursor-not-allowed":JSON.stringify(Te)===JSON.stringify(z)?"bg-white/40 text-black/60 cursor-not-allowed":"bg-white text-black hover:bg-white/90"),children:p?"Saving...":"Save Changes"}),Y.jsx("button",{onClick:()=>{JSON.stringify(Te)!==JSON.stringify(z)?C(!0):(_e(z),x(!1),R(null))},className:"px-4 py-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition-colors",children:"Cancel"})]}):Y.jsx("button",{onClick:()=>{R(Te),x(!0)},className:"px-4 py-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition-colors",children:"Edit Profile"}),Y.jsx("button",{onClick:async()=>{try{const e=window.location.origin+"/profile";await navigator.clipboard.writeText(e),se.success("Profile link copied")}catch(e){se.error("Failed to copy link")}},className:"px-4 py-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition-colors",children:"Share Profile"})]}),Y.jsx(Vt,{initial:!1,children:h&&Y.jsxs(Ft.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"mt-6",layout:!0,children:[Y.jsx("div",{className:"mb-4 p-3 bg-white/10 rounded-full border border-white/20",children:Y.jsxs("p",{className:"text-white/80 text-sm",children:[Y.jsx("span",{className:"font-semibold",children:"Note:"})," Fields marked with * are required. The location field is optional but can be auto-detected using the Detect button."]})}),S&&Y.jsx("div",{className:"mb-4 p-3 bg-green-500/10 rounded-lg border border-green-500/20",children:Y.jsxs("p",{className:"text-green-300/80 text-sm flex items-center gap-2",children:[Y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Y.jsx("span",{className:"font-semibold",children:"Success!"})," Your profile has been saved to the database successfully."]})}),!S&&JSON.stringify(Te)!==JSON.stringify(z)&&Y.jsx("div",{className:"mb-4 p-3 bg-yellow-500/10 rounded-full border border-yellow-500/20",children:Y.jsxs("p",{className:"text-yellow-300/80 text-sm flex items-center gap-2",children:[Y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})}),Y.jsx("span",{className:"font-semibold",children:"Unsaved Changes:"}),' You have unsaved changes. Click "Save Changes" to save them or "Cancel" to discard them.']})}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-white/60 mb-2",children:"Display Name *"}),Y.jsx("input",{type:"text",value:Te.name,onChange:e=>Ae("name",e.target.value),className:"w-full bg-[#1a1d21] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white/30 focus:bg-[#1a1d21]/80 transition-all duration-200",placeholder:"Enter your display name"})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-white/60 mb-2",children:"Username *"}),Y.jsx("input",{type:"text",value:Te.username,onChange:e=>Ae("username",e.target.value),className:"w-full bg-[#1a1d21] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white/30 focus:bg-[#1a1d21]/80 transition-all duration-200",placeholder:"Enter your username"})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-white/60 mb-2",children:"Location"}),Y.jsxs("div",{className:"flex gap-2",children:[Y.jsx("input",{type:"text",value:Te.location,onChange:e=>Ae("location",e.target.value),className:"flex-1 bg-[#1a1d21] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white/30 focus:bg-[#1a1d21]/80 transition-all duration-200",placeholder:"Enter your location"}),Y.jsx("button",{type:"button",onClick:async()=>{w(!0);try{const e=await i();e.success&&_e((t=>({...t,location:e.location})))}finally{w(!1)}},disabled:f,className:"px-4 py-2 bg-white/10 text-white rounded-full hover:bg-white/20 border border-white/30 hover:border-white/50 transition-all duration-200 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Auto-detect detailed location (City, State, Country)",children:f?Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),Y.jsx("span",{children:"Detecting..."})]}):Y.jsxs(Y.Fragment,{children:[Y.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Y.jsx("span",{children:"Detect"})]})})]})]}),Y.jsxs("div",{className:"md:col-span-2",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Y.jsx("label",{className:"block text-white/60",children:"Bio"}),Y.jsxs("span",{className:"text-xs text-white/40",children:[Te.bio?.length||0,"/250 characters"]})]}),Y.jsx("textarea",{value:Te.bio,onChange:e=>{const t=e.target.value;t.length>250||Ae("bio",t)},rows:3,className:"w-full bg-[#1a1d21] border border-white/10 rounded-2xl px-4 py-2 text-white focus:outline-none focus:border-white/30 focus:bg-[#1a1d21]/80 transition-all duration-200 resize-none",placeholder:"Tell us about yourself..."})]}),Y.jsxs("div",{className:"md:col-span-2",children:[Y.jsx("label",{className:"block text-white/60 mb-2",children:"Social Links"}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsx("input",{type:"text",placeholder:"Twitter URL (optional)",value:Te.socialLinks.twitter,onChange:e=>Fe("twitter",e.target.value),className:"w-full bg-[#1a1d21] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white/30 focus:bg-[#1a1d21]/80 transition-all duration-200"}),Y.jsx("input",{type:"text",placeholder:"Instagram URL (optional)",value:Te.socialLinks.instagram,onChange:e=>Fe("instagram",e.target.value),className:"w-full bg-[#1a1d21] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white/30 focus:bg-[#1a1d21]/80 transition-all duration-200"}),Y.jsx("input",{type:"text",placeholder:"Letterboxd URL (optional)",value:Te.socialLinks.letterboxd,onChange:e=>Fe("letterboxd",e.target.value),className:"w-full bg-[#1a1d21] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white/30 focus:bg-[#1a1d21]/80 transition-all duration-200"})]})]})]})]},"inlineEditForm")})]}),100>$e()&&Y.jsx("div",{className:"w-full md:w-64 mt-6 md:mt-0",children:Y.jsxs("div",{className:"rounded-lg p-4",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Y.jsx("span",{className:"text-sm text-white/60",children:"Profile completeness"}),Y.jsxs("span",{className:"text-sm text-white/80",children:[$e(),"%"]})]}),Y.jsx("div",{className:"h-1 w-full bg-white/10 rounded-full overflow-hidden",children:Y.jsx("div",{className:"h-full bg-white rounded-full",style:{width:$e()+"%"}})}),Y.jsxs("ul",{className:"mt-3 space-y-1 text-xs text-white/60 list-disc list-inside",children:[Y.jsx("li",{children:"Add a bio"}),Y.jsx("li",{children:"Pick your favorite genres"}),Y.jsx("li",{children:"Connect a social account"})]})]})})]})}),n&&n.length>0&&Y.jsxs("div",{className:"rounded-2xl p-6 sm:p-8 border border-white/10 bg-[#1a1d21] shadow-lg",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center border border-white/30",children:Y.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Y.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white",children:"Continue Watching"})]}),Y.jsx("button",{onClick:()=>m("history"),className:"px-4 py-2 text-sm text-white/70 hover:text-white bg-white/5 hover:bg-white/10 rounded-full border border-white/10 hover:border-white/20 transition-all duration-200",children:"See all"})]}),Y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:n.slice(0,6).map((e=>Y.jsx("div",{className:"group relative rounded-xl overflow-hidden border border-white/10 bg-white/[0.03] hover:bg-white/[0.05] hover:border-white/20 transition-all duration-300 shadow-lg hover:shadow-xl",children:Y.jsxs("div",{className:"relative w-full aspect-[2/3] sm:aspect-[16/9] cursor-pointer group",onClick:()=>Le({id:e.id,title:e.title,name:e.title,poster_path:e.poster_path,backdrop_path:e.backdrop_path,media_type:e.type,type:e.type,season:e.season,episode:e.episode,episodeTitle:e.episodeTitle}),children:[Y.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10",children:Y.jsx("div",{className:"w-12 h-12 rounded-full bg-white/90 flex items-center justify-center shadow-lg transform scale-90 group-hover:scale-100 transition-transform duration-300",children:Y.jsx("svg",{className:"w-5 h-5 text-black ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{d:"M8 5v14l11-7z"})})})}),Y.jsxs("picture",{children:[e.backdrop_path&&Y.jsx("source",{media:"(min-width: 768px)",srcSet:Ue(e.backdrop_path)}),e.poster_path&&Y.jsx("source",{media:"(max-width: 767px)",srcSet:Ue(e.poster_path)}),Y.jsx("img",{src:Ue(e.backdrop_path)||Ue(e.poster_path),alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"})]}),Y.jsx("div",{className:"absolute inset-x-0 bottom-0 h-20 bg-gradient-to-t from-black/90 via-black/60 to-transparent pointer-events-none"}),Y.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:[Y.jsx("h4",{className:"text-white font-semibold text-xs sm:text-sm truncate leading-tight mb-1",children:e.title}),"tv"===e.type&&e.season&&e.episode&&Y.jsxs("p",{className:"text-white/80 text-xs truncate leading-tight mb-2",children:["S",e.season," • E",e.episode,e.episodeTitle?" • "+e.episodeTitle:""]}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsxs("span",{className:"text-white/90 text-xs font-semibold block",children:[Math.round(e.progress||0),"% complete"]}),Y.jsx("div",{className:"w-full bg-white/20 rounded-full h-1 border border-white/10",children:Y.jsx("div",{className:"bg-gradient-to-r from-white to-white/90 h-1 rounded-full transition-all duration-300",style:{width:Math.max(Math.min(e.progress||0,100),1)+"%"}})})]})]})]})},`cw-${e.type}-${e.id}-${e.season||""}-${e.episode||""}`)))})]}),Y.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 sm:gap-4",children:[Y.jsxs("div",{className:"bg-[#1a1d21] rounded-2xl p-3 sm:p-5 border border-white/10 hover:border-white/20 transition-all duration-300 group",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[Y.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/20 group-hover:border-white/30 transition-colors",children:Y.jsx(ie,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white","aria-hidden":"true"})}),Y.jsx("div",{className:"text-right",children:Y.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider font-medium",children:"Total"})})]}),Y.jsxs("div",{className:"space-y-1",children:[Y.jsx("p",{className:"text-lg sm:text-2xl font-bold text-white",children:y?y.watchTime.formatted:"0h"}),Y.jsx("p",{className:"text-xs text-white/40 font-light",children:y?`${y.watchTime.movies}h movies, ${y.watchTime.tv}h TV`:"Hours watched"})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-2xl p-3 sm:p-5 border border-white/10 hover:border-white/20 transition-all duration-300 group",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[Y.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/20 group-hover:border-white/30 transition-colors",children:Y.jsx(ce,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white","aria-hidden":"true"})}),Y.jsx("div",{className:"text-right",children:Y.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider font-medium",children:"Finished"})})]}),Y.jsxs("div",{className:"space-y-1",children:[Y.jsx("p",{className:"text-lg sm:text-2xl font-bold text-white",children:y?y.content.completed:"0"}),Y.jsx("p",{className:"text-xs text-white/40 font-light",children:y?`${y.content.movies} movies, ${y.content.tvEpisodes} episodes`:"Content completed"})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-2xl p-3 sm:p-5 border border-white/10 hover:border-white/20 transition-all duration-300 group",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[Y.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/20 group-hover:border-white/30 transition-colors",children:Y.jsx(ne,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white","aria-hidden":"true"})}),Y.jsx("div",{className:"text-right",children:Y.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider font-medium",children:"Saved"})})]}),Y.jsxs("div",{className:"space-y-1",children:[Y.jsx("p",{className:"text-lg sm:text-2xl font-bold text-white",children:y?y.reviews.written:"0"}),Y.jsx("p",{className:"text-xs text-white/40 font-light",children:y?y.content.inProgress+" items in progress":"Saved items"})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-2xl p-3 sm:p-5 border border-white/10 hover:border-white/20 transition-all duration-300 group",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[Y.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/20 group-hover:border-white/30 transition-colors",children:Y.jsx(de,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white","aria-hidden":"true"})}),Y.jsx("div",{className:"text-right",children:Y.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider font-medium",children:"Streak"})})]}),Y.jsxs("div",{className:"space-y-1",children:[Y.jsx("p",{className:"text-lg sm:text-2xl font-bold text-white",children:y?y.preferences.viewingStreak:"0"}),Y.jsx("p",{className:"text-xs text-white/40 font-light",children:y?"Consecutive days":"Days watched"})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-2xl p-3 sm:p-5 border border-white/10 hover:border-white/20 transition-all duration-300 group",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[Y.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/20 group-hover:border-white/30 transition-colors",children:Y.jsx(ue,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white","aria-hidden":"true"})}),Y.jsx("div",{className:"text-right",children:Y.jsx("p",{className:"text-xs text-white/40 uppercase tracking-wider font-medium",children:"Score"})})]}),Y.jsxs("div",{className:"space-y-1",children:[Y.jsx("p",{className:"text-lg sm:text-2xl font-bold text-white",children:y?y.reviews.averageRating.toFixed(1):"0.0"}),Y.jsx("p",{className:"text-xs text-white/40 font-light",children:y?"Your average score":"Rating given"})]})]})]}),y&&Y.jsxs("div",{className:"mb-8",children:[Y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Y.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/20",children:Y.jsx(le,{className:"w-5 h-5 text-white","aria-hidden":"true"})}),Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-2xl font-bold",children:"Achievements"}),Y.jsx("p",{className:"text-white/60 text-sm",children:"Track your progress and unlock badges"})]})]}),Y.jsx(E,{variant:"compact"})]}),Y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Y.jsxs("div",{className:"lg:col-span-2 rounded-xl p-6 border border-white/10 bg-white/[0.03]",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Y.jsx(me,{className:"w-5 h-5 text-white/70","aria-hidden":"true"}),Y.jsx("h3",{className:"text-lg font-semibold",children:"Your Highlights"})]}),Y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[Y.jsxs("div",{className:"bg-white/0 rounded-lg p-4 border border-white/10",children:[Y.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Favorite Genres"}),Y.jsxs("p",{className:"text-white font-medium",children:[y?y.preferences.favoriteGenres.length:Te.preferences.genres.length||0,y?" discovered":" selected"]}),Y.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[(y?y.preferences.favoriteGenres:Te.preferences.genres||[]).slice(0,6).map((e=>Y.jsx("span",{className:"px-2 py-0.5 text-xs bg-white/10 rounded-full text-white/80",children:e},e))),(y?y.preferences.favoriteGenres:Te.preferences.genres||[]).length>6&&Y.jsxs("span",{className:"px-2 py-0.5 text-xs bg-white/10 rounded-full text-white/60",children:["+",(y?y.preferences.favoriteGenres:Te.preferences.genres||[]).length-6," more"]})]})]}),Y.jsxs("div",{className:"bg-white/0 rounded-lg p-4 border border-white/10",children:[Y.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Language"}),Y.jsx("p",{className:"text-white font-medium uppercase",children:Te.preferences.language}),Y.jsx("p",{className:"text-white/60 text-xs mt-2",children:"Content language preference"})]}),Y.jsxs("div",{className:"bg-white/0 rounded-lg p-4 border border-white/10",children:[Y.jsx("p",{className:"text-white/60 text-sm mb-1",children:"Rating Filter"}),Y.jsx("p",{className:"text-white font-medium uppercase",children:Te.preferences.rating}),Y.jsx("p",{className:"text-white/60 text-xs mt-2",children:"Parental controls"})]})]})]}),Y.jsxs("div",{className:"rounded-xl p-6 border border-white/10 bg-white/[0.03]",children:[Y.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsxs("button",{onClick:()=>m("collections"),className:"w-full flex items-center gap-3 px-3 py-2 bg-white/5 hover:bg-white/10 rounded-full transition-colors",children:[Y.jsx(ne,{className:"w-5 h-5","aria-hidden":"true"}),Y.jsx("span",{children:"Manage Collections"})]}),Y.jsxs("button",{onClick:()=>m("preferences"),className:"w-full flex items-center gap-3 px-3 py-2 bg-white/5 hover:bg-white/10 rounded-full transition-colors",children:[Y.jsx(ae,{className:"w-5 h-5","aria-hidden":"true"}),Y.jsx("span",{children:"Update Preferences"})]}),Y.jsxs("button",{onClick:()=>m("account"),className:"w-full flex items-center gap-3 px-3 py-2 bg-white/5 hover:bg-white/10 rounded-full transition-colors",children:[Y.jsx(re,{className:"w-5 h-5","aria-hidden":"true"}),Y.jsx("span",{children:"Account & Security"})]})]})]})]})]}),"achievements"===u&&Y.jsx("div",{className:"space-y-4 sm:space-y-6",children:Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-4 sm:p-6 border border-white/10 h-[88vh] overflow-y-auto ",children:[Y.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[Y.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-white/10 flex items-center justify-center border border-white/20",children:Y.jsx(le,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white","aria-hidden":"true"})}),Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-xl sm:text-2xl font-bold",children:"Achievement Dashboard"}),Y.jsx("p",{className:"text-white/60 text-xs sm:text-sm",children:"Track your progress and unlock badges"})]})]}),Y.jsx(E,{variant:"full"})]})}),"collections"===u&&Y.jsx("div",{className:"space-y-4 sm:space-y-6",children:Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-4 sm:p-6 h-[88vh] overflow-y-auto border border-white/10",children:[Y.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[Y.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"My Collections"}),Y.jsxs("span",{className:"text-white/60 text-sm sm:text-base",children:[c.length," items"]})]}),c.length>0?Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3",children:c.map((e=>Y.jsxs(Ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"group relative aspect-[2/3] rounded-lg overflow-hidden bg-[#1a1d21]",children:[Y.jsxs("div",{className:"relative w-full h-full cursor-pointer",onClick:()=>(e=>{Le(e)})(e),children:[!Pe[e.id]&&Y.jsx("div",{className:"absolute inset-0 bg-[#1a1d21]"}),Y.jsx("img",{src:Ue(e.poster_path),alt:e.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 "+(Pe[e.id]?"opacity-100":"opacity-0"),onLoad:()=>{return t=e.id,void Ee((e=>({...e,[t]:!0})));var t},onError:()=>{return t=e.id,void Ee((e=>({...e,[t]:"error"})));var t}})]}),Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:Y.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[Y.jsx("h3",{className:"text-white font-medium truncate",children:e.title}),Y.jsx("p",{className:"text-white/60 text-sm",children:e.year})]})}),Y.jsx("button",{onClick:()=>d(e.id),className:"absolute top-2 right-2 p-2 bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-black/70","aria-label":"Remove from watchlist",children:Y.jsx(he,{className:"h-5 w-5 text-white","aria-hidden":"true"})})]},e.id)))}):Y.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[Y.jsx(xe,{className:"h-16 w-16 text-white/20 mb-4","aria-hidden":"true"}),Y.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No collections yet"}),Y.jsx("p",{className:"text-white/60 mb-6",children:"Create collections to organize movies and TV shows your way"}),Y.jsx("button",{onClick:()=>ze("/browse"),className:"px-6 py-3 bg-white text-black rounded-full font-medium hover:bg-white/90 transition-colors",children:"Browse content"})]})]})}),"history"===u&&Y.jsx("div",{className:"space-y-6",children:Y.jsxs("div",{className:"h-[88vh] overflow-y-auto rounded-2xl p-6 sm:p-8 border border-white/10 bg-[#1a1d21] shadow-lg",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center border border-white/30",children:Y.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Y.jsx("h3",{className:"text-lg font-semibold",children:"Watch History"})]}),Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsxs("span",{className:"text-white/60",children:[n.length," items"]}),n.length>0&&Y.jsx("button",{onClick:o,className:"text-sm text-red-400 hover:text-red-300",children:"Clear all"})]})]}),n.length>0?Y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:n.map((e=>Y.jsx("div",{className:"group relative rounded-xl overflow-hidden border border-white/10 bg-white/[0.03] hover:bg-white/[0.05] hover:border-white/20 transition-all duration-300 shadow-lg hover:shadow-xl",children:Y.jsxs("div",{className:"relative w-full aspect-[2/3] sm:aspect-[16/9] cursor-pointer group",onClick:()=>Le({id:e.id,title:e.title,name:e.title,poster_path:e.poster_path,backdrop_path:e.backdrop_path,media_type:e.type,type:e.type,season:e.season,episode:e.episode,episodeTitle:e.episodeTitle}),children:[Y.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",children:Y.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center border border-white/30",children:Y.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{d:"M8 5v14l11-7z"})})})}),e.poster_path||e.backdrop_path?Y.jsx("img",{src:Ue(e.backdrop_path)||Ue(e.poster_path),alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):Y.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-600 to-gray-800 flex items-center justify-center",children:Y.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),Y.jsx("div",{className:"absolute inset-x-0 bottom-0 h-20 bg-gradient-to-t from-black/90 via-black/60 to-transparent pointer-events-none"}),Y.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:[Y.jsx("h4",{className:"text-white font-semibold text-xs sm:text-sm truncate leading-tight mb-1",children:e.title}),"tv"===e.type&&e.season&&e.episode&&Y.jsxs("p",{className:"text-white/80 text-xs truncate leading-tight mb-2",children:["S",e.season," • E",e.episode,e.episodeTitle?" • "+e.episodeTitle:""]}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsxs("span",{className:"text-white/90 text-xs font-semibold block",children:[Math.round(e.progress||0),"% complete"]}),Y.jsx("div",{className:"w-full bg-white/20 rounded-full h-1 border border-white/10",children:Y.jsx("div",{className:"bg-gradient-to-r from-white to-white/90 h-1 rounded-full transition-all duration-300",style:{width:Math.max(Math.min(e.progress||0,100),1)+"%"}})})]})]}),Y.jsx("button",{"aria-label":"Remove from History",onClick:t=>{t.stopPropagation(),(e=>{l(e.id,e.type,e.season,e.episode)})(e)},className:"absolute top-2 right-2 z-10 w-8 h-8 bg-black/70 hover:bg-black/90 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-110",children:Y.jsx(he,{className:"w-4 h-4 text-white","aria-hidden":"true"})})]})},`${e.type}-${e.id}-${e.season||""}-${e.episode||""}`)))}):Y.jsxs("div",{className:"text-center py-12",children:[Y.jsx("p",{className:"text-white/60 mb-4",children:"No watch history yet"}),Y.jsx("button",{onClick:()=>ze("/browse"),className:"px-4 py-2 bg-white text-black rounded-lg hover:bg-white/90 transition-colors",children:"Start Watching"})]})]})}),"preferences"===u&&Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-6 border border-white/10",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[Y.jsx(me,{className:"w-5 h-5 text-white/70","aria-hidden":"true"}),Y.jsx("h3",{className:"text-lg font-semibold",children:"Content Preferences"})]}),Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-white/60 mb-2",children:"Favorite Genres"}),Y.jsx("div",{className:"flex flex-wrap gap-2",children:["Action","Comedy","Drama","Sci-Fi","Horror","Romance","Thriller","Animation","Documentary"].map((e=>Y.jsx("button",{className:"px-3 py-1 rounded-full text-sm transition-all duration-200 "+(Te.preferences.genres.includes(e)?"bg-white text-black shadow-lg":"bg-white/10 text-white/60 hover:bg-white/20 hover:scale-105"),onClick:()=>Ve("genres",e),children:e},e)))})]}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-white/60 mb-2",children:"Content Language"}),Y.jsxs("select",{value:Te.preferences.language,onChange:e=>Ve("language",e.target.value),className:"w-full bg-[#1a1d21] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white focus:bg-[#1a1d21]/80",children:[Y.jsx("option",{value:"en",children:"English"}),Y.jsx("option",{value:"es",children:"Spanish"}),Y.jsx("option",{value:"fr",children:"French"}),Y.jsx("option",{value:"de",children:"German"}),Y.jsx("option",{value:"ja",children:"Japanese"})]})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-white/60 mb-2",children:"Content Rating"}),Y.jsxs("select",{value:Te.preferences.rating,onChange:e=>Ve("rating",e.target.value),className:"w-full bg-[#1a1d21] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white focus:bg-[#1a1d21]/80",children:[Y.jsx("option",{value:"all",children:"All Ratings"}),Y.jsx("option",{value:"pg",children:"PG and below"}),Y.jsx("option",{value:"pg13",children:"PG-13 and below"}),Y.jsx("option",{value:"r",children:"R and below"})]})]})]})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-6 border border-white/10",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[Y.jsx(pe,{className:"w-5 h-5 text-white/70","aria-hidden":"true"}),Y.jsx("h3",{className:"text-lg font-semibold",children:"Playback"})]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsx("h4",{className:"font-medium",children:"Autoplay Next"}),Y.jsx("p",{className:"text-white/60 text-sm",children:"Automatically play the next item in a series"})]}),Y.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[Y.jsx("input",{type:"checkbox",className:"sr-only peer",checked:!!Te.preferences.autoplay,onChange:e=>Ve("autoplay",e.target.checked)}),Y.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-white/20 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-white"})]})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-white/60 mb-2",children:"Default Video Quality"}),Y.jsxs("select",{value:Te.preferences.quality,onChange:e=>Ve("quality",e.target.value),className:"w-full bg-[#1a1d21] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white focus:bg-[#1a1d21]/80",children:[Y.jsx("option",{value:"auto",children:"Auto"}),Y.jsx("option",{value:"1080p",children:"1080p"}),Y.jsx("option",{value:"720p",children:"720p"}),Y.jsx("option",{value:"480p",children:"480p"})]})]})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-6 border border-white/10",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[Y.jsx(ge,{className:"w-5 h-5 text-white/70","aria-hidden":"true"}),Y.jsx("h3",{className:"text-lg font-semibold",children:"Notifications"})]}),Y.jsx("div",{className:"space-y-4",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsx("h4",{className:"font-medium",children:"Email Updates"}),Y.jsx("p",{className:"text-white/60 text-sm",children:"Get emails about new episodes and recommendations"})]}),Y.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[Y.jsx("input",{type:"checkbox",className:"sr-only peer",checked:!!Te.preferences.notifications,onChange:e=>Ve("notifications",e.target.checked)}),Y.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-white/20 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-white"})]})]})})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-6 border border-white/10",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[Y.jsx(fe,{className:"w-5 h-5 text-white/70","aria-hidden":"true"}),Y.jsx("h3",{className:"text-lg font-semibold",children:"Privacy"})]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsx("h4",{className:"font-medium",children:"Watch History"}),Y.jsx("p",{className:"text-white/60 text-sm",children:"Keep track of your viewing history"})]}),Y.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[Y.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),Y.jsx("div",{className:"w-11 h-6 bg-white/10 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-white/20 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-white"})]})]}),Y.jsx("button",{className:"w-full px-4 py-2 bg-red-500/5 text-red-400 rounded-full hover:bg-red-500/10 transition-colors border border-red-500/20 hover:border-red-500/30",children:"Clear Watch History"})]})]})]}),"account"===u&&Y.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-4 sm:p-6 border border-white/10",children:[Y.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[Y.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/20",children:Y.jsx(we,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white","aria-hidden":"true"})}),Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:"Account Information"}),Y.jsx("p",{className:"text-white/60 text-xs sm:text-sm",children:"Manage your basic account details"})]})]}),Y.jsxs("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{const e={};return I.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(I.email)||(e.email="Please enter a valid email address"):e.email="Email is required",I.username?3>I.username.length?e.username="Username must be at least 3 characters":/^[a-zA-Z0-9_]+$/.test(I.username)||(e.username="Username can only contain letters, numbers, and underscores"):e.username="Username is required",e})();if(Object.keys(t).length>0)W(t);else try{V(!0),W({});const e={email:I.email,username:I.username};await gt.updateProfile(e),await r(),se.success("Account updated successfully")}catch(s){se.error(s?.message||"Failed to update account")}finally{V(!1)}},className:"space-y-4 sm:space-y-6",children:[Y.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:gap-6",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-white/60 mb-2 text-sm font-medium",children:"Email Address"}),Y.jsx("input",{type:"email",value:I.email,onChange:e=>He("email",e.target.value),className:"w-full bg-[#1a1d21] border rounded-full px-4 py-3 text-white focus:outline-none transition-all duration-200 "+(H.email?"border-red-500/50 focus:border-red-400":"border-white/10 focus:border-white/30 focus:bg-[#1a1d21]/80"),placeholder:"Enter your email address"}),H.email&&Y.jsxs("p",{className:"text-red-400 text-xs mt-2 flex items-center gap-1",children:[Y.jsx(ve,{className:"w-3 h-3"}),H.email]})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-white/60 mb-2 text-sm font-medium",children:"Username"}),Y.jsx("input",{type:"text",value:I.username,onChange:e=>He("username",e.target.value),className:"w-full bg-[#1a1d21] border rounded-full px-4 py-3 text-white focus:outline-none transition-all duration-200 "+(H.username?"border-red-500/50 focus:border-red-400":"border-white/10 focus:border-white/30 focus:bg-[#1a1d21]/80"),placeholder:"Enter your username"}),H.username&&Y.jsxs("p",{className:"text-red-400 text-xs mt-2 flex items-center gap-1",children:[Y.jsx(ve,{className:"w-3 h-3"}),H.username]})]})]}),Y.jsx("div",{className:"flex justify-end pt-2",children:Y.jsx("button",{type:"submit",disabled:F,className:"px-8 py-3 rounded-full font-semibold transition-all duration-200 "+(F?"bg-white/10 text-white/40 cursor-not-allowed":"bg-white text-black hover:bg-white/90 hover:scale-105 active:scale-95"),children:F?"Updating...":"Update Account"})})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-4 sm:p-6 border border-white/10",children:[Y.jsxs("div",{className:"flex items-center gap-3 mb-4 sm:mb-6",children:[Y.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/20",children:Y.jsx(be,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white","aria-hidden":"true"})}),Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-lg sm:text-xl font-bold",children:"Security"}),Y.jsx("p",{className:"text-white/60 text-xs sm:text-sm",children:"Manage your account security settings"})]})]}),Y.jsx("form",{onSubmit:async e=>{e.preventDefault();const t=(()=>{const e={};return I.currentPassword||(e.currentPassword="Current password is required"),I.newPassword?8>I.newPassword.length?e.newPassword="Password must be at least 8 characters":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(I.newPassword)||(e.newPassword="Password must contain at least one lowercase letter, one uppercase letter, and one number"):e.newPassword="New password is required",I.newPassword!==I.confirmPassword&&(e.confirmPassword="Passwords do not match"),e})();if(Object.keys(t).length>0)W(t);else try{D(!0),W({}),await gt.changePassword(I.currentPassword,I.newPassword),A((e=>({...e,currentPassword:"",newPassword:"",confirmPassword:""}))),se.success("Password changed successfully")}catch(s){se.error(s?.message||"Failed to change password")}finally{D(!1)}},className:"space-y-6 mb-8",children:Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-4 border border-white/10",children:[Y.jsxs("h4",{className:"font-semibold text-white mb-4 flex items-center gap-2",children:[Y.jsx("div",{className:"w-6 h-6 rounded-full bg-white/10 flex items-center justify-center",children:Y.jsx(be,{className:"w-4 h-4 text-white"})}),"Change Password"]}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Y.jsxs("div",{children:[Y.jsx("input",{type:"password",value:I.currentPassword,onChange:e=>He("currentPassword",e.target.value),placeholder:"Current password",className:"w-full bg-[#1a1d21] border rounded-full px-4 py-3 text-white focus:outline-none transition-all duration-200 "+(H.currentPassword?"border-red-500/50 focus:border-red-400":"border-white/10 focus:border-white/30 focus:bg-[#1a1d21]/80")}),H.currentPassword&&Y.jsxs("p",{className:"text-red-400 text-xs mt-2 flex items-center gap-1",children:[Y.jsx(ve,{className:"w-3 h-3"}),H.currentPassword]})]}),Y.jsxs("div",{children:[Y.jsx("input",{type:"password",value:I.newPassword,onChange:e=>He("newPassword",e.target.value),placeholder:"New password",className:"w-full bg-[#1a1d21] border rounded-full px-4 py-3 text-white focus:outline-none transition-all duration-200 "+(H.newPassword?"border-red-500/50 focus:border-red-400":"border-white/10 focus:border-white/30 focus:bg-[#1a1d21]/80")}),H.newPassword&&Y.jsxs("p",{className:"text-red-400 text-xs mt-2 flex items-center gap-1",children:[Y.jsx(ve,{className:"w-3 h-3"}),H.newPassword]})]}),Y.jsxs("div",{children:[Y.jsx("input",{type:"password",value:I.confirmPassword,onChange:e=>He("confirmPassword",e.target.value),placeholder:"Confirm new password",className:"w-full bg-[#1a1d21] border rounded-full px-4 py-3 text-white focus:outline-none transition-all duration-200 "+(H.confirmPassword?"border-red-500/50 focus:border-red-400":"border-white/10 focus:border-white/30 focus:bg-[#1a1d21]/80")}),H.confirmPassword&&Y.jsxs("p",{className:"text-red-400 text-xs mt-2 flex items-center gap-1",children:[Y.jsx(ve,{className:"w-3 h-3"}),H.confirmPassword]})]})]}),Y.jsx("div",{className:"flex justify-end pt-4",children:Y.jsx("button",{type:"submit",disabled:B,className:"px-6 py-3 rounded-full font-semibold transition-all duration-200 "+(B?"bg-white/10 text-white/40 cursor-not-allowed":"bg-white text-black hover:bg-white/90 hover:scale-105 active:scale-95"),children:B?"Changing...":"Change Password"})})]})}),Y.jsx("div",{className:"bg-[#1a1d21] rounded-xl p-4 border border-white/10",children:Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsxs("h4",{className:"font-semibold flex items-center gap-2 mb-2",children:[Y.jsx("div",{className:"w-6 h-6 rounded-full bg-white/10 flex items-center justify-center",children:Y.jsx(ye,{className:"w-4 h-4 text-white"})}),"Two-Factor Authentication"]}),Y.jsx("p",{className:"text-white/60 text-sm mb-3",children:"Add an extra layer of security to your account"}),O&&Y.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[Y.jsx("div",{className:"w-4 h-4 rounded-full bg-green-400/20 flex items-center justify-center",children:Y.jsx(je,{className:"w-3 h-3"})}),"Two-factor authentication is enabled"]})]}),Y.jsx("button",{onClick:async()=>{O?ee(!0):J(!0)},className:"px-6 py-3 rounded-full font-semibold transition-all duration-200 "+(O?"bg-red-500/20 text-red-400 border border-red-500/30 hover:bg-red-500/30":"bg-white text-black hover:bg-white/90 hover:scale-105 active:scale-95"),children:O?"Disable":"Enable"})]}),O&&Y.jsx("div",{className:"pt-4 border-t border-white/10",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsx("h5",{className:"font-medium text-white mb-1",children:"Backup Codes"}),Y.jsx("p",{className:"text-white/50 text-xs",children:"Manage your backup codes for account recovery"})]}),Y.jsx("button",{onClick:()=>{Se(!0)},className:"px-4 py-2 bg-white/10 text-white rounded-full hover:bg-white/20 transition-all duration-200 text-sm",children:"Manage Codes"})]})})]})})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-6 border border-white/10",children:[Y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Y.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center border border-white/20",children:Y.jsx(Ne,{className:"w-5 h-5 text-white","aria-hidden":"true"})}),Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-xl font-bold",children:"Connected Accounts"}),Y.jsx("p",{className:"text-white/60 text-sm",children:"Link your external accounts for easy access"})]})]}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Y.jsxs("div",{className:"flex items-center justify-between bg-[#1a1d21] rounded-full p-4 border border-white/10 hover:bg-[#1a1d21]/80 transition-all duration-200",children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-lg",children:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 48 48",children:Y.jsx("path",{fill:"#4285F4",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"})})}),Y.jsxs("div",{children:[Y.jsx("span",{className:"text-white font-semibold",children:"Google"}),Te.googleId?Y.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs",children:[Y.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),"Connected"]}):Y.jsx("p",{className:"text-white/40 text-xs",children:"Not connected"})]})]}),Te.googleId?Y.jsx("button",{onClick:()=>Oe("google"),className:"px-4 py-2 bg-red-500/10 text-red-400 rounded-full hover:bg-red-500/20 transition-all duration-200 border border-red-500/20 hover:scale-105 active:scale-95",children:"Disconnect"}):Y.jsx("button",{onClick:()=>We("google"),className:"px-4 py-2 bg-white text-black rounded-full hover:bg-white/90 transition-all duration-200 hover:scale-105 active:scale-95",children:"Connect"})]}),Y.jsxs("div",{className:"flex items-center justify-between bg-[#1a1d21] rounded-full p-4 border border-white/10 hover:bg-[#1a1d21]/80 transition-all duration-200",children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-lg",children:Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 16 16",fill:"black",children:Y.jsx("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})}),Y.jsxs("div",{children:[Y.jsx("span",{className:"text-white font-semibold",children:"GitHub"}),Te.githubId?Y.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs",children:[Y.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),"Connected"]}):Y.jsx("p",{className:"text-white/40 text-xs",children:"Not connected"})]})]}),Te.githubId?Y.jsx("button",{onClick:()=>Oe("github"),className:"px-4 py-2 bg-red-500/10 text-red-400 rounded-full hover:bg-red-500/20 transition-all duration-200 border border-red-500/20 hover:scale-105 active:scale-95",children:"Disconnect"}):Y.jsx("button",{onClick:()=>We("github"),className:"px-4 py-2 bg-white text-black rounded-full hover:bg-white/90 transition-all duration-200 hover:scale-105 active:scale-95",children:"Connect"})]})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-6 border border-red-500/20",children:[Y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[Y.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500/10 flex items-center justify-center border border-red-500/20",children:Y.jsx(ke,{className:"w-5 h-5 text-red-400","aria-hidden":"true"})}),Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-xl font-bold text-red-400",children:"Danger Zone"}),Y.jsx("p",{className:"text-white/60 text-sm",children:"Irreversible actions that affect your account"})]})]}),Y.jsxs("div",{className:"bg-red-500/5 rounded-xl p-6 border border-red-500/20",children:[Y.jsxs("h4",{className:"font-semibold text-red-400 mb-3 flex items-center gap-2",children:[Y.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500/20 flex items-center justify-center",children:Y.jsx(ke,{className:"w-3 h-3 text-red-400"})}),"Delete Account"]}),Y.jsx("p",{className:"text-white/60 text-sm mb-4 leading-relaxed",children:"Once you delete your account, there is no going back. Please be certain."}),Y.jsx("p",{className:"text-white/60 text-sm mb-4 font-medium",children:"This will permanently delete:"}),Y.jsxs("ul",{className:"text-white/60 text-sm mb-6 list-disc list-inside space-y-2",children:[Y.jsx("li",{children:"Your profile and account information"}),Y.jsx("li",{children:"Your watchlist and viewing history"}),Y.jsx("li",{children:"Your reviews and ratings"}),Y.jsx("li",{children:"All associated data and preferences"})]}),q?Y.jsx("div",{className:"space-y-4",children:Y.jsxs("div",{className:"bg-red-500/10 rounded-xl p-6 border border-red-500/30",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Y.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500/20 flex items-center justify-center",children:Y.jsx(ve,{className:"w-4 h-4 text-red-400"})}),Y.jsx("p",{className:"text-red-400 font-semibold text-lg",children:"Final Confirmation"})]}),Y.jsx("p",{className:"text-white/80 text-sm mb-4 leading-relaxed",children:'Type "DELETE" to confirm account deletion:'}),Y.jsx("input",{type:"text",placeholder:"Type DELETE to confirm",className:"w-full bg-[#1a1d21] border border-red-500/30 rounded-full px-4 py-3 text-white focus:outline-none focus:border-red-400 mb-4 transition-all duration-200",onChange:e=>{"DELETE"===e.target.value?e.target.dataset.confirmed="true":e.target.dataset.confirmed="false"}}),Y.jsxs("div",{className:"flex gap-3",children:[Y.jsx("button",{onClick:async()=>{try{await gt.deleteAccount(),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),se.success("Account deleted successfully"),ze("/")}catch(e){se.error(e?.message||"Failed to delete account")}},disabled:"true"!==document.querySelector('input[placeholder="Type DELETE to confirm"]')?.dataset.confirmed,className:"px-6 py-3 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all duration-200 hover:scale-105 active:scale-95 font-semibold disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:"Yes, Delete My Account"}),Y.jsx("button",{onClick:()=>Z(!1),className:"px-6 py-3 bg-white/10 text-white rounded-full hover:bg-white/20 transition-all duration-200 hover:scale-105 active:scale-95 font-semibold",children:"Cancel"})]})]})}):Y.jsx("button",{onClick:()=>Z(!0),className:"px-6 py-3 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all duration-200 hover:scale-105 active:scale-95 font-semibold",children:"Delete Account"})]})]})]})]},u)}),Me&&Y.jsx(K.Suspense,{fallback:null,children:Y.jsx(ks,{movie:Me,onClose:()=>Le(null),onMovieSelect:Le,onGenreClick:()=>{}})})]})]})}),G&&Y.jsx(M,{onSetupComplete:()=>{J(!1),$(!0),se.success("Two-factor authentication enabled successfully")},onCancel:()=>J(!1)}),X&&Y.jsx(L,{onDisable:()=>{ee(!1),$(!1),se.success("Two-factor authentication disabled successfully")},onCancel:()=>ee(!1)}),Ce&&Y.jsx(P,{onClose:()=>Se(!1)}),k&&Y.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:Y.jsx(Ft.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-[#1a1d21] rounded-2xl p-8 max-w-md w-full border border-white/10",children:Y.jsxs("div",{className:"text-center space-y-6",children:[Y.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-500/20 flex items-center justify-center mx-auto border border-yellow-500/30",children:Y.jsx("svg",{className:"w-8 h-8 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Unsaved Changes"}),Y.jsx("p",{className:"text-white/60 text-sm",children:"You have unsaved changes to your profile. Are you sure you want to discard them?"})]}),Y.jsxs("div",{className:"bg-yellow-500/10 rounded-2xl p-4 border border-yellow-500/20",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Y.jsx("svg",{className:"w-5 h-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})}),Y.jsx("span",{className:"font-semibold text-yellow-400",children:"Warning"})]}),Y.jsx("p",{className:"text-yellow-300/80 text-sm",children:"This action cannot be undone. All unsaved changes will be lost."})]}),Y.jsxs("div",{className:"flex gap-3 pt-4",children:[Y.jsx("button",{onClick:()=>{C(!1)},className:"flex-1 px-6 py-3 bg-white/10 text-white rounded-full hover:bg-white/20 transition-all duration-200",children:"Continue Editing"}),Y.jsx("button",{onClick:()=>{_e(z),x(!1),R(null),C(!1)},className:"flex-1 px-6 py-3 bg-red-500 text-white rounded-full hover:bg-red-600 transition-all duration-200 font-semibold",children:"Discard Changes"})]})]})})})]})}},Symbol.toStringTag,{value:"Module"})),Ts=U.lazy((()=>f((()=>import("./components-AkFFl9dE.js").then((e=>e.a7))),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url))),_s="https://placehold.co/500x750/1a1d21/ffffff?text=No+Image",Ms=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{watchlist:e,removeFromWatchlist:s,clearWatchlist:r}=t(),{user:a}=_();U.useEffect((()=>{if(a)try{localStorage.removeItem("watchlist_banner_dismissed")}catch(e){}}),[a]);const[i,n]=U.useState(!0),[o,c]=U.useState(null),[d,u]=U.useState(null),[m,h]=U.useState("all"),[x,p]=U.useState("added"),[g,f]=U.useState(!1),[w,v]=U.useState((()=>{try{return localStorage.getItem("watchlist_view_mode")||"grid"}catch(e){return"grid"}})),[b,y]=U.useState(!1),[j,N]=U.useState({}),[k,C]=U.useState(!1),[S,M]=U.useState((()=>{try{return!localStorage.getItem("watchlist_banner_dismissed")}catch(e){return!0}})),L=U.useRef({getItem:e=>{try{return localStorage.getItem(e)}catch(t){return null}},setItem:(e,t)=>{try{localStorage.setItem(e,t)}catch(s){}}}),P=Q(),E=U.useRef(null),z=U.useRef(null),{getRubberBandVariants:R,getBackgroundTransition:I}=Ie(m);U.useEffect((()=>{n(!1)}),[]),U.useEffect((()=>{try{localStorage.setItem("watchlist_view_mode",w)}catch(e){}}),[w]),U.useEffect((()=>()=>{u(null),f(!1),C(!1),N({})}),[]),U.useEffect((()=>{}),[]),U.useEffect((()=>{}),[e.length]),U.useEffect((()=>{if(!g)return;const e=e=>{E.current&&!E.current.contains(e.target)&&f(!1)},t=e=>{"Escape"===e.key&&f(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}}),[g]),U.useEffect((()=>{if(!k)return;const e=e=>{z.current&&!z.current.contains(e.target)&&C(!1)},t=e=>{"Escape"===e.key&&C(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}}),[k]);const A=U.useCallback((e=>{u(e)}),[]),F=U.useCallback((e=>{if(e&&e.id){const t=new URLSearchParams;t.set("genre",e.name.toLowerCase()),t.set("category","popular"),window.location.href="/movies?"+t.toString()}}),[]),V=U.useCallback((e=>{s(e)}),[s]),B=U.useCallback((e=>{N((t=>({...t,[e]:!0})))}),[]),D=U.useCallback((e=>{N((t=>({...t,[e]:"error"})))}),[]),H=U.useCallback((e=>{const t=setTimeout((()=>{B(e)}),50);return()=>clearTimeout(t)}),[B]);U.useEffect((()=>{const t=new Set(e.map((e=>e.id)));N((e=>{const s={};return Object.keys(e).forEach((r=>{t.has(parseInt(r))&&(s[r]=e[r])})),s}))}),[e]);const W=e=>e?e.startsWith("http")?e:"https://image.tmdb.org/t/p/w500"+e:_s,O=U.useMemo((()=>{let t=[...e];switch("all"!==m&&(t=t.filter((e=>e.type===m))),x){case"title":t.sort(((e,t)=>e.title.localeCompare(t.title)));break;case"rating":t.sort(((e,t)=>t.rating-e.rating));break;case"year":t.sort(((e,t)=>t.year-e.year))}return t}),[e,m,x]),$=()=>{M(!1),L.current.setItem("watchlist_banner_dismissed","true")},q=U.useCallback((e=>{e===w||b||(y(!0),v(e),setTimeout((()=>{y(!1)}),250))}),[w,b]);if(i)return Y.jsx(l,{});if(o)return Y.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[#0f1114]",children:Y.jsx("div",{className:"text-white text-xl",children:o})});const Z=O;return Y.jsxs("div",{className:"min-h-screen bg-[#0f1114] text-white",children:[Y.jsxs("div",{className:"container mx-auto px-3 sm:px-6 py-4 sm:py-8",children:[!a&&S&&Y.jsx(Ft.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 transparent border border-white/15 rounded-xl p-4 shadow-lg",children:Y.jsxs("div",{className:"flex items-start justify-between",children:[Y.jsxs("div",{className:"flex-1",children:[Y.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[Y.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Y.jsx("h3",{className:"text-white font-medium",children:"Using Local Watchlist"})]}),Y.jsx("p",{className:"text-white/70 text-sm mb-3",children:"true"===L.current.getItem("watchlist_banner_dismissed")?"Still using local storage? Sign in to sync your watchlist across all devices.":"You're viewing your local watchlist. Sign in to sync your watchlist across all your devices and never lose your saved movies."}),Y.jsxs("div",{className:"flex gap-2",children:[Y.jsx(Ft.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>P("/login"),className:"px-4 py-2 bg-white text-black hover:bg-white/90 text-sm font-medium rounded-full transition-colors",children:"Sign In"}),Y.jsx(Ft.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:$,className:"px-4 py-2 bg-transparent border border-white/30 hover:border-white/60 text-white/80 hover:text-white text-sm font-medium rounded-full transition-colors",children:"Dismiss"})]})]}),Y.jsx("button",{onClick:$,className:"text-white/50 hover:text-white/70 transition-colors ml-4",children:Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),Y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 sm:mb-8 gap-4 sm:gap-0",children:[Y.jsxs("div",{className:"flex flex-row justify-between sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-0 w-full sm:w-auto",children:[Y.jsxs("h1",{className:"flex items-center gap-2 text-xl sm:text-xl font-bold text-left tracking-tight","aria-label":"Your Watchlist",children:[Y.jsxs("span",{className:"inline-flex items-center",children:[Y.jsx("svg",{className:"w-6 h-6 text-primary-500 mr-2",fill:"none",stroke:"white",strokeWidth:2,viewBox:"0 0 24 24","aria-hidden":"true",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-4-7 4V5z"})}),Y.jsx("span",{children:"My List"})]}),Y.jsxs("span",{className:"text-sm font-semibold text-gray-400/80",children:["(",Z.length,")"]})]}),Y.jsxs("div",{className:"flex items-center gap-2 sm:hidden",children:[Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsxs("button",{onClick:()=>q("grid"),className:`relative px-4 py-2 text-sm font-medium transition-all duration-200 ${"grid"===w?"text-white":"text-white/50 hover:text-white/70"} ${b?"opacity-50 cursor-not-allowed":""}`,title:"Card View",type:"button",disabled:b,children:[Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"grid"===w&&Y.jsx(Ft.div,{layoutId:"watchlistViewToggleUnderline",className:"absolute left-0 right-0 bottom-0 h-0.5 bg-white/70"})]}),Y.jsxs("button",{onClick:()=>q("list"),className:`relative px-4 py-2 text-sm font-medium transition-all duration-200 ${"list"===w?"text-white":"text-white/50 hover:text-white/70"} ${b?"opacity-50 cursor-not-allowed":""}`,title:"List View",type:"button",disabled:b,children:[Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"list"===w&&Y.jsx(Ft.div,{layoutId:"watchlistViewToggleUnderline",className:"absolute left-0 right-0 bottom-0 h-0.5 bg-white/70"})]})]}),Z.length>0&&Y.jsxs(Ft.button,{onClick:()=>C(!0),className:"relative px-3 py-2 rounded-full font-medium text-sm transition-colors duration-200 shadow-sm overflow-hidden focus:outline-none bg-[#1a1d21] text-gray-400 hover:text-black hover:bg-white flex-shrink-0 group",style:{minWidth:80},whileHover:{scale:1.02},transition:{duration:.2},children:[Y.jsx("div",{className:"absolute inset-0 rounded-full bg-white/90 opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out transform scale-0 group-hover:scale-100 origin-center"}),Y.jsx("span",{className:"relative z-10 group-hover:text-black transition-colors duration-200",children:"Clear All"})]})]})]}),Y.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-2 w-full sm:w-auto",children:[Y.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[Y.jsx("div",{className:"relative inline-flex items-center bg-[#1a1d21] rounded-full p-1 flex-1 sm:flex-none",children:[{id:"all",label:"All"},{id:"movie",label:"Movies"},{id:"tv",label:"TV Shows"}].map((e=>Y.jsxs("button",{onClick:()=>h(e.id),className:"relative px-3 sm:px-4 py-2 sm:py-2 rounded-full text-sm font-medium transition-colors focus:outline-none whitespace-nowrap flex-1 sm:flex-none "+(m===e.id?"text-black":"text-gray-400 hover:text-white"),children:[Y.jsx("span",{className:"relative z-10",children:e.label}),m===e.id&&Y.jsx(Ft.div,{layoutId:"activeWatchlistTab",className:"absolute inset-0 bg-white rounded-full",variants:R(),initial:"initial",animate:"animate",exit:"exit",transition:I()})]},e.id)))}),Y.jsxs("div",{className:"relative flex-shrink-0",ref:E,children:[Y.jsxs(Ft.button,{onClick:()=>f(!g),className:"relative flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2 rounded-full text-sm font-medium transition-colors focus:outline-none whitespace-nowrap bg-[#1a1d21] "+(g?"text-black":"text-gray-400 hover:text-white"),style:{minWidth:"100px",height:"40px"},"aria-haspopup":"listbox","aria-expanded":g,children:[Y.jsx(Vt,{children:g?Y.jsx(Ft.div,{layoutId:"activeWatchlistTabSort",className:"absolute inset-0 bg-white rounded-full z-0",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.2,ease:[.4,0,.2,1]}},"sortby-bg-open"):Y.jsx(Ft.div,{className:"absolute inset-0 rounded-full z-0",initial:{backgroundColor:"rgba(255,255,255,0)"},whileHover:{backgroundColor:"rgba(255,255,255,0.13)"},transition:I()},"sortby-bg-hover")}),Y.jsxs("span",{className:"relative z-10 text-xs sm:text-sm",children:["Sort: ",x.charAt(0).toUpperCase()+x.slice(1)]}),Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 sm:h-4 sm:w-4 transition-transform relative z-10 "+(g?"rotate-180":""),viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M7 10l5 5 5-5z"})})]}),Y.jsx(Vt,{children:g&&Y.jsxs(Ft.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.22,ease:[.4,0,.2,1]},className:"absolute z-50",style:{top:"100%",left:"0",right:"0",marginTop:"4px",background:"#1a1d21",borderRadius:"0.75rem",boxShadow:"0 10px 32px 0 rgba(0,0,0,0.25)",padding:"0.25rem 0",border:"1px solid rgba(255,255,255,0.1)",minWidth:"160px",maxWidth:"100%"},tabIndex:-1,children:[Y.jsx("button",{onClick:()=>{p("added"),f(!1)},className:"w-full px-4 py-2 text-left text-sm rounded-lg transition-colors duration-150 hover:bg-white/10 focus:bg-white/10 outline-none "+("added"===x?"text-white font-semibold":"text-white/60"),children:"Recently Added"}),Y.jsx("button",{onClick:()=>{p("title"),f(!1)},className:"w-full px-4 py-2 text-left text-sm rounded-lg transition-colors duration-150 hover:bg-white/10 focus:bg-white/10 outline-none "+("title"===x?"text-white font-semibold":"text-white/60"),children:"Title"}),Y.jsx("button",{onClick:()=>{p("rating"),f(!1)},className:"w-full px-4 py-2 text-left text-sm rounded-lg transition-colors duration-150 hover:bg-white/10 focus:bg-white/10 outline-none "+("rating"===x?"text-white font-semibold":"text-white/60"),children:"Rating"}),Y.jsx("button",{onClick:()=>{p("year"),f(!1)},className:"w-full px-4 py-2 text-left text-sm rounded-lg transition-colors duration-150 hover:bg-white/10 focus:bg-white/10 outline-none "+("year"===x?"text-white font-semibold":"text-white/60"),children:"Year"})]},"sort-dropdown")})]}),Y.jsxs("div",{className:"hidden sm:flex items-center gap-2 ml-1",children:[Y.jsxs("button",{onClick:()=>q("grid"),className:`relative px-4 py-2 text-sm font-medium transition-all duration-200 transform-gpu will-change-transform ${"grid"===w?"text-white":"text-white/50 hover:text-white/70"} ${b?"opacity-50 cursor-not-allowed":""}`,title:"Card View",type:"button",disabled:b,children:[Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"grid"===w&&Y.jsx(Ft.div,{layoutId:"watchlistViewToggleUnderline",className:"absolute left-0 right-0 bottom-0 h-0.5 bg-white/70"})]}),Y.jsxs("button",{onClick:()=>q("list"),className:`relative px-4 py-2 text-sm font-medium transition-all duration-200 ${"list"===w?"text-white":"text-white/50 hover:text-white/70"} ${b?"opacity-50 cursor-not-allowed":""}`,title:"List View",type:"button",disabled:b,children:[Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"list"===w&&Y.jsx(Ft.div,{layoutId:"watchlistViewToggleUnderline",className:"absolute left-0 right-0 bottom-0 h-0.5 bg-white/70"})]})]})]}),Y.jsx("div",{className:"hidden sm:flex",children:Z.length>0&&Y.jsxs(Ft.button,{onClick:()=>C(!0),className:"relative px-4 py-2.5 rounded-full font-medium text-sm transition-colors duration-200 shadow-sm overflow-hidden focus:outline-none bg-[#1a1d21] text-gray-400 hover:text-black hover:bg-white flex-shrink-0 ml-2 group",style:{minWidth:90},whileHover:{scale:1.02},transition:{duration:.2},children:[Y.jsx("div",{className:"absolute inset-0 rounded-full bg-white/90 opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out transform scale-0 group-hover:scale-100 origin-center"}),Y.jsx("span",{className:"relative z-10 group-hover:text-black transition-colors duration-200",children:"Clear All"})]})})]})]}),Y.jsx(Vt,{children:k&&Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.22,ease:[.4,0,.2,1]},className:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/60 backdrop-blur-sm","aria-modal":"true",role:"dialog",children:Y.jsxs(Ft.div,{ref:z,initial:{opacity:0,scale:.95,y:40},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:40},transition:{type:"spring",stiffness:400,damping:32},className:"bg-[#181b20] rounded-2xl shadow-2xl border border-white/10 p-6 w-full max-w-xs sm:max-w-sm flex flex-col items-center text-center",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-white/60 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Y.jsx("h2",{className:"text-lg font-bold mb-2 text-white",children:"movie"===m?"Clear Movies?":"tv"===m?"Clear TV Shows?":"Clear Watchlist?"}),Y.jsx("p",{className:"text-white/70 mb-6 text-sm",children:"movie"===m?"This will remove all movies from your watchlist. This action cannot be undone.":"tv"===m?"This will remove all TV shows from your watchlist. This action cannot be undone.":"This will remove all movies and TV shows from your watchlist. This action cannot be undone."}),Y.jsxs("div",{className:"flex gap-3 w-full",children:[Y.jsx(Ft.button,{whileHover:{scale:1.04},whileTap:{scale:.97},onClick:()=>C(!1),className:"flex-1 px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-colors duration-200 overflow-hidden focus:outline-none bg-[#1a1d21] text-gray-400 hover:text-black hover:bg-white hover:border-white border border-white/30",children:"Cancel"}),Y.jsx(Ft.button,{whileHover:{scale:1.04},whileTap:{scale:.97},onClick:()=>{"all"===m?r():e.filter((e=>e.type===m)).forEach((e=>s(e.id))),C(!1)},className:"flex-1 px-4 py-2 rounded-lg font-medium text-xs sm:text-sm transition-colors duration-200 overflow-hidden focus:outline-none bg-[#1a1d21] text-gray-400 hover:text-black hover:bg-white hover:border-white border border-white/30",children:"Clear All"})]})]},"dialog-content")},"dialog-backdrop")}),Z.length>0?Y.jsx(Vt,{mode:"wait",initial:!1,children:"grid"===w?Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.18,ease:[.4,0,.2,1]},style:{contain:"layout"},className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 3xl:grid-cols-10 gap-4",children:Z.map(((e,t)=>Y.jsxs(Ft.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.05*t,ease:[.25,.46,.45,.94]},whileHover:{transition:{duration:.3,ease:"easeOut"}},className:"group relative aspect-[2/3] rounded-lg overflow-hidden bg-[#1a1d21] cursor-pointer w-full max-w-xs mx-auto transform-gpu transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl hover:shadow-black/30 hover:ring-1 hover:ring-white/10 origin-top-right",onClick:()=>A(e),children:[Y.jsxs("div",{className:"relative w-full h-full",children:[!j[e.id]&&Y.jsx("div",{className:"absolute inset-0 bg-[#1a1d21] animate-pulse"}),Y.jsx("img",{src:W(e.poster_path),alt:e.title,className:"w-full h-full object-cover transition-all duration-300 group-hover:scale-110 md:group-hover:brightness-105 "+(j[e.id]?"opacity-100":"opacity-0"),onLoad:()=>H(e.id),onError:t=>{D(e.id),t.target.src=_s},loading:"lazy",decoding:"async"})]}),Y.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity duration-300",children:Y.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 sm:p-4",children:[Y.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1 sm:mb-2",children:[Y.jsx("h3",{className:"text-white font-medium text-xs sm:text-base line-clamp-2",children:e.title}),Y.jsx("span",{className:"px-2 py-0.5 bg-white/10 text-white/80 text-xs font-medium rounded-full border border-white/10 flex-shrink-0",children:"tv"===e.type?"TV":"Movie"})]}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsx("p",{className:"text-xs sm:text-sm text-white/60",children:e.year}),Y.jsx("span",{className:"text-white/40",children:"•"}),Y.jsxs("div",{className:"flex items-center gap-1",children:[Y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 sm:h-3.5 sm:w-3.5 text-yellow-400",viewBox:" 0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),Y.jsx("span",{className:"text-xs sm:text-sm text-white/80",children:T(e.rating)})]})]})]})}),Y.jsx("button",{onClick:t=>{t.stopPropagation(),V(e.id)},className:"absolute top-2 right-2 z-10 p-2 sm:p-1.5 bg-black/50 rounded-full transition-colors duration-300 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 w-9 h-9 sm:w-7 sm:h-7 flex items-center justify-center","aria-label":"Remove from watchlist",style:{touchAction:"manipulation"},children:Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Y.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},e.id)))},"watchlist-grid"):Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.18,ease:[.4,0,.2,1]},style:{contain:"layout"},className:"space-y-3",children:Z.map(((e,t)=>Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.05*t,ease:[.25,.46,.45,.94]},whileHover:{transition:{duration:.3,ease:"easeOut"}},className:"bg-[#1a1d21] rounded-lg overflow-hidden cursor-pointer group relative transform-gpu transition-all duration-300 hover:scale-[1.005] hover:shadow-xl hover:shadow-black/20 hover:ring-1 hover:ring-white/10 h-20 sm:h-24 origin-top-right",onClick:()=>A(e),children:Y.jsxs("div",{className:"flex h-full",children:[Y.jsxs("div",{className:"w-32 h-20 sm:w-36 sm:h-24 flex-shrink-0 relative p-2",children:[!j[e.id]&&Y.jsx("div",{className:"absolute inset-2 bg-[#22262b] rounded"}),Y.jsx("img",{src:W(e.backdrop_path||e.poster_path),alt:e.title,className:"w-full h-full object-cover rounded transition-all duration-300 "+(j[e.id]?"opacity-100":"opacity-0"),onLoad:()=>H(e.id),onError:t=>{D(e.id),t.target.src=_s},loading:"lazy",decoding:"async"}),Y.jsx("div",{className:"absolute top-3 left-3 bg-black/70 text-white text-[10px] px-1 py-0.5 rounded",children:"tv"===e.type?"TV":"Movie"})]}),Y.jsxs("div",{className:"flex-1 p-3 sm:p-4 flex flex-col justify-between min-w-0",children:[Y.jsxs("div",{className:"flex-1 min-h-0",children:[Y.jsxs("div",{className:"flex items-start justify-between mb-1",children:[Y.jsx("h4",{className:"font-medium text-sm sm:text-base text-white group-hover:text-white-400 transition-colors line-clamp-1 pr-8",children:e.title}),Y.jsx("div",{className:"absolute top-2 right-2",children:Y.jsx("button",{onClick:t=>{t.stopPropagation(),V(e.id)},className:"p-2 bg-black/50 rounded-full transition-colors duration-300 w-8 h-8 flex items-center justify-center","aria-label":"Remove from watchlist",children:Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Y.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Y.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})})]}),Y.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/70",children:[Y.jsx("span",{children:e.year}),Y.jsx("span",{children:"•"}),Y.jsxs("span",{className:"flex items-center gap-1",children:[Y.jsx("svg",{className:"w-3 h-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:Y.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),Y.jsx("span",{children:T(e.rating)})]}),e.genres&&Array.isArray(e.genres)&&e.genres.length>0&&Y.jsxs(Y.Fragment,{children:[Y.jsx("span",{children:"•"}),Y.jsx("span",{className:"truncate max-w-[40%] text-white/60",children:(()=>{const t=e.genres[0];return"object"==typeof t&&t.name?t.name:"string"==typeof t?t:"number"==typeof t?{28:"Action",12:"Adventure",16:"Animation",35:"Comedy",80:"Crime",99:"Documentary",18:"Drama",10751:"Family",14:"Fantasy",36:"History",27:"Horror",10402:"Music",9648:"Mystery",10749:"Romance",878:"Science Fiction",10770:"TV Movie",53:"Thriller",10752:"War",37:"Western"}[t]||"Genre "+t:""})()})]})]})]}),e.overview&&Y.jsx("div",{className:"flex-shrink-0 mt-1",children:Y.jsx("p",{className:"text-xs text-white/60 line-clamp-1 truncate",children:e.overview})})]})]})},e.id)))},"watchlist-list")}):Y.jsxs(Ft.div,{initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-30,scale:.95},transition:{duration:.4,ease:[.4,0,.2,1],delay:.05},className:"flex flex-col items-center justify-center min-h-[50vh] text-center px-2 sm:px-0",children:[Y.jsx(Ft.div,{initial:{opacity:0,scale:.8,rotate:-10},animate:{opacity:1,scale:1,rotate:0},transition:{duration:.5,ease:[.4,0,.2,1],delay:.1},className:"relative mb-6 sm:mb-8",children:Y.jsxs("div",{className:"relative w-24 h-24 sm:w-32 sm:h-32",children:[Y.jsx(Ft.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.4,delay:.15},className:"absolute inset-0 bg-gradient-to-br from-white/10 via-white/5 to-transparent rounded-full"}),Y.jsxs(Ft.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,delay:.2},className:"absolute inset-0 flex items-center justify-center",children:[Y.jsx(Ft.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 sm:h-16 sm:w-16 text-white/30",viewBox:"0 0 24 24",fill:"currentColor",initial:{scale:.8,rotate:-5},animate:{scale:[1,1.05,1],rotate:[-2,2,-2],y:[0,-3,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:.25},children:Y.jsx("path",{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"})}),Y.jsxs(Ft.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},className:"absolute inset-0",children:[Y.jsx(Ft.div,{initial:{x:-10,y:-10,opacity:0},animate:{x:[0,5,0],y:[0,-5,0],opacity:1,rotate:[0,10,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:.35},className:"absolute top-1.5 right-1.5 sm:top-2 sm:right-2",children:Y.jsx(Ft.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-6 sm:w-6 text-white/20",viewBox:"0 0 24 24",fill:"currentColor",animate:{scale:[1,1.2,1],opacity:[.2,.4,.2]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:Y.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})}),Y.jsx(Ft.div,{initial:{x:10,y:10,opacity:0},animate:{x:[0,-5,0],y:[0,5,0],opacity:1,rotate:[0,-10,0]},transition:{duration:3.5,repeat:1/0,ease:"easeInOut",delay:.4},className:"absolute bottom-1.5 left-1.5 sm:bottom-2 sm:left-2",children:Y.jsx(Ft.svg,{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 sm:h-5 sm:w-5 text-white/15",viewBox:"0 0 24 24",fill:"currentColor",animate:{scale:[1,1.3,1],opacity:[.15,.3,.15]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:Y.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})})})]}),Y.jsx(Ft.div,{initial:{scale:.8,opacity:0},animate:{scale:[1,1.2,1],opacity:[.3,.1,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5},className:"absolute inset-0 border-2 border-white/10 rounded-full"}),Y.jsx(Ft.div,{initial:{scale:.6,opacity:0},animate:{scale:[.8,1.1,.8],opacity:[.2,.05,.2]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut",delay:.7},className:"absolute inset-0 border border-white/5 rounded-full"}),Y.jsxs(Ft.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.6},className:"absolute inset-0",children:[Y.jsx(Ft.div,{animate:{x:[0,8,0],y:[0,-8,0],opacity:[.3,.8,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:.8},className:"absolute top-3 left-3 sm:top-4 sm:left-4 w-1.5 h-1.5 sm:w-2 sm:h-2 bg-white/20 rounded-full"}),Y.jsx(Ft.div,{animate:{x:[0,-6,0],y:[0,6,0],opacity:[.2,.6,.2]},transition:{duration:2.8,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute bottom-3 right-3 sm:bottom-4 sm:right-4 w-1 h-1 sm:w-1.5 sm:h-1.5 bg-white/15 rounded-full"})]}),Y.jsxs(Ft.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.9},className:"absolute inset-0",children:[Y.jsx(Ft.div,{animate:{rotate:[0,360],scale:[.8,1.2,.8],opacity:[0,.5,0]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:1.2},className:"absolute top-4 right-4 sm:top-6 sm:right-6",children:Y.jsx("svg",{className:"w-2 h-2 sm:w-3 sm:h-3 text-white/30",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),Y.jsx(Ft.div,{animate:{rotate:[360,0],scale:[1.2,.8,1.2],opacity:[0,.4,0]},transition:{duration:3.5,repeat:1/0,ease:"easeInOut",delay:1.5},className:"absolute bottom-4 left-4 sm:bottom-6 sm:left-6",children:Y.jsx("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white/25",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})]})]})]})}),Y.jsxs(Ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:[.4,0,.2,1],delay:.2},children:[Y.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Your watchlist is empty"}),Y.jsx(Ft.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.3},className:"text-white/60 mb-4 sm:mb-6 text-sm sm:text-base",children:a?"Add movies and TV shows to your watchlist to keep track of what you want to watch":"Add movies and TV shows to your local watchlist. Sign in to sync across devices."})]}),Y.jsxs(Ft.button,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.05,transition:{duration:.2}},whileTap:{scale:.95},transition:{duration:.4,ease:[.4,0,.2,1],delay:.4},onClick:()=>P("/"),className:"px-4 py-2.5 sm:px-6 sm:py-3 bg-white text-black rounded-full font-medium hover:bg-white/90 transition-colors relative overflow-hidden group text-sm sm:text-base",children:[Y.jsx(Ft.div,{initial:{x:"-100%"},whileHover:{x:"100%"},transition:{duration:.6,ease:"easeInOut"},className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),Y.jsx("span",{className:"relative z-10",children:"Browse Movies & TV Shows"})]})]})]}),d&&Y.jsx(U.Suspense,{fallback:null,children:Y.jsx(Ts,{movie:d,onClose:()=>u(null),onMovieSelect:A,onGenreClick:F})})]})}},Symbol.toStringTag,{value:"Module"})),Ls=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=U.useRef(!0),{user:t}=_();Q();const[s,r]=U.useState("discussions"),[a,i]=U.useState(""),[n,l]=U.useState([]),[o,c]=U.useState([]),[d,u]=U.useState(null),[m,h]=U.useState(!0),[x,p]=U.useState(null),[g,f]=U.useState(1),[w,v]=U.useState(!0),[b,y]=U.useState("newest"),[j,N]=U.useState(""),[k,C]=U.useState(""),[S,T]=U.useState([]),[M,L]=U.useState([]),[P,E]=U.useState(!1),[V,B]=U.useState(!1),D=U.useRef(null);U.useEffect((()=>{e.current=!0,H(),ft.connect();const t=t=>{e.current&&(l((e=>[t,...e])),u((e=>({...e,totalDiscussions:(e?.totalDiscussions||0)+1,recentActivity:[{icon:Y.jsx("svg",{className:"w-4 h-4 text-white/90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),description:`New discussion created: "${t.title}"`,time:"Just now"},...(e?.recentActivity||[]).slice(0,4)]}))))},s=e=>{l((t=>t.map((t=>(t.id||t._id)===e.discussionId?{...t,likes:e.likes,isLiked:e.isLiked,likesCount:e.likes.length}:t))))},r=e=>{l((t=>t.map((t=>(t.id||t._id)===e.discussionId?{...t,replies:[...t.replies||[],e.reply]}:t)))),u((t=>({...t,totalComments:(t?.totalComments||0)+1,recentActivity:[{icon:Y.jsx("svg",{className:"w-4 h-4 text-white/90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),description:`New reply on "${e.discussionTitle}"`,time:"Just now"},...(t?.recentActivity||[]).slice(0,4)]})))},a=e=>{l((t=>t.map((t=>(t.id||t._id)===e.discussionId?{...t,replies:t.replies.map((t=>(t.id||t._id)===e.replyId?{...t,likes:e.likes,isLiked:e.isLiked,likesCount:e.likes.length}:t))}:t))))},i=e=>{u((t=>({...t,activeUsers:(t?.activeUsers||0)+1,recentActivity:[{icon:Y.jsx("svg",{className:"w-4 h-4 text-white/90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),description:`New user ${e.username} joined the community`,time:"Just now"},...(t?.recentActivity||[]).slice(0,4)]})))};return ft.addListener("discussion:new",t),ft.addListener("discussion:liked",s),ft.addListener("reply:new",r),ft.addListener("reply:liked",a),ft.addListener("user:joined",i),()=>{e.current=!1,ft.removeListener("discussion:new",t),ft.removeListener("discussion:liked",s),ft.removeListener("reply:new",r),ft.removeListener("reply:liked",a),ft.removeListener("user:joined",i),ft.disconnect()}}),[]),U.useEffect((()=>{"discussions"!==s||P||W()}),[s,b,j,k]),U.useEffect((()=>{const e=e=>{V&&D.current&&!D.current.contains(e.target)&&B(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const H=async()=>{try{h(!0);const t=e=>new Promise((t=>setTimeout(t,e)));let s;try{s=await wt.getDiscussions(1,10,b,j,k),l(s.discussions||[]),v(s.currentPage<s.totalPages)}catch(e){if(l([]),v(!1),e.message.includes("Rate limit")||e.message.includes("429"))return void p("Rate limit exceeded. Please wait a moment and refresh the page.")}await t(1e3);const r=async()=>{try{const e=await wt.getCategories();T(e||[]),await t(500);const s=await wt.getTopTags();L(s||[])}catch(e){T([]),L([])}};setTimeout((async()=>{try{const e=await wt.getTrendingTopics();c(e||[]),await t(500);const s=await wt.getCommunityStats();u(s||{})}catch(e){c([]),u({})}}),2e3),setTimeout(r,3e3),p(null)}catch(e){const t=e.message||e.error||"Failed to load community data";429===e.response?.status||e.message.includes("Rate limit")?p("Rate limit exceeded. Please wait a moment and refresh the page."):p(`Error: ${t}. Please check the console for more details.`)}finally{h(!1)}},W=async()=>{try{h(!0);const e=await wt.getDiscussions(g,10,b,j,k);l(e.discussions||[]),v(e.currentPage<e.totalPages),p(null)}catch(e){if(429===e.response?.status||e.message.includes("Rate limit")){const t=e.response?.data?.retryAfter||"15 minutes";p(`Rate limit exceeded. Please wait ${t} before trying again.`)}else{const t=e.message||e.error||"Failed to load discussions";p(`Error: ${t}. Please check the console for more details.`)}}finally{h(!1)}},O=()=>{i(""),E(!1),W()};return m&&!n.length?Y.jsx(z,{}):x?Y.jsx("div",{className:"min-h-screen bg-[#0f1114] text-white p-8",children:Y.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 text-red-500",children:x})}):Y.jsx("div",{className:"min-h-screen bg-[#0f1114] text-white",children:Y.jsxs("div",{className:"max-w-7xl mx-auto px-2 py-4 sm:px-4 sm:py-8",children:[Y.jsxs("div",{className:"flex flex-col space-y-4 mb-8",children:[Y.jsxs("div",{className:"flex justify-between items-center",children:[Y.jsx("h1",{className:"text-3xl font-bold text-white",children:"Community"}),Y.jsxs("div",{className:"flex items-center gap-2",children:[!1,t&&Y.jsx(R,{onDiscussionCreated:e=>{l([e,...n])}})]})]}),Y.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-4",children:[Y.jsx("form",{onSubmit:async e=>{if(e.preventDefault(),!a.trim())return E(!1),void W();try{h(!0),E(!0);const e=await wt.searchDiscussions(a);l(e),v(!1),p(null)}catch(t){if(429===t.response?.status||t.message.includes("Rate limit")){const e=t.response?.data?.retryAfter||"15 minutes";p(`Rate limit exceeded. Please wait ${e} before trying again.`)}else p(t.message||"Search failed. Please try again later.")}finally{h(!1)}},className:"w-full lg:w-1/2",children:Y.jsxs("div",{className:"relative",children:[Y.jsx("input",{type:"text",value:a,onChange:e=>i(e.target.value),placeholder:"Search discussions...",className:"w-full bg-white/5 border border-white/10 rounded-full px-4 py-2 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-white/20"}),a&&Y.jsx("button",{type:"button",onClick:O,className:"absolute right-10 top-1/2 -translate-y-1/2 text-white/60 hover:text-white transition-colors",children:Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),Y.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 text-white/60 hover:text-white transition-colors",children:Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),Y.jsx("div",{className:"w-full lg:w-auto",children:Y.jsx(I,{sortBy:b,onSortChange:y,selectedCategory:j,onCategoryChange:N,selectedTag:k,onTagChange:C,categories:S,topTags:M,onClearFilters:()=>{N(""),C("")}})}),Y.jsxs("div",{className:"flex space-x-2 w-full lg:w-auto",children:[Y.jsx("button",{onClick:()=>{r("discussions"),P&&O()},className:"px-4 py-2 rounded-full whitespace-nowrap flex-1 lg:flex-none transition-colors "+("discussions"===s?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:"Discussions"}),Y.jsx("button",{onClick:()=>{r("trending"),P&&O()},className:"px-4 py-2 rounded-full whitespace-nowrap flex-1 lg:flex-none transition-colors "+("trending"===s?"bg-white/10 text-white":"text-white/60 hover:text-white hover:bg-white/5"),children:"Trending"})]})]})]}),Y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 sm:gap-8",children:[Y.jsx("div",{className:"lg:col-span-3 space-y-4 order-2 lg:order-1",children:m?Y.jsx(A,{count:3}):x?Y.jsxs("div",{className:"text-red-500 text-center p-4 bg-white/5 rounded-lg",children:["Error: ",x]}):0===n.length?Y.jsx("div",{className:"text-center p-8 bg-white/5 border border-white/10 rounded-lg",children:Y.jsx("p",{className:"text-white/70",children:"No discussions found."})}):Y.jsxs("div",{className:"space-y-3",children:[n.map((e=>Y.jsx(F,{discussion:e,onUpdate:t=>{var s;null===t?(s=e._id||e.id,l((e=>e.filter((e=>e._id!==s&&e.id!==s)))),u((e=>({...e,totalDiscussions:Math.max(0,(e?.totalDiscussions||0)-1),recentActivity:[{icon:Y.jsx("svg",{className:"w-4 h-4 text-white/90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),description:"Discussion deleted",time:"Just now"},...(e?.recentActivity||[]).slice(0,4)]})))):W()}},e.id||e._id))),w&&!P&&Y.jsxs(Y.Fragment,{children:[Y.jsx("button",{onClick:async()=>{if(w&&!m)try{h(!0);const e=g+1,t=await wt.getDiscussions(e,10,b,j,k);l([...n,...t.discussions]),f(e),v(t.currentPage<t.totalPages)}catch(e){if(429===e.response?.status||e.message.includes("Rate limit")){const t=e.response?.data?.retryAfter||"15 minutes";p(`Rate limit exceeded. Please wait ${t} before trying again.`)}else p("Failed to load more discussions. Please try again later.")}finally{h(!1)}},disabled:m,className:"w-full py-2 bg-white/5 hover:bg-white/10 rounded-lg text-white/80 hover:text-white transition-colors",children:m?"Loading...":"Load More"}),m&&Y.jsx(A,{count:2})]})]})}),Y.jsxs("div",{className:"lg:col-span-2 space-y-4 order-1 lg:order-2",children:[Y.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-2 sm:p-4",children:[Y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[Y.jsx("h2",{className:"text-lg font-semibold text-white",children:"Community Overview"}),Y.jsx("button",{onClick:()=>B(!V),className:"text-white/60 hover:text-white transition-colors",children:V?Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})]}),Y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[Y.jsx("p",{className:"text-sm text-white/60",children:"Total Discussions"}),Y.jsx("p",{className:"text-2xl font-bold text-white",children:d?.totalDiscussions||0})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[Y.jsx("p",{className:"text-sm text-white/60",children:"Active Users"}),Y.jsx("p",{className:"text-2xl font-bold text-white",children:d?.activeUsers||0})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[Y.jsx("p",{className:"text-sm text-white/60",children:"Total Comments"}),Y.jsx("p",{className:"text-2xl font-bold text-white",children:d?.totalComments||0})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[Y.jsx("p",{className:"text-sm text-white/60",children:"Avg. Engagement"}),Y.jsxs("p",{className:"text-2xl font-bold text-white",children:[d?.averageEngagement||0,"%"]})]})]})]}),Y.jsx(Vt,{children:V&&Y.jsx(Ft.div,{ref:D,initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-[40px] bottom-0 right-0 w-[400px] bg-[#0f1114] border-l border-white/10 h-full shadow-xl z-50 overflow-y-auto",children:Y.jsxs("div",{className:"p-6",children:[Y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Y.jsx("h2",{className:"text-xl font-semibold text-white",children:"Community Stats"}),Y.jsx("button",{onClick:()=>B(!1),className:"text-white/60 hover:text-white transition-colors",children:Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[Y.jsx("p",{className:"text-sm text-white/60",children:"Total Discussions"}),Y.jsx("p",{className:"text-2xl font-bold text-white",children:d?.totalDiscussions||0})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[Y.jsx("p",{className:"text-sm text-white/60",children:"Active Users"}),Y.jsx("p",{className:"text-2xl font-bold text-white",children:d?.activeUsers||0})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[Y.jsx("p",{className:"text-sm text-white/60",children:"Total Comments"}),Y.jsx("p",{className:"text-2xl font-bold text-white",children:d?.totalComments||0})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4 hover:bg-white/10 transition-colors",children:[Y.jsx("p",{className:"text-sm text-white/60",children:"Avg. Engagement"}),Y.jsxs("p",{className:"text-2xl font-bold text-white",children:[d?.averageEngagement||0,"%"]})]})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[Y.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Categories"}),Y.jsx("div",{className:"space-y-3",children:d?.topCategories?.map((e=>Y.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-white/10 transition-colors",children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("span",{className:"text-sm text-white/60 w-6",children:e._id||e.name}),Y.jsx("span",{className:"text-white",children:e.name})]}),Y.jsxs("span",{className:"text-sm text-white/60",children:[e.count," posts"]})]},"category-"+(e._id||e.name))))})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[Y.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Activity"}),Y.jsx("div",{className:"space-y-4",children:d?.recentActivity?.map((e=>Y.jsxs("div",{className:"flex items-start gap-3 p-2 rounded-lg hover:bg-white/10 transition-colors",children:[Y.jsx("div",{className:"mt-1 text-white/90",children:e.icon}),Y.jsxs("div",{children:[Y.jsx("p",{className:"text-sm text-white",children:e.description}),Y.jsx("p",{className:"text-xs text-white/50 mt-1",children:e.time})]})]},`activity-${e.description}-${e.time}`)))})]})]})]})})}),V&&Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-x-0 top-0 bg-black/80 z-40",onClick:()=>B(!1)}),Y.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-lg p-2 sm:p-4",children:[Y.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Trending Topics"}),Y.jsx("div",{className:"space-y-3",children:M.map((e=>Y.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>C(e.name),children:[Y.jsxs("span",{className:"text-sm text-white",children:["#",e.name]}),Y.jsxs("span",{className:"text-xs text-white/60",children:[e.count," posts"]})]},e.name)))})]})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),Ps=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,t]=U.useState({email:"",password:"",rememberMe:!1}),[s,r]=U.useState({email:"",password:""}),[a,i]=U.useState({email:!1,password:!1}),[n,l]=U.useState(""),[o,c]=U.useState(!1),[d,u]=U.useState(!1),[m,h]=U.useState(!1),x=Q(),p=X(),{login:g}=_();U.useEffect((()=>{const e=setTimeout((()=>{u(!0)}),15e5);return()=>clearTimeout(e)}),[]);const f=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":"Please enter a valid email address":"Email is required",w=e=>e?6>e.length?"Password must be at least 6 characters":"":"Password is required",v=(e,t)=>{switch(e){case"email":return f(t);case"password":return w(t);default:return""}},b=e=>{const{name:s,value:i,type:n,checked:l}=e.target,o="checkbox"===n?l:i;t((e=>({...e,[s]:o}))),a[s]&&r((e=>({...e,[s]:v(s,o)})))},y=e=>{const{name:t,value:s}=e.target;i((e=>({...e,[t]:!0}))),r((e=>({...e,[t]:v(t,s)})))};return Y.jsx("div",{className:"min-h-screen bg-[#0f1114] text-white flex items-center justify-center px-2 sm:px-0",children:Y.jsxs("div",{className:"w-full max-w-md mx-auto px-2 sm:px-6 py-8 sm:py-12 flex flex-col items-center",children:[Y.jsxs("div",{className:"text-center mb-5 sm:mb-8",children:[Y.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Welcome Back"}),Y.jsx("p",{className:"text-white/70 mt-2 text-sm sm:text-base",children:"Sign in to your account"})]}),Y.jsxs(Ft.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},className:"bg-[#181b20] rounded-2xl shadow-xl border border-white/20 p-4 sm:p-8 w-full",children:[n&&Y.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 rounded-full text-red-600 dark:text-red-400 text-sm",children:n}),d&&Y.jsx("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-500/10 border border-yellow-200 dark:border-yellow-500/20 rounded-full text-yellow-700 dark:text-yellow-400 text-sm",children:"Your session will expire in 5 minutes. Please save your work."}),Y.jsxs("form",{onSubmit:async t=>{t.preventDefault(),l("");const s={email:f(e.email),password:w(e.password)};if(r(s),!Object.values(s).some((e=>e))){c(!0);try{const t=await g(e.email,e.password,e.rememberMe);if(t.success){const e=p.state?.from?.pathname||"/";x(e,{replace:!0})}else l(t.error||"Failed to login")}catch(a){l(a.response?.data?.message||"Failed to login")}finally{c(!1)}}},className:"space-y-5 sm:space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"email",className:"block text-white mb-2 text-sm sm:text-base font-medium",children:"Email"}),Y.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:b,onBlur:y,required:!0,className:"w-full bg-[#23272F] text-white rounded-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-white border transition-all duration-200 text-base sm:text-lg "+(a.email&&s.email?"border-white":"border-white/20 focus:border-white/40"),placeholder:"Enter your email",autoComplete:"email"}),a.email&&s.email&&Y.jsx("p",{className:"mt-1 text-xs sm:text-sm text-white/80",children:s.email})]}),Y.jsxs("div",{className:"relative",children:[Y.jsx("label",{htmlFor:"password",className:"block text-white mb-2 text-sm sm:text-base font-medium",children:"Password"}),Y.jsx("input",{type:m?"text":"password",id:"password",name:"password",value:e.password,onChange:b,onBlur:y,required:!0,className:"w-full bg-[#23272F] text-white rounded-full px-4 pr-16 focus:outline-none focus:ring-2 focus:ring-white border transition-all duration-200 text-base sm:text-lg h-12 "+(a.password&&s.password?"border-white":"border-white/20 focus:border-white/40"),placeholder:"Enter your password",autoComplete:"current-password"}),Y.jsx("div",{className:"absolute right-2 bottom-1.5 flex items-center",children:Y.jsx("button",{type:"button",tabIndex:-1,onClick:()=>h((e=>!e)),className:"flex items-center justify-center text-white/60 hover:text-white focus:outline-none","aria-label":m?"Hide password":"Show password",style:{padding:0,background:"none",height:"2.5rem",width:"2.5rem"},children:m?Y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:1.7,viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0 1 12 19c-5 0-9-4.03-9-7 0-1.13.37-2.22 1.05-3.22m2.1-2.53A9.97 9.97 0 0 1 12 5c5 0 9 4.03 9 7 0 1.13-.37 2.22-1.05 3.22a9.956 9.956 0 0 1-2.1 2.53M15 12a3 3 0 0 0-3-3m0 0a3 3 0 0 0-3 3m6 0a3 3 0 0 1-3 3m0 0a3 3 0 0 1-3-3m0 0L3 3m18 18-3-3"})}):Y.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:1.7,viewBox:"0 0 24 24",children:[Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}),Y.jsx("circle",{cx:"12",cy:"12",r:"3"})]})})}),a.password&&s.password&&Y.jsx("p",{className:"mt-1 text-xs sm:text-sm text-white/80",children:s.password})]}),Y.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 w-full",children:[Y.jsxs("label",{className:"flex items-center gap-2 text-white/80 text-xs sm:text-sm",children:[Y.jsx("input",{type:"checkbox",name:"rememberMe",checked:e.rememberMe,onChange:b,className:"form-checkbox rounded-full border-white/40 bg-[#23272F] focus:ring-white"}),"Remember me"]}),Y.jsx(J,{to:"/forgot-password",className:"text-white/70 hover:underline text-xs sm:text-sm ml-0 sm:ml-2",children:"Forgot password?"})]}),Y.jsx(Ft.button,{type:"submit",disabled:o||!(!Object.values(s).some((e=>e))&&e.email&&e.password),whileHover:{scale:1.03},whileTap:{scale:.97},className:"w-full py-3 rounded-full font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed bg-white text-black hover:bg-white/90 shadow-lg shadow-white/20",children:o?"Signing in...":"Sign In"})]}),Y.jsxs("div",{className:"flex items-center my-6",children:[Y.jsx("div",{className:"flex-grow border-t border-white/20"}),Y.jsx("span",{className:"mx-4 text-white/60 text-xs sm:text-sm",children:"or"}),Y.jsx("div",{className:"flex-grow border-t border-white/20"})]}),Y.jsxs("div",{className:"flex flex-col gap-3",children:[Y.jsxs(Ft.button,{type:"button",onClick:()=>{window.location.href="https://streamr-jjj9.onrender.com/api/auth/google"},whileHover:{scale:1.03},whileTap:{scale:.97},className:"w-full flex items-center justify-center gap-3 py-2.5 bg-[#23272F] text-white rounded-full border border-white/10 hover:bg-white/10 transition-all duration-200 font-medium",children:[Y.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[Y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#fff"}),Y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#fff"}),Y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#fff"}),Y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#fff"})]}),"Google"]}),Y.jsxs(Ft.button,{type:"button",onClick:()=>{window.location.href="https://streamr-jjj9.onrender.com/api/auth/github"},whileHover:{scale:1.03},whileTap:{scale:.97},className:"w-full flex items-center justify-center gap-3 py-2.5 bg-[#23272F] text-white rounded-full border border-white/10 hover:bg-white/10 transition-all duration-200 font-medium",children:[Y.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"GitHub"]})]}),Y.jsxs("div",{className:"text-center mt-6",children:[Y.jsx("span",{className:"text-white/70",children:"Don't have an account?"})," ",Y.jsx(J,{to:"/signup",className:"text-white hover:underline font-medium",children:"Sign up"})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),Es=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,t]=U.useState({username:"",email:"",password:"",confirmPassword:"",agreeToTerms:!1}),[s,r]=U.useState({username:"",email:"",password:"",confirmPassword:"",agreeToTerms:""}),[a,i]=U.useState({username:!1,email:!1,password:!1,confirmPassword:!1,agreeToTerms:!1}),[n,l]=U.useState(""),[o,c]=U.useState(!1),d=Q(),{signup:u}=_(),m=e=>e?3>e.length?"Username must be at least 3 characters":e.length>20?"Username must be less than 20 characters":/^[a-zA-Z0-9_-]+$/.test(e)?"":"Username can only contain letters, numbers, underscores, and hyphens":"Username is required",h=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"":"Please enter a valid email address":"Email is required",x=e=>e?8>e.length?"Password must be at least 8 characters":/(?=.*[a-z])/.test(e)?/(?=.*[A-Z])/.test(e)?/(?=.*\d)/.test(e)?/(?=.*[!@#$%^&*])/.test(e)?"":"Password must contain at least one special character (!@#$%^&*)":"Password must contain at least one number":"Password must contain at least one uppercase letter":"Password must contain at least one lowercase letter":"Password is required",p=t=>t?t!==e.password?"Passwords do not match":"":"Please confirm your password",g=(e,t)=>{switch(e){case"username":return m(t);case"email":return h(t);case"password":return x(t);case"confirmPassword":return p(t);case"agreeToTerms":return t?"":"You must agree to the terms and conditions";default:return""}},f=s=>{const{name:i,value:n,type:l,checked:o}=s.target,c="checkbox"===l?o:n;t((e=>({...e,[i]:c}))),a[i]&&r((e=>({...e,[i]:g(i,c)}))),"password"===i&&a.confirmPassword&&r((t=>({...t,confirmPassword:p(e.confirmPassword)})))},w=e=>{const{name:t,value:s}=e.target;i((e=>({...e,[t]:!0}))),r((e=>({...e,[t]:g(t,s)})))};return Y.jsx("div",{className:"min-h-screen bg-[#0f1114] text-white flex items-center justify-center px-2 sm:px-0",children:Y.jsxs("div",{className:"w-full max-w-md mx-auto px-2 sm:px-6 py-8 sm:py-12 flex flex-col items-center",children:[Y.jsxs("div",{className:"text-center mb-5 sm:mb-8",children:[Y.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Create Account"}),Y.jsx("p",{className:"text-white/70 mt-2 text-sm sm:text-base",children:"Join Streamr today"})]}),Y.jsxs(Ft.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},className:"bg-[#181b20] rounded-2xl shadow-xl border border-white/20 p-4 sm:p-8 w-full",children:[n&&Y.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-full text-red-400 text-sm",children:n}),Y.jsxs("form",{onSubmit:async t=>{t.preventDefault(),l("");const s={username:m(e.username),email:h(e.email),password:x(e.password),confirmPassword:p(e.confirmPassword),agreeToTerms:e.agreeToTerms?"":"You must agree to the terms and conditions"};if(r(s),!Object.values(s).some((e=>e))){c(!0);try{const t=await u({username:e.username,email:e.email,password:e.password});t.success?d("/profile"):l(t.error||"Failed to create account")}catch(a){l(a.response?.data?.message||"Failed to create account")}finally{c(!1)}}},className:"space-y-5 sm:space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"username",className:"block text-white mb-2 text-sm sm:text-base font-medium",children:"Username"}),Y.jsx("input",{type:"text",id:"username",name:"username",value:e.username,onChange:f,onBlur:w,required:!0,className:"w-full bg-[#23272F] text-white rounded-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-white border transition-all duration-200 text-base sm:text-lg h-12 "+(a.username&&s.username?"border-white":"border-white/20 focus:border-white/40"),placeholder:"Enter your username",autoComplete:"username"}),a.username&&s.username&&Y.jsx("p",{className:"mt-1 text-xs sm:text-sm text-white/80",children:s.username})]}),Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"email",className:"block text-white mb-2 text-sm sm:text-base font-medium",children:"Email"}),Y.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:f,onBlur:w,required:!0,className:"w-full bg-[#23272F] text-white rounded-full px-4 py-3 focus:outline-none focus:ring-2 focus:ring-white border transition-all duration-200 text-base sm:text-lg h-12 "+(a.email&&s.email?"border-white":"border-white/20 focus:border-white/40"),placeholder:"Enter your email",autoComplete:"email"}),a.email&&s.email&&Y.jsx("p",{className:"mt-1 text-xs sm:text-sm text-white/80",children:s.email})]}),Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"password",className:"block text-white mb-2 text-sm sm:text-base font-medium",children:"Password"}),Y.jsx("input",{type:"password",id:"password",name:"password",value:e.password,onChange:f,onBlur:w,required:!0,className:"w-full bg-[#23272F] text-white rounded-full px-4 pr-16 focus:outline-none focus:ring-2 focus:ring-white border transition-all duration-200 text-base sm:text-lg h-12 "+(a.password&&s.password?"border-white":"border-white/20 focus:border-white/40"),placeholder:"Enter your password",autoComplete:"new-password"}),a.password&&s.password&&Y.jsx("p",{className:"mt-1 text-xs sm:text-sm text-white/80",children:s.password})]}),Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"confirmPassword",className:"block text-white mb-2 text-sm sm:text-base font-medium",children:"Confirm Password"}),Y.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:f,onBlur:w,required:!0,className:"w-full bg-[#23272F] text-white rounded-full px-4 pr-16 focus:outline-none focus:ring-2 focus:ring-white border transition-all duration-200 text-base sm:text-lg h-12 "+(a.confirmPassword&&s.confirmPassword?"border-white":"border-white/20 focus:border-white/40"),placeholder:"Confirm your password",autoComplete:"new-password"}),a.confirmPassword&&s.confirmPassword&&Y.jsx("p",{className:"mt-1 text-xs sm:text-sm text-white/80",children:s.confirmPassword})]}),Y.jsxs("div",{className:"flex flex-row items-center gap-2 w-full",children:[Y.jsx("input",{type:"checkbox",id:"agreeToTerms",name:"agreeToTerms",checked:e.agreeToTerms,onChange:f,className:"form-checkbox rounded-full border-white/20 bg-[#23272F] focus:ring-white"}),Y.jsxs("label",{htmlFor:"agreeToTerms",className:"text-white/70 text-xs sm:text-sm",children:["I agree to the ",Y.jsx(J,{to:"#",className:"text-white hover:underline",children:"terms and conditions"})]})]}),a.agreeToTerms&&s.agreeToTerms&&Y.jsx("p",{className:"mt-1 text-xs sm:text-sm text-white/80",children:s.agreeToTerms}),Y.jsx(Ft.button,{type:"submit",disabled:o||!(!Object.values(s).some((e=>e))&&e.username&&e.email&&e.password&&e.confirmPassword&&e.agreeToTerms),whileHover:{scale:1.03},whileTap:{scale:.97},className:"w-full py-3 rounded-full font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 disabled:opacity-60 disabled:cursor-not-allowed bg-white text-black hover:bg-white/90 shadow-lg shadow-white/20",children:o?"Signing up...":"Sign Up"})]}),Y.jsxs("div",{className:"mt-8",children:[Y.jsxs("div",{className:"flex items-center my-6",children:[Y.jsx("div",{className:"flex-grow border-t border-white/20"}),Y.jsx("span",{className:"mx-4 text-white/60 text-xs sm:text-sm",children:"or"}),Y.jsx("div",{className:"flex-grow border-t border-white/20"})]}),Y.jsxs("div",{className:"flex flex-col gap-3",children:[Y.jsxs(Ft.button,{type:"button",onClick:()=>{window.location.href="https://streamr-jjj9.onrender.com/api/auth/google"},whileHover:{scale:1.03},whileTap:{scale:.97},className:"w-full flex items-center justify-center gap-3 py-2.5 bg-[#23272F] text-white rounded-full border border-white/10 hover:bg-white/10 transition-all duration-200 font-medium",children:[Y.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[Y.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#fff"}),Y.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#fff"}),Y.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#fff"}),Y.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#fff"})]}),"Google"]}),Y.jsxs(Ft.button,{type:"button",onClick:()=>{window.location.href="https://streamr-jjj9.onrender.com/api/auth/github"},whileHover:{scale:1.03},whileTap:{scale:.97},className:"w-full flex items-center justify-center gap-3 py-2.5 bg-[#23272F] text-white rounded-full border border-white/10 hover:bg-white/10 transition-all duration-200 font-medium",children:[Y.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:Y.jsx("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),"GitHub"]})]})]})]}),Y.jsxs("div",{className:"text-center mt-6",children:[Y.jsx("span",{className:"text-white/70",children:"Already have an account?"})," ",Y.jsx(J,{to:"/login",className:"text-white hover:underline font-medium",children:"Sign in"})]})]})})}},Symbol.toStringTag,{value:"Module"})),zs=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,t]=U.useState(""),[s,r]=U.useState(!1),[a,i]=U.useState(""),[n,l]=U.useState(!1),{forgotPassword:o}=_();return Y.jsx("div",{className:"min-h-screen bg-[#0f1114] flex items-center justify-center px-4",children:Y.jsx(Ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-8 shadow-xl",children:[Y.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Forgot Password"}),Y.jsx("p",{className:"text-white/60 mb-6",children:"Enter your email address and we'll send you a link to reset your password."}),n?Y.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4 mb-6",children:Y.jsx("p",{className:"text-green-400",children:"Password reset instructions have been sent to your email address."})}):Y.jsxs("form",{onSubmit:async t=>{t.preventDefault(),i(""),l(!1),r(!0);try{const t=await o(e);t.success?l(!0):i(t.error)}catch(s){i("An error occurred. Please try again.")}finally{r(!1)}},className:"space-y-6",children:[a&&Y.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:Y.jsx("p",{className:"text-red-400",children:a})}),Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"email",className:"block text-white/60 mb-2",children:"Email Address"}),Y.jsx("input",{type:"email",id:"email",value:e,onChange:e=>t(e.target.value),className:"w-full bg-[#2b3036] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white",placeholder:"Enter your email",required:!0,disabled:s})]}),Y.jsx("button",{type:"submit",disabled:s,className:"w-full bg-white text-black rounded-full py-2 font-medium hover:bg-white/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?Y.jsx("div",{className:"flex items-center justify-center",children:Y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-black"})}):"Send Reset Link"})]}),Y.jsx("div",{className:"mt-6 text-center",children:Y.jsx(J,{to:"/login",className:"text-white/60 hover:text-white transition-colors",children:"Back to Login"})})]})})})}},Symbol.toStringTag,{value:"Module"})),Rs=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e]=Ce(),t=Q(),[s,r]=U.useState(""),[a,i]=U.useState(""),[n,l]=U.useState(!1),[o,c]=U.useState(""),{resetPassword:d}=_();return Y.jsx("div",{className:"min-h-screen bg-[#0f1114] flex items-center justify-center px-4",children:Y.jsx(Ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md",children:Y.jsxs("div",{className:"bg-[#1a1d21] rounded-xl p-8 shadow-xl",children:[Y.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Reset Password"}),Y.jsx("p",{className:"text-white/60 mb-6",children:"Enter your new password below."}),Y.jsxs("form",{onSubmit:async r=>{if(r.preventDefault(),c(""),8>s.length)c("Password must be at least 8 characters long");else if(s===a){l(!0);try{const r=e.get("token");if(!r)throw Error("Invalid or missing reset token");const a=await d(r,s);a.success?t("/login",{state:{message:"Password has been reset successfully. Please login with your new password."}}):c(a.error)}catch(i){c(i.message||"An error occurred. Please try again.")}finally{l(!1)}}else c("Passwords do not match")},className:"space-y-6",children:[o&&Y.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:Y.jsx("p",{className:"text-red-400",children:o})}),Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"password",className:"block text-white/60 mb-2",children:"New Password"}),Y.jsx("input",{type:"password",id:"password",value:s,onChange:e=>r(e.target.value),className:"w-full bg-[#2b3036] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white",placeholder:"Enter new password",required:!0,disabled:n})]}),Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"confirmPassword",className:"block text-white/60 mb-2",children:"Confirm New Password"}),Y.jsx("input",{type:"password",id:"confirmPassword",value:a,onChange:e=>i(e.target.value),className:"w-full bg-[#2b3036] border border-white/10 rounded-full px-4 py-2 text-white focus:outline-none focus:border-white",placeholder:"Confirm new password",required:!0,disabled:n})]}),Y.jsx("button",{type:"submit",disabled:n,className:"w-full bg-white text-black rounded-full py-2 font-medium hover:bg-white/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?Y.jsx("div",{className:"flex items-center justify-center",children:Y.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-black"})}):"Reset Password"})]}),Y.jsx("div",{className:"mt-6 text-center",children:Y.jsx(J,{to:"/login",className:"text-white/60 hover:text-white transition-colors",children:"Back to Login"})})]})})})}},Symbol.toStringTag,{value:"Module"})),Is=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e]=Ce(),t=Q(),{login:s}=_();return U.useEffect((()=>{const r=e.get("token");e.get("refreshToken");const a=e.get("user"),i=e.get("error");if(i)t("/login",{state:{error:i}});else if(r&&a)try{const e=JSON.parse(a);localStorage.setItem("accessToken",r),window.dispatchEvent(new CustomEvent("auth-changed",{detail:{action:"login"}})),s({user:e,accessToken:r}),t("/")}catch(n){t("/login",{state:{error:"Failed to process authentication"}})}else t("/login",{state:{error:"Invalid authentication response"}})}),[e,t,s]),Y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900",children:Y.jsxs("div",{className:"text-center",children:[Y.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Completing Authentication..."}),Y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mx-auto"})]})})}},Symbol.toStringTag,{value:"Module"})),As=["gmail.com","yahoo.com","hotmail.com","outlook.com","protonmail.com","icloud.com","aol.com","mail.com","zoho.com","yandex.com"],Fs=[{question:"Why do I need to verify my email?",answer:"Email verification helps us ensure the security of your account and allows us to send you important updates and notifications."},{question:"How long is the verification link valid?",answer:"The verification link is valid for 24 hours. If it expires, you can request a new verification email."},{question:"What if I don't receive the verification email?",answer:"Check your spam folder first. If you still don't see it, you can request a new verification email after the cooldown period."},{question:"Can I change my email address?",answer:"Yes, you can change your email address during the verification process. Make sure to use a valid email address you have access to."},{question:"What happens if I enter the wrong email?",answer:"You can change your email address during verification. Make sure to enter the correct email address you want to use for your account."},{question:"Is my email address secure?",answer:"Yes, we take your privacy seriously. Your email address is encrypted and only used for account-related communications."},{question:"Can I verify multiple email addresses?",answer:"No, each account can only have one verified email address. You can change your email address at any time."},{question:"What if I need help with verification?",answer:"You can contact our support team using the support form below. We'll help you resolve any verification issues."}],Vs=["Email not received","Invalid verification link","Link expired","Wrong email address","Technical issues","Other"],Bs=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,t]=U.useState(!0),[s,r]=U.useState(""),[a,i]=U.useState(!1),[n,l]=U.useState(3),[o,c]=U.useState(!1),[d,u]=U.useState(!1),[m,h]=U.useState(0),[x,p]=U.useState(null),[g,f]=U.useState(!1),[w,v]=U.useState(""),[b,y]=U.useState(""),[j,N]=U.useState(""),[k,C]=U.useState(""),[S,T]=U.useState(!1),[M,L]=U.useState(!1),[P,E]=U.useState(""),[z,R]=U.useState(""),[I,A]=U.useState(null),[F,V]=U.useState(!1),[B,D]=U.useState(""),[H,W]=U.useState(0);U.useState(!1);const[O,$]=U.useState([]),{token:q}=Se(),Z=Q(),{verifyEmail:G,forgotPassword:J}=_();return U.useEffect((()=>{if(x){const e=setInterval((()=>{x-Date.now()>0||(p(null),clearInterval(e))}),1e3);return()=>clearInterval(e)}}),[x]),U.useEffect((()=>{(async()=>{try{if((await G(q)).success){i(!0);let e=3;const t=setInterval((()=>{e-=1,l(e),e>0||(clearInterval(t),Z("/login"))}),1e3);return()=>clearInterval(t)}}catch(e){let t=e.response?.data?.message||"Failed to verify email. The link may have expired.";t.includes("expired")?t="This verification link has expired. Please request a new one.":t.includes("invalid")?t="This verification link is invalid. Please check the link and try again.":t.includes("already verified")&&(t="This email has already been verified. You can proceed to login."),r(t);const s=t.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/);s&&v(s[0])}finally{t(!1)}})()}),[q,G,Z]),Y.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[Y.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:Y.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Email Verification"})}),Y.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[Y.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:e?Y.jsxs("div",{className:"text-center",children:[Y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),Y.jsx("p",{className:"mt-4 text-gray-600",children:"Verifying your email..."})]}):s?Y.jsxs("div",{className:"space-y-6",children:[Y.jsx("div",{className:"rounded-md bg-red-50 p-4",children:Y.jsxs("div",{className:"flex",children:[Y.jsx("div",{className:"flex-shrink-0",children:Y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:Y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Y.jsxs("div",{className:"ml-3",children:[Y.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Verification Failed"}),Y.jsx("div",{className:"mt-2 text-sm text-red-700",children:Y.jsx("p",{children:s})})]})]})}),g?Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("input",{type:"email",value:w,onChange:e=>{v(e.target.value),y(""),$([])},placeholder:"Enter your email",className:"w-full bg-[#2b3036] text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-white-500 "+(b?"border border-red-500":"")}),b&&Y.jsx("p",{className:"mt-1 text-sm text-red-400",children:b}),O.length>0&&Y.jsx("div",{className:"mt-2",children:O.map(((e,t)=>Y.jsx("button",{onClick:()=>(e=>{v(e),y(""),$([])})(e),className:"text-sm text-blue-400 hover:text-blue-300 mr-2",children:e},t)))})]}),Y.jsxs("div",{children:[Y.jsx("input",{type:"password",value:j,onChange:e=>{const t=e.target.value;N(t),C("");let s=0;8>t.length||s++,/[A-Z]/.test(t)&&s++,/[a-z]/.test(t)&&s++,/[0-9]/.test(t)&&s++,/[^A-Za-z0-9]/.test(t)&&s++,W(s)},placeholder:"Enter your password",className:"w-full bg-[#2b3036] text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-white-500 "+(k?"border border-red-500":"")}),k&&Y.jsx("p",{className:"mt-1 text-sm text-red-400",children:k}),Y.jsxs("div",{className:"mt-2",children:[Y.jsxs("div",{className:"flex items-center",children:[Y.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full",children:Y.jsx("div",{className:"h-2 rounded-full "+(0===H||1===H?"bg-red-500":2===H||3===H?"bg-yellow-500":"bg-green-500"),style:{width:H/5*100+"%"}})}),Y.jsx("span",{className:"ml-2 text-sm text-gray-500",children:0===H?"Very Weak":1===H?"Weak":2===H?"Fair":3===H?"Good":4===H?"Strong":"Very Strong"})]}),3>H&&Y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Password should be at least 8 characters long and include uppercase, lowercase, numbers, and special characters."})]})]}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsx("button",{onClick:async()=>{try{c(!0),r(""),y(""),C("");const e=(e=>{const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!e)return"Email is required";if(e.includes("@gamil.com"))return $([e.replace("@gamil.com","@gmail.com")]),"Did you mean gmail.com?";if(e.includes("@gmial.com"))return $([e.replace("@gmial.com","@gmail.com")]),"Did you mean gmail.com?";if(e.includes("@yaho.com"))return $([e.replace("@yaho.com","@yahoo.com")]),"Did you mean yahoo.com?";if(e.includes("@")&&!t.test(e)){const[t,s]=e.split("@"),r=As.filter((e=>e.startsWith(s))).map((e=>`${t}@${e}`));if(r.length>0)return $(r),"Did you mean one of these?"}return t.test(e)?($([]),""):"Please enter a valid email address"})(w);if(e)return void y(e);if(!j)return void C("Password is required to change email");const{score:t,feedback:s}=(e=>{const t=[];let s=0;return 8>e.length?t.push("Password should be at least 8 characters long"):s+=1,/[A-Z]/.test(e)?s+=1:t.push("Add uppercase letters"),/[a-z]/.test(e)?s+=1:t.push("Add lowercase letters"),/[0-9]/.test(e)?s+=1:t.push("Add numbers"),/[^A-Za-z0-9]/.test(e)?s+=1:t.push("Add special characters"),{score:s,feedback:t}})(j);if(3>t)return void C("Password is too weak. "+s.join(", "));if(m>=3)return p(Date.now()+3e5),void r("Too many attempts. Please try again in 5 minutes or contact support at support@streamr.com");await J(w),u(!0),h((e=>e+1)),setTimeout((()=>u(!1)),5e3)}catch(e){let t=e.response?.data?.message||"Failed to resend verification email";t.includes("not found")?t="No account found with this email address. Please check the email and try again.":t.includes("rate limit")&&(t="Too many attempts. Please wait a few minutes before trying again."),r(t)}finally{c(!1)}},disabled:o||!!x,className:"w-full bg-white text-black rounded-lg px-6 py-2 font-medium hover:bg-white/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?Y.jsx("div",{className:"flex items-center justify-center",children:Y.jsx("div",{className:"w-5 h-5 border-t-2 border-b-2 border-black rounded-full animate-spin"})}):x?"Try again in "+(()=>{if(!x)return null;const e=Math.ceil((x-Date.now())/1e3);return e>0?`${Math.floor(e/60)}:${(""+e%60).padStart(2,"0")}`:null})():`Resend Verification Email (${3-m} attempts left)`}),Y.jsx("button",{onClick:()=>f(!1),className:"w-full bg-[#2b3036] text-white rounded-lg px-6 py-2 font-medium hover:bg-[#363b42] transition-colors",children:"Cancel"})]})]}):Y.jsxs("div",{className:"space-y-4",children:[Y.jsx("button",{type:"button",onClick:()=>f(!0),className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Try Again"}),Y.jsx("button",{type:"button",onClick:()=>T(!0),className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Contact Support"})]})]}):a?Y.jsx("div",{className:"rounded-md bg-green-50 p-4",children:Y.jsxs("div",{className:"flex",children:[Y.jsx("div",{className:"flex-shrink-0",children:Y.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:Y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),Y.jsxs("div",{className:"ml-3",children:[Y.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Email Verified Successfully"}),Y.jsx("div",{className:"mt-2 text-sm text-green-700",children:Y.jsx("p",{children:"Your email has been verified. You can now proceed to login."})}),Y.jsx("div",{className:"mt-4",children:Y.jsx("button",{type:"button",onClick:()=>Z("/login"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Go to Login"})})]})]})}):null}),S&&Y.jsx("div",{className:"mt-8 bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Support"}),Y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Need help? Our support team is here to assist you."})]}),Y.jsxs("div",{className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Frequently Asked Questions"}),Y.jsx("div",{className:"mt-4 space-y-4",children:Fs.map(((e,t)=>Y.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[Y.jsx("h5",{className:"text-sm font-medium text-gray-900",children:e.question}),Y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.answer})]},t)))})]}),Y.jsxs("div",{children:[Y.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Report an Issue"}),Y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"If you're still experiencing problems, please report the issue to our support team."}),Y.jsx("button",{type:"button",onClick:()=>L(!0),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Report Issue"})]})]})]})}),M&&Y.jsx("div",{className:"mt-8 bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Y.jsxs("div",{className:"space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Report an Issue"}),Y.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Please provide details about the issue you're experiencing."})]}),Y.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),z)if(P.trim())try{D(""),await new Promise((e=>setTimeout(e,1e3))),V(!0),E(""),R(""),A(null)}catch(t){D("Failed to submit report. Please try again.")}else D("Please describe the issue");else D("Please select an issue category")},className:"space-y-6",children:[Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Issue Category"}),Y.jsxs("select",{id:"category",name:"category",value:z,onChange:e=>R(e.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[Y.jsx("option",{value:"",children:"Select a category"}),Vs.map((e=>Y.jsx("option",{value:e,children:e},e)))]})]}),Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),Y.jsx("div",{className:"mt-1",children:Y.jsx("textarea",{id:"description",name:"description",rows:4,value:P,onChange:e=>E(e.target.value),className:"shadow-sm focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border-gray-300 rounded-md",placeholder:"Please describe the issue in detail..."})})]}),Y.jsxs("div",{children:[Y.jsx("label",{htmlFor:"screenshot",className:"block text-sm font-medium text-gray-700",children:"Screenshot (optional)"}),Y.jsxs("div",{className:"mt-1 flex items-center",children:[Y.jsx("input",{type:"file",id:"screenshot",name:"screenshot",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void D("Screenshot size should be less than 5MB");if(!t.type.startsWith("image/"))return void D("Please upload an image file");A(t),D("")}},className:"sr-only"}),Y.jsxs("label",{htmlFor:"screenshot",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[Y.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Upload Screenshot"]}),I&&Y.jsx("span",{className:"ml-3 text-sm text-gray-500",children:I.name})]}),Y.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Maximum file size: 5MB. Supported formats: JPG, PNG, GIF"})]}),B&&Y.jsx("div",{className:"rounded-md bg-red-50 p-4",children:Y.jsxs("div",{className:"flex",children:[Y.jsx("div",{className:"flex-shrink-0",children:Y.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:Y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Y.jsx("div",{className:"ml-3",children:Y.jsx("p",{className:"text-sm text-red-700",children:B})})]})}),F&&Y.jsx("div",{className:"rounded-md bg-green-50 p-4",children:Y.jsxs("div",{className:"flex",children:[Y.jsx("div",{className:"flex-shrink-0",children:Y.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:Y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),Y.jsx("div",{className:"ml-3",children:Y.jsx("p",{className:"text-sm text-green-700",children:"Your report has been submitted successfully. We'll get back to you soon."})})]})}),Y.jsxs("div",{className:"flex justify-end space-x-3",children:[Y.jsx("button",{type:"button",onClick:()=>{L(!1),E(""),R(""),A(null),D(""),V(!1)},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),Y.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Submit Report"})]})]})]})})]})]})}},Symbol.toStringTag,{value:"Module"})),Ds=()=>({isOnline:navigator.onLine,connectionType:navigator.connection?.effectiveType||"unknown",downlink:navigator.connection?.downlink||null,rtt:navigator.connection?.rtt||null}),Hs=e=>{const t=Error({CONNECTION_RESET:"Connection reset by peer",TIMEOUT:"Request timeout",DNS_FAILURE:"DNS resolution failed",SSL_ERROR:"SSL certificate verification failed",NETWORK_UNREACHABLE:"Network unreachable",HOST_UNREACHABLE:"Host unreachable",CONNECTION_REFUSED:"Connection refused",RATE_LIMIT:"Too many requests",SERVER_ERROR:"Internal server error"}[e]||"Unknown network error");return t.type=e,t.code=e,t},Ws=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,t]=U.useState(null),[s,r]=U.useState([]),[a,i]=U.useState(!1);U.useEffect((()=>{const e=(e=>{let t=!1;const s=()=>{e&&e({isOnline:!0,type:"online"})},r=()=>{e&&e({isOnline:!1,type:"offline"})},a=()=>{e&&e({...Ds(),type:"connection-change"})};return{start:()=>{t||(t=!0,window.addEventListener("online",s),window.addEventListener("offline",r),navigator.connection&&navigator.connection.addEventListener("change",a),e&&e({...Ds(),type:"initial"}))},stop:()=>{t&&(t=!1,window.removeEventListener("online",s),window.removeEventListener("offline",r),navigator.connection&&navigator.connection.removeEventListener("change",a))},getStatus:Ds}})((e=>{t(e)}));return vt().then(t),e}),[]);const n=e=>{const t=Hs(e),s=bt(t);r([{test:"Simulated "+e,status:"✅ Simulated",details:{originalError:t.message,classification:s}}])};return Y.jsx("div",{className:"min-h-screen bg-[#121417] text-white p-8",children:Y.jsx("div",{className:"max-w-4xl mx-auto",children:Y.jsxs(Ft.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[Y.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Network Error Handling Test"}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Network Status"}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Y.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[Y.jsx("h3",{className:"font-medium mb-2",children:"Current Status"}),Y.jsx("p",{className:"text-lg "+(e?"text-green-400":"text-red-400"),children:e?"🟢 Online":"🔴 Offline"}),e?.details&&Y.jsxs("div",{className:"mt-2 text-sm text-white/60",children:[Y.jsxs("p",{children:["Latency: ",e.details.latency||"N/A","ms"]}),Y.jsxs("p",{children:["Status: ",e.details.status||"N/A"]})]})]}),Y.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[Y.jsx("h3",{className:"font-medium mb-2",children:"Last Update"}),Y.jsx("p",{className:"text-sm text-white/60",children:e?.timestamp?new Date(e.timestamp).toLocaleTimeString():"Never"})]})]})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Controls"}),Y.jsxs("div",{className:"flex flex-wrap gap-4",children:[Y.jsx("button",{onClick:async()=>{i(!0);const e=[];try{const s=await vt();e.push({test:"Network Connectivity",status:s?"✅ Connected":"❌ Disconnected",details:{isConnected:s}}),[Hs("CONNECTION_RESET"),Hs("TIMEOUT"),Hs("DNS_FAILURE"),Hs("SSL_ERROR")].forEach(((t,s)=>{const r=bt(t);e.push({test:"Error Classification "+(s+1),status:"✅ Classified",details:{originalError:t.message,classification:r}})}));const r=[];for(let e=1;5>=e;e++){const t=yt(e,"CONNECTION_RESET");r.push({attempt:e,delay:t})}e.push({test:"Retry Delay Calculation",status:"✅ Calculated",details:{delays:r}});try{const t=await jt("https://api.themoviedb.org/3/configuration");e.push({test:"Enhanced Fetch with Retry",status:"✅ Success",details:{status:t.status}})}catch(t){e.push({test:"Enhanced Fetch with Retry",status:"❌ Failed",details:{error:t.message}})}}catch(t){e.push({test:"Test Suite",status:"❌ Error",details:{error:t.message}})}r(e),i(!1)},disabled:a,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-lg font-medium transition-colors",children:a?"Running Tests...":"Run Full Test Suite"}),Y.jsx("button",{onClick:()=>n("CONNECTION_RESET"),className:"px-6 py-3 bg-red-600 hover:bg-red-700 rounded-lg font-medium transition-colors",children:"Simulate Connection Reset"}),Y.jsx("button",{onClick:()=>n("TIMEOUT"),className:"px-6 py-3 bg-yellow-600 hover:bg-yellow-700 rounded-lg font-medium transition-colors",children:"Simulate Timeout"}),Y.jsx("button",{onClick:()=>n("DNS_FAILURE"),className:"px-6 py-3 bg-orange-600 hover:bg-orange-700 rounded-lg font-medium transition-colors",children:"Simulate DNS Failure"})]})]}),s.length>0&&Y.jsxs("div",{className:"bg-white/5 rounded-lg p-6",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Results"}),Y.jsx("div",{className:"space-y-4",children:s.map(((e,t)=>Y.jsxs(Ft.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"bg-white/10 rounded-lg p-4",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[Y.jsx("h3",{className:"font-medium",children:e.test}),Y.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+(e.status.includes("✅")?"bg-green-500/20 text-green-400":e.status.includes("❌")?"bg-red-500/20 text-red-400":"bg-blue-500/20 text-blue-400"),children:e.status})]}),e.details&&Y.jsx("div",{className:"text-sm text-white/60",children:Y.jsx("pre",{className:"whitespace-pre-wrap bg-black/20 rounded p-2 mt-2 text-xs",children:JSON.stringify(e.details,null,2)})})]},t)))})]}),Y.jsxs("div",{className:"bg-white/5 rounded-lg p-6 mt-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Error Handling Features"}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Y.jsxs("div",{children:[Y.jsx("h3",{className:"font-medium mb-2",children:"Enhanced Error Classification"}),Y.jsxs("ul",{className:"text-sm text-white/60 space-y-1",children:[Y.jsx("li",{children:"• Connection Reset Detection"}),Y.jsx("li",{children:"• Timeout Error Handling"}),Y.jsx("li",{children:"• DNS Failure Recognition"}),Y.jsx("li",{children:"• SSL/TLS Error Detection"}),Y.jsx("li",{children:"• Rate Limiting Response"}),Y.jsx("li",{children:"• Server Error Classification"})]})]}),Y.jsxs("div",{children:[Y.jsx("h3",{className:"font-medium mb-2",children:"Retry Mechanisms"}),Y.jsxs("ul",{className:"text-sm text-white/60 space-y-1",children:[Y.jsx("li",{children:"• Exponential Backoff"}),Y.jsx("li",{children:"• Jitter for Load Distribution"}),Y.jsx("li",{children:"• Error-Type Specific Delays"}),Y.jsx("li",{children:"• Maximum Retry Limits"}),Y.jsx("li",{children:"• Network Connectivity Checks"}),Y.jsx("li",{children:"• User-Friendly Error Messages"})]})]})]})]})]})})})}},Symbol.toStringTag,{value:"Module"})),Os=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{user:e,loading:t,login:s,logout:r,switchBackendMode:a,getCurrentBackendMode:i}=_(),[l,o]=U.useState(""),[c,d]=U.useState(""),[u,m]=U.useState([]),h=e=>{m((t=>[...t,{message:e,timestamp:(new Date).toISOString()}]))};return Y.jsx("div",{className:"min-h-screen bg-[#0f1114] text-white p-8",children:Y.jsxs("div",{className:"max-w-4xl mx-auto",children:[Y.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Authentication Test Page"}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Current Status"}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsxs("p",{children:[Y.jsx("strong",{children:"Loading:"})," ",t?"Yes":"No"]}),Y.jsxs("p",{children:[Y.jsx("strong",{children:"User:"})," ",e?`${e.username} (${e.email})`:"Not logged in"]}),Y.jsxs("p",{children:[Y.jsx("strong",{children:"Access Token:"})," ",localStorage.getItem("accessToken")?"Present":"Not found"]}),Y.jsxs("p",{children:[Y.jsx("strong",{children:"Cookies:"})," ",document.cookie||"No cookies"]}),Y.jsxs("p",{children:[Y.jsx("strong",{children:"Backend Mode:"})," ",i()]}),Y.jsxs("p",{children:[Y.jsx("strong",{children:"API URL:"})," ",n()]})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Login Test"}),Y.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!l||!c)return;m([]),h("Attempting login...");const t=await s(l,c);t.success?h("Login successful!"):h("Login failed: "+t.error)},className:"space-y-4",children:[Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),Y.jsx("input",{type:"email",value:l,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 bg-[#2a2d31] border border-gray-600 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Enter email"})]}),Y.jsxs("div",{children:[Y.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),Y.jsx("input",{type:"password",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 bg-[#2a2d31] border border-gray-600 rounded-lg focus:outline-none focus:border-blue-500",placeholder:"Enter password"})]}),Y.jsxs("div",{className:"flex gap-4",children:[Y.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:"Login"}),Y.jsx("button",{type:"button",onClick:async()=>{if(!l||!c)return void h("Please enter email and password");m([]),h("Starting login test...");const e=await(async(e,t)=>{try{const s=await fetch(n()+"/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t}),credentials:"include"});if(s.ok){const e=await s.json();return e.data&&e.data.accessToken&&localStorage.setItem("accessToken",e.data.accessToken),e}return await s.json()}catch(s){return{error:s.message}}})(l,c);h("Login test completed: "+(e.success?"Success":"Failed"))},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors",children:"Test Login API"})]})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Controls"}),Y.jsxs("div",{className:"flex gap-4",children:[Y.jsx("button",{onClick:async()=>{m([]),h("Starting authentication test..."),await(async()=>{try{(await fetch(n()+"/health",{method:"GET",credentials:"include"})).ok;const e=localStorage.getItem("accessToken");if(e)if((await fetch(n()+"/user/profile",{method:"GET",headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"},credentials:"include"})).ok);else{const e=await fetch(n()+"/auth/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"});if(e.ok){const t=await e.json();t.data&&t.data.accessToken&&localStorage.setItem("accessToken",t.data.accessToken)}}}catch(e){}})(),h("Authentication test completed. Check console for details.")},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors",children:"Run Auth Flow Test"}),Y.jsx("button",{onClick:r,className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:"Logout"}),Y.jsx("button",{onClick:()=>{localStorage.removeItem("accessToken"),h("Access token cleared from localStorage")},className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors",children:"Clear Access Token"}),Y.jsxs("button",{onClick:()=>{const e="local"===i()?"deployed":"local";a(e),h(`Switched to ${e} backend`)},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors",children:["Switch Backend (","local"===i()?"Deployed":"Local",")"]})]})]}),Y.jsxs("div",{className:"bg-[#1a1d21] rounded-lg p-6",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Results"}),Y.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===u.length?Y.jsx("p",{className:"text-gray-400",children:"No test results yet. Run a test to see results here."}):u.map(((e,t)=>Y.jsxs("div",{className:"text-sm",children:[Y.jsxs("span",{className:"text-gray-400",children:["[",e.timestamp,"]"]})," ",e.message]},t)))})]})]})})}},Symbol.toStringTag,{value:"Module"})),$s=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{continueWatching:e,hasContinueWatching:t,startWatchingMovie:r,clearAllProgress:a,refreshFromStorage:i}=s(),[n,l]=U.useState(!1);return Y.jsx("div",{className:"min-h-screen bg-[#121417] text-white p-6",children:Y.jsxs("div",{className:"max-w-6xl mx-auto",children:[Y.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Iframe Progress Tracking Test"}),Y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Controls"}),Y.jsxs("div",{className:"flex flex-wrap gap-4",children:[Y.jsx("button",{onClick:()=>{D()},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white",children:"Run Progress Tests"}),Y.jsx("button",{onClick:()=>{r({id:"tt0111161",title:"The Shawshank Redemption",type:"movie",poster_path:"/test-poster.jpg",backdrop_path:"/test-backdrop.jpg"}),setTimeout((()=>H(25)),1e3),setTimeout((()=>H(50)),2e3),setTimeout((()=>H(75)),3e3),setTimeout((()=>H(90)),4e3)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded text-white",children:"Simulate Progress Updates"}),Y.jsx("button",{onClick:()=>{a()},className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded text-white",children:"Clear All Progress"}),Y.jsx("button",{onClick:()=>{i()},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded text-white",children:"Refresh from Storage"}),Y.jsxs("button",{onClick:()=>l(!n),className:"px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded text-white",children:[n?"Hide":"Show"," Demo Component"]})]})]}),Y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Continue Watching Status"}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Y.jsxs("div",{children:[Y.jsx("p",{className:"text-gray-300",children:"Has Continue Watching:"}),Y.jsx("p",{className:"text-lg font-semibold "+(t()?"text-green-400":"text-red-400"),children:t()?"Yes":"No"})]}),Y.jsxs("div",{children:[Y.jsx("p",{className:"text-gray-300",children:"Items Count:"}),Y.jsx("p",{className:"text-lg font-semibold text-blue-400",children:e.length})]})]})]}),t()&&Y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Continue Watching Items"}),Y.jsx("div",{className:"space-y-4",children:e.map(((e,t)=>Y.jsx("div",{className:"bg-gray-700 rounded p-4",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsxs("div",{children:[Y.jsx("h3",{className:"font-semibold",children:e.title}),Y.jsx("p",{className:"text-gray-400 text-sm",children:"tv"===e.type?`TV Show - S${e.season} E${e.episode}`:"Movie"}),Y.jsxs("p",{className:"text-gray-400 text-sm",children:["Progress: ",e.progress?e.progress.toFixed(1)+"%":"0%"]}),Y.jsxs("p",{className:"text-gray-400 text-sm",children:["Last watched: ",new Date(e.lastWatched).toLocaleString()]})]}),e.progress>0&&Y.jsxs("div",{className:"w-32",children:[Y.jsx("div",{className:"w-full bg-gray-600 rounded-full h-2",children:Y.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:e.progress+"%"}})}),Y.jsxs("p",{className:"text-xs text-gray-400 mt-1 text-center",children:[e.progress.toFixed(1),"%"]})]})]})},`${e.id}-${e.type}-${t}`)))})]}),Y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Progress Tracking Test"}),Y.jsx(V,{})]}),n&&Y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-8",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Iframe Progress Demo"}),Y.jsx(B,{})]}),Y.jsxs("div",{className:"bg-gray-800 rounded-lg p-6",children:[Y.jsx("h2",{className:"text-xl font-semibold mb-4",children:"How to Test"}),Y.jsxs("div",{className:"space-y-2 text-gray-300",children:[Y.jsxs("p",{children:["1. ",Y.jsx("strong",{children:"Run Progress Tests"})," - Tests the iframe progress service"]}),Y.jsxs("p",{children:["2. ",Y.jsx("strong",{children:"Simulate Progress Updates"})," - Creates test progress data"]}),Y.jsxs("p",{children:["3. ",Y.jsx("strong",{children:"Open a movie"}),' - Go to any movie and click "Watch Now"']}),Y.jsxs("p",{children:["4. ",Y.jsx("strong",{children:"Watch for progress"})," - Look for progress indicators in the streaming player"]}),Y.jsxs("p",{children:["5. ",Y.jsx("strong",{children:"Check Continue Watching"})," - Return to home page to see progress saved"]}),Y.jsxs("p",{children:["6. ",Y.jsx("strong",{children:"Use Demo Component"})," - Test with the interactive demo"]})]}),Y.jsxs("div",{className:"mt-6 p-4 bg-blue-900/20 rounded border border-blue-500/20",children:[Y.jsx("h3",{className:"font-semibold text-blue-400 mb-2",children:"Expected Behavior"}),Y.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[Y.jsx("li",{children:"• Progress should be tracked when watching movies/shows"}),Y.jsx("li",{children:"• Progress bars should appear in Continue Watching section"}),Y.jsx("li",{children:"• Progress should persist across browser sessions"}),Y.jsx("li",{children:"• Console should show progress tracking logs"})]})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),Us={buymeacoffee:"https://buymeacoffee.com/lordvolemort",patreon:"https://www.patreon.com/LordVoldemort280"},Ys="voldem.9831@ptyes";function qs(){const e=new URLSearchParams;e.set("pa",(Ys+"").trim());{const t="lordvolemort".replace(/\s+/g," ").trim().slice(0,50);t&&e.set("pn",t)}return e.set("cu","INR"),e.toString()}function Zs(){const e=qs();return e?"upi://pay?"+e:""}const Gs=()=>/iPhone|iPad|iPod/i.test(navigator.userAgent),Js=e=>{const t=qs();return t?/Android/i.test(navigator.userAgent)?`intent://pay?${t}#Intent;scheme=upi;package=${e};end`:"upi://pay?"+t:""},Ks=e=>{const t=qs();if(!t)return"";switch(e){case"gpay":return"gpay://upi/pay?"+t;case"phonepe":return"phonepe://upi/pay?"+t;case"paytm":return"paytmmp://pay?"+t;case"bhim":return"bhim://upi/pay?"+t;default:return"upi://pay?"+t}},Qs=[{key:"patreon",name:"Patreon"},{key:"buymeacoffee",name:"Buy Me a Coffee"}],Xs=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,t]=U.useState(""),[s,r]=U.useState(!1),[a,i]=U.useState(!1),[n,l]=U.useState(!1);U.useEffect((()=>{if(!s)return;const e=setTimeout((()=>r(!1)),1600);return()=>clearTimeout(e)}),[s]);const o=(e="Copied")=>{t(e),r(!0)};return Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:"min-h-screen bg-[#0c0f13] text-white px-4",children:[Y.jsxs("div",{className:"w-full pt-12 pb-28 mx-auto px-2 sm:px-8 md:px-12",children:[Y.jsx(Ft.div,{className:"mb-6 md:mb-8",initial:{opacity:0,y:-6},animate:{opacity:1,y:0},transition:{duration:.25,ease:"easeOut"},children:Y.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/[0.03] px-4 py-3 text-sm text-white/80",children:"Keep Streamr fast, private, and reliable. Your support makes a difference."})}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10 items-start",children:[Y.jsxs(Ft.div,{className:"text-left order-2 md:order-1 hidden md:block",initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:[Y.jsx("div",{className:"mb-6 w-14 h-14 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center shadow-lg shadow-black/20",children:Y.jsx("svg",{className:"w-7 h-7 text-white/90",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:Y.jsx("path",{d:"M12.001 4.529c2.349-2.532 6.213-2.532 8.562 0 2.348 2.531 2.348 6.635 0 9.166l-7.07 7.622a2.1 2.1 0 01-3 0l-7.07-7.622c-2.348-2.531-2.348-6.635 0-9.166 2.349-2.532 6.213-2.532 8.562 0l1.016 1.095 1-1.095z"})})}),Y.jsx("h1",{className:"text-3xl md:text-5xl font-semibold tracking-tight",children:"Support Streamr"}),Y.jsx("p",{className:"mt-4 text-white/70 leading-relaxed hidden md:block",children:"If Streamr helps you unwind, consider supporting the costs to keep it fast, private, and reliable."}),Y.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6",children:[Y.jsxs("div",{className:"text-white/80 space-y-4 bg-white/[0.02] border border-white/10 rounded-2xl p-6",children:[Y.jsx("p",{className:"hidden md:block",children:"Streamr is crafted with care for speed, polish, and privacy—so browsing and watching feels effortless."}),Y.jsx("p",{className:"hidden md:block",children:"Your support covers hosting and helps ship improvements: faster loading, smarter discovery, and rock‑solid syncing."})]}),Y.jsx("div",{className:"text-white/80 space-y-4 bg-white/[0.02] border border-white/10 rounded-2xl p-6 hidden md:block",children:Y.jsx("p",{children:"Help keep Streamr independent and user‑first. If it made your movie nights better, thank you for backing it."})}),Y.jsx("div",{className:"text-white/60 text-sm hidden md:block",children:"Prefer a different method? Reach out via the Community page and let us know."})]})]}),Y.jsxs(Ft.div,{initial:"hidden",animate:"show",variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.06}}},className:"order-1 md:order-2 grid grid-cols-1 sm:grid-cols-2 gap-7 mt-6 md:mt-24",children:[Qs.map(((e,t)=>Y.jsxs(Ft.a,{href:Us[e.key],target:"_blank",rel:"noopener noreferrer",variants:{hidden:{opacity:0,y:8},show:{opacity:1,y:0}},className:"group rounded-3xl border border-white/10 bg-white/[0.02] hover:bg-white/[0.06] transition-all duration-200 shadow-lg shadow-black/10 p-5 flex flex-col items-start gap-4 hover:-translate-y-0.5",children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsxs("div",{className:"w-10 h-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center",children:["patreon"===e.key&&Y.jsxs("svg",{className:"w-5 h-5 text-white/90",viewBox:"0 0 24 24",fill:"currentColor",children:[Y.jsx("circle",{cx:"14",cy:"8",r:"6"}),Y.jsx("rect",{x:"2",y:"4",width:"4",height:"16",rx:"1.5"})]}),"buymeacoffee"===e.key&&Y.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 27 39",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-label":"Buy Me a Coffee",children:[Y.jsx("path",{d:"M14.3206 17.9122C12.9282 18.5083 11.3481 19.1842 9.30013 19.1842C8.44341 19.1824 7.59085 19.0649 6.76562 18.8347L8.18203 33.3768C8.23216 33.9847 8.50906 34.5514 8.95772 34.9645C9.40638 35.3776 9.994 35.6069 10.6039 35.6068C10.6039 35.6068 12.6122 35.7111 13.2823 35.7111C14.0036 35.7111 16.1662 35.6068 16.1662 35.6068C16.776 35.6068 17.3635 35.3774 17.8121 34.9643C18.2606 34.5512 18.5374 33.9846 18.5876 33.3768L20.1046 17.3073C19.4267 17.0757 18.7425 16.9219 17.9712 16.9219C16.6372 16.9214 15.5623 17.3808 14.3206 17.9122Z",fill:"#FFF"}),Y.jsx("path",{d:"M26.6584 10.3609L26.4451 9.28509C26.2537 8.31979 25.8193 7.40768 24.8285 7.05879C24.5109 6.94719 24.1505 6.89922 23.907 6.66819C23.6634 6.43716 23.5915 6.07837 23.5351 5.74565C23.4308 5.13497 23.3328 4.52377 23.2259 3.91413C23.1336 3.39002 23.0606 2.80125 22.8202 2.32042C22.5073 1.6748 21.858 1.29723 21.2124 1.04743C20.8815 0.923938 20.5439 0.819467 20.2012 0.734533C18.5882 0.308987 16.8922 0.152536 15.2328 0.0633591C13.241 -0.046547 11.244 -0.0134338 9.25692 0.162444C7.77794 0.296992 6.22021 0.459701 4.81476 0.971295C4.30108 1.15851 3.77175 1.38328 3.38115 1.78015C2.90189 2.26775 2.74544 3.02184 3.09537 3.62991C3.34412 4.06172 3.7655 4.3668 4.21242 4.56862C4.79457 4.82867 5.40253 5.02654 6.02621 5.15896C7.76282 5.54279 9.56148 5.6935 11.3356 5.75765C13.302 5.83701 15.2716 5.77269 17.2286 5.56521C17.7126 5.51202 18.1956 5.44822 18.6779 5.37382C19.2458 5.28673 19.6103 4.54411 19.4429 4.02678C19.2427 3.40828 18.7045 3.16839 18.0959 3.26173C18.0062 3.27581 17.917 3.28885 17.8273 3.30189L17.7626 3.31128C17.5565 3.33735 17.3503 3.36169 17.1441 3.38429C16.7182 3.43018 16.2913 3.46773 15.8633 3.49693C14.9048 3.56368 13.9437 3.59445 12.9831 3.59602C12.0391 3.59602 11.0947 3.56942 10.1529 3.50736C9.72314 3.4792 9.29447 3.44339 8.86684 3.39993C8.67232 3.37959 8.47832 3.35821 8.28432 3.33422L8.0997 3.31076L8.05955 3.30502L7.86816 3.27738C7.47703 3.21845 7.0859 3.15066 6.69895 3.06878C6.6599 3.06012 6.62498 3.03839 6.59994 3.0072C6.57491 2.976 6.56127 2.9372 6.56127 2.8972C6.56127 2.85721 6.57491 2.81841 6.59994 2.78721C6.62498 2.75602 6.6599 2.73429 6.69895 2.72563H6.70625C7.04158 2.65418 7.37951 2.59317 7.71849 2.53997C7.83148 2.52224 7.94482 2.50486 8.05851 2.48782H8.06164C8.27389 2.47374 8.48718 2.43567 8.69839 2.41064C10.536 2.2195 12.3845 2.15434 14.231 2.2156C15.1275 2.24168 16.0234 2.29435 16.9157 2.38509C17.1076 2.40491 17.2985 2.42577 17.4894 2.44923C17.5624 2.4581 17.6359 2.46853 17.7094 2.47739L17.8575 2.49878C18.2893 2.56309 18.7189 2.64115 19.1462 2.73293C19.7793 2.87061 20.5923 2.91546 20.8739 3.60906C20.9636 3.82913 21.0043 4.07371 21.0538 4.30474L21.1169 4.59939C21.1186 4.60467 21.1198 4.61008 21.1206 4.61555C21.2697 5.31089 21.4191 6.00623 21.5686 6.70157C21.5795 6.75293 21.5798 6.80601 21.5693 6.85748C21.5589 6.90895 21.5379 6.95771 21.5078 7.00072C21.4776 7.04373 21.4389 7.08007 21.3941 7.10747C21.3493 7.13487 21.2993 7.15274 21.2473 7.15997H21.2431L21.1519 7.17248L21.0617 7.18448C20.7759 7.22168 20.4897 7.25644 20.2033 7.28878C19.639 7.3531 19.0739 7.40872 18.5079 7.45566C17.3831 7.54918 16.2562 7.61055 15.127 7.63975C14.5516 7.65505 13.9763 7.66217 13.4013 7.66113C11.1124 7.65933 8.82553 7.5263 6.55188 7.2627C6.30574 7.2335 6.05959 7.20221 5.81344 7.1704C6.00431 7.19491 5.67472 7.15162 5.60797 7.14224C5.45152 7.12033 5.29506 7.09756 5.13861 7.07392C4.61346 6.99517 4.09144 6.89817 3.56733 6.81317C2.9337 6.70887 2.32771 6.76102 1.75458 7.07392C1.28413 7.33136 0.903361 7.72614 0.663078 8.20558C0.415886 8.71665 0.342354 9.2731 0.231796 9.82224C0.121237 10.3714 -0.0508594 10.9622 0.0143284 11.526C0.154613 12.7427 1.00518 13.7314 2.22863 13.9525C3.37959 14.1611 4.5368 14.3301 5.69714 14.474C10.2552 15.0323 14.8601 15.0991 19.4325 14.6733C19.8048 14.6385 20.1767 14.6006 20.548 14.5596C20.6639 14.5468 20.7813 14.5602 20.8914 14.5987C21.0016 14.6372 21.1017 14.6998 21.1845 14.782C21.2673 14.8642 21.3307 14.9639 21.37 15.0737C21.4093 15.1836 21.4235 15.3009 21.4116 15.4169L21.2958 16.5423C21.0625 18.8164 20.8292 21.0903 20.596 23.3641C20.3526 25.7519 20.1077 28.1395 19.8612 30.5269C19.7916 31.1993 19.7221 31.8715 19.6526 32.5436C19.5858 33.2054 19.5764 33.888 19.4507 34.542C19.2526 35.5704 18.5564 36.2019 17.5405 36.433C16.6098 36.6448 15.659 36.756 14.7045 36.7646C13.6464 36.7704 12.5888 36.7234 11.5307 36.7292C10.4011 36.7354 9.01755 36.6311 8.1456 35.7905C7.37951 35.052 7.27365 33.8958 7.16935 32.8961C7.03028 31.5725 6.89243 30.2491 6.75579 28.9259L5.98918 21.568L5.49324 16.8072C5.48489 16.7285 5.47655 16.6508 5.46873 16.5715C5.40927 16.0036 5.0072 15.4477 4.37357 15.4764C3.83121 15.5004 3.21479 15.9614 3.27841 16.5715L3.64607 20.1011L4.40642 27.4021C4.62302 29.4759 4.8391 31.5501 5.05465 33.6247C5.09637 34.022 5.13548 34.4205 5.17929 34.8179C5.41762 36.9894 7.07599 38.1596 9.12967 38.4892C10.3291 38.6822 11.5578 38.7218 12.775 38.7416C14.3353 38.7667 15.9113 38.8267 17.4461 38.544C19.7203 38.1268 21.4267 36.6082 21.6702 34.2526C21.7398 33.5725 21.8093 32.8923 21.8788 32.2119C22.11 29.9618 22.3409 27.7115 22.5714 25.4611L23.3255 18.1079L23.6713 14.7379C23.6885 14.5708 23.759 14.4137 23.8725 14.2898C23.986 14.1659 24.1363 14.0819 24.3012 14.0501C24.9515 13.9233 25.5732 13.7069 26.0357 13.212C26.7721 12.424 26.9187 11.3967 26.6584 10.3609ZM2.19525 11.0879C2.20516 11.0832 2.18691 11.1682 2.17909 11.2079C2.17752 11.1479 2.18065 11.0947 2.19525 11.0879ZM2.25836 11.5761C2.26357 11.5724 2.27921 11.5933 2.29538 11.6183C2.27087 11.5953 2.25523 11.5781 2.25783 11.5761H2.25836ZM2.32041 11.6579C2.34284 11.696 2.35483 11.72 2.32041 11.6579V11.6579ZM2.44505 11.7591H2.44818C2.44818 11.7627 2.45392 11.7664 2.456 11.7701C2.45255 11.766 2.4487 11.7624 2.44453 11.7591H2.44505ZM24.271 11.6079C24.0373 11.83 23.6853 11.9333 23.3375 11.9849C19.4366 12.5638 15.479 12.8569 11.5354 12.7275C8.71299 12.6311 5.92035 12.3176 3.12613 11.9229C2.85234 11.8843 2.55561 11.8342 2.36735 11.6324C2.01273 11.2517 2.18691 10.4851 2.27921 10.0251C2.3637 9.60373 2.52536 9.04207 3.02653 8.9821C3.80878 8.89031 4.71724 9.22042 5.49115 9.33776C6.4229 9.47996 7.35813 9.59382 8.29683 9.67935C12.303 10.0444 16.3765 9.98755 20.3649 9.45354C21.0919 9.35584 21.8163 9.24233 22.538 9.11299C23.181 8.99774 23.8939 8.78132 24.2825 9.44728C24.5489 9.90098 24.5844 10.508 24.5432 11.0207C24.5305 11.244 24.4329 11.4541 24.2705 11.6079H24.271Z",fill:"#fff"})]})]}),Y.jsxs("div",{children:[Y.jsx("div",{className:"font-semibold tracking-tight",children:e.name}),Y.jsx("div",{className:"text-xs text-white/60",children:"One‑time or monthly"})]})]}),Y.jsxs("div",{className:"inline-flex items-center gap-2 text-sm px-3 py-2 rounded-full border border-white/10 bg-white/5 group-hover:bg-white/10 transition-colors",children:[Y.jsx("span",{children:"Open"}),Y.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:Y.jsx("path",{d:"M9 5l7 7-7 7"})})]})]},e.key))),Y.jsxs(Ft.div,{variants:{hidden:{opacity:0,y:8},show:{opacity:1,y:0}},className:"rounded-3xl border border-white/10 bg-white/[0.02] p-5 shadow-lg shadow-black/10 flex flex-col items-start gap-4 hover:bg-white/[0.06] hover:-translate-y-0.5 transition-all "+(Zs()?"":"opacity-80"),children:[Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center",children:Y.jsx("svg",{className:"w-5 h-5 text-white/90",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:Y.jsx("path",{d:"M6 7h12M6 12h12M6 17h7"})})}),Y.jsxs("div",{children:[Y.jsx("div",{className:"font-semibold tracking-tight",children:"UPI"}),Y.jsx("div",{className:"text-xs text-white/60",children:"Pay with your preferred UPI app"})]})]}),Y.jsxs("div",{className:"flex items-center gap-2",children:[Y.jsxs("button",{onClick:e=>{Zs()&&i(!0)},className:"inline-flex items-center gap-2 px-3 py-2 rounded-full text-sm border border-white/10 bg-white/5 hover:bg-white/10 transition-colors "+(Zs()?"":"cursor-not-allowed"),children:[Y.jsx("span",{children:"Open"}),Y.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:Y.jsx("path",{d:"M9 5l7 7-7 7"})})]}),Y.jsxs("button",{onClick:()=>{l(!0),setTimeout((()=>{const e=document.getElementById("upi-qr");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),0)},className:"inline-flex items-center gap-2 px-3 py-2 rounded-full text-sm border border-white/10 bg-white/5 hover:bg-white/10 transition-colors",children:[Y.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:Y.jsx("path",{d:"M3 3h7v7H3V3zm11 0h7v4h-7V3zM3 14h4v7H3v-7zm14 3h4v4h-4v-4zM10 10h4v4h-4v-4zm8-3h1v1h-1V7zM7 16h1v1H7v-1z"})}),Y.jsx("span",{children:"QR"})]}),Y.jsxs("button",{onClick:async()=>{try{await navigator.clipboard.writeText(Ys),o("UPI ID copied")}catch(e){o("Copy failed")}},className:"inline-flex items-center gap-2 px-3 py-2 rounded-full text-sm border border-white/10 bg-white/5 hover:bg-white/10 transition-colors",children:[Y.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[Y.jsx("rect",{x:"9",y:"9",width:"10",height:"10",rx:"2"}),Y.jsx("rect",{x:"5",y:"5",width:"10",height:"10",rx:"2"})]}),Y.jsx("span",{children:"Copy ID"})]})]})]}),Y.jsx(Ft.div,{className:"grid grid-cols-1 gap-5",initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.4,ease:"easeOut"},children:Y.jsxs("div",{className:"text-white/80 text-sm bg-white/[0.02] border border-white/10 rounded-2xl p-5",children:[Y.jsxs("div",{className:"mb-8 flex gap-4 justify-between",children:[Y.jsxs("div",{className:"text-white/60 mb-1 flex items-center gap-2 whitespace-nowrap",children:[Y.jsxs("svg",{className:"w-4 h-4 text-white/60",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[Y.jsx("path",{d:"M12 12a5 5 0 100-10 5 5 0 000 10z"}),Y.jsx("path",{d:"M20 21a8 8 0 10-16 0"})]}),"UPI ID"]}),Y.jsx("div",{className:"flex items-center gap-2",children:Y.jsx("code",{className:"px-2 py-1 bg-white/5 rounded-full border border-white/10 whitespace-pre-wrap break-all cursor-pointer hover:bg-white/10 transition",title:"Click to copy",onClick:async()=>{try{await navigator.clipboard.writeText(Ys),o("UPI ID copied")}catch(e){o("Copy failed")}},children:Ys})})]}),Y.jsx("div",{className:"text-white/60",children:"Tip: On mobile, the UPI button opens your UPI app. On desktop, copy the UPI ID or scan the QR code."})]})})]})]})]}),s&&Y.jsx(Ft.div,{initial:{opacity:0,y:-20,x:20},animate:{opacity:1,y:0,x:0},exit:{opacity:0,y:-20,x:20},className:"fixed top-20 right-6 z-50 pointer-events-none",children:Y.jsx("div",{className:"pointer-events-auto px-4 py-2 rounded-xl bg-white/10 border border-white/10 backdrop-blur text-white shadow-lg shadow-black/30",children:Y.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[Y.jsxs("svg",{className:"w-4 h-4 text-white/80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[Y.jsx("path",{d:"M9 12l2 2 4-4"}),Y.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),Y.jsx("span",{children:e})]})})}),a&&Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9998] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>i(!1),children:Y.jsxs(Ft.div,{initial:{y:12,opacity:0},animate:{y:0,opacity:1},transition:{duration:.2,ease:"easeOut"},className:"w-full max-w-sm rounded-2xl bg-[#14171c] border border-white/10 text-white p-4",onClick:e=>e.stopPropagation(),children:[Y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Y.jsx("h3",{className:"text-base font-semibold",children:"Open with"}),Y.jsx("button",{onClick:()=>i(!1),className:"text-white/60 hover:text-white",children:Y.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:Y.jsx("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),Y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Y.jsxs("a",{href:Gs()?Ks("gpay"):Js("com.google.android.apps.nbu.paisa.user"),rel:"noreferrer",className:"px-3 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 text-sm flex items-center justify-center gap-2",onClick:e=>{const t=Gs()?Ks("gpay"):Js("com.google.android.apps.nbu.paisa.user");t?(e.preventDefault(),window.location.href=t,setTimeout((()=>{const e=Zs();e&&(window.location.href=e)}),1200)):e.preventDefault()},children:[Y.jsx("img",{src:"/Google Pay Icon.svg",alt:"Google Pay",className:"w-5 h-5 object-contain"}),Y.jsx("span",{children:"GPay"})]}),Y.jsxs("a",{href:Gs()?Ks("phonepe"):Js("com.phonepe.app"),rel:"noreferrer",className:"px-3 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 text-sm flex items-center justify-center gap-2",onClick:e=>{const t=Gs()?Ks("phonepe"):Js("com.phonepe.app");t?(e.preventDefault(),window.location.href=t,setTimeout((()=>{const e=Zs();e&&(window.location.href=e)}),1200)):e.preventDefault()},children:[Y.jsx("img",{src:"/PhonePe Icon.svg",alt:"PhonePe",className:"w-5 h-5 object-contain"}),Y.jsx("span",{children:"PhonePe"})]}),Y.jsxs("a",{href:Gs()?Ks("paytm"):Js("net.one97.paytm"),rel:"noreferrer",className:"px-3 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 text-sm flex items-center justify-center gap-2",onClick:e=>{const t=Gs()?Ks("paytm"):Js("net.one97.paytm");t?(e.preventDefault(),window.location.href=t,setTimeout((()=>{const e=Zs();e&&(window.location.href=e)}),1200)):e.preventDefault()},children:[Y.jsx("img",{src:"/Paytm Icon.svg",alt:"Paytm",className:"w-5 h-5 object-contain"}),Y.jsx("span",{children:"Paytm"})]}),Y.jsxs("a",{href:Gs()?Ks("bhim"):Js("in.org.npci.upiapp"),rel:"noreferrer",className:"px-3 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-white/10 text-sm flex items-center justify-center gap-2",onClick:e=>{const t=Gs()?Ks("bhim"):Js("in.org.npci.upiapp");t?(e.preventDefault(),window.location.href=t,setTimeout((()=>{const e=Zs();e&&(window.location.href=e)}),1200)):e.preventDefault()},children:[Y.jsx("img",{src:"/BHIM App Icon.svg",alt:"BHIM",className:"w-5 h-5 object-contain"}),Y.jsx("span",{children:"BHIM"})]})]}),Y.jsx("div",{className:"mt-3",children:Y.jsxs("a",{href:Zs()||void 0,className:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 rounded-full text-sm border border-white/10 bg-white/5 hover:bg-white/10",children:[Y.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",children:Y.jsx("path",{d:"M6 7h12M6 12h12M6 17h7"})}),Y.jsx("span",{children:"Other UPI app"})]})}),Y.jsx("p",{className:"mt-3 text-xs text-white/50",children:"Note: App selection works best on Android. On iOS, use your UPI app to scan the QR or copy ID."})]})}),n&&Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[9998] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>l(!1),children:Y.jsx(Ft.div,{initial:{y:24,opacity:0},animate:{y:0,opacity:1},exit:{y:24,opacity:0},transition:{duration:.22,ease:"easeOut"},className:"w-full max-w-xs sm:max-w-sm rounded-2xl bg-[#14171c] border border-white/10 text-white p-5 sm:p-6 shadow-2xl",onClick:e=>e.stopPropagation(),children:Y.jsx("div",{className:"flex flex-col items-center",children:Y.jsxs("div",{className:"p-3 rounded-xl bg-white/[0.03] border border-white/10 shadow-md shadow-black/20 flex flex-col items-center",children:[Y.jsx("img",{src:"/qr-code.png",alt:"UPI QR Code",className:"w-48 h-48 sm:w-52 sm:h-52 rounded-md object-contain bg-white/5",onError:()=>l(!1)}),Y.jsx("div",{className:"text-center text-white/60 text-xs mt-3",children:"Scan with any UPI app"})]})})})})]}),Y.jsx("div",{className:"w-full bg-[#181a1f]/95 border-t border-white/10 pt-6 pb-6 md:pb-8 flex flex-col items-center mt-16 md:mt-20",children:Y.jsxs("div",{className:"text-center text-white/60 text-sm",children:[Y.jsx("p",{className:"-mt-2 mb-1",children:"Thank you for supporting Streamr."}),Y.jsxs("div",{className:"mt-3 flex items-center justify-center gap-3",children:[Y.jsx("a",{href:"/community",className:"px-3 py-1.5 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 transition-colors",children:"Community"}),Y.jsx("a",{href:"/",className:"px-3 py-1.5 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 transition-colors",children:"Home"})]})]})})]})}},Symbol.toStringTag,{value:"Module"})),er=({src:e,alt:t,className:s,sizes:r,width:a=400,height:i=600,priority:n=!1})=>{const[l,o]=U.useState(!1);return e?Y.jsx("img",{src:e,alt:t,loading:n?"eager":"lazy",decoding:"async",fetchpriority:n?"high":"auto",sizes:r,width:a,height:i,className:`absolute inset-0 w-full h-full object-cover transition duration-300 ${l?"blur-0 opacity-100":"blur-sm opacity-80"} ${s||""}`,onLoad:()=>o(!0)}):Y.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-white/40 text-xs "+(s||""),children:"No Image"})},tr=K.memo((({item:e,onClick:t,priority:s=!1})=>{const r=U.useMemo((()=>{const t=e?.images||e?.image||null,s=t?.jpg?.large_image_url||t?.jpg?.image_url||t?.webp?.large_image_url||t?.webp?.image_url;if(s)return s;if(e?.coverImage)return e.coverImage;const r=e?.comic?.md_covers?.[0]?.b2key||e?.md_covers?.[0]?.b2key||e?.cover?.b2key||e?.md_covers?.b2key;return r?"https://meo.comick.pictures/"+r:null}),[e]),a=e?.title||e?.title_english||e?.title_japanese||e?.comic?.title||"Untitled";return Y.jsxs("button",{onClick:t,className:"group w-full text-left rounded-lg overflow-hidden bg-[#0f1216] hover:bg-[#14181d] transition-colors shadow-lg",style:{contentVisibility:"auto",containIntrinsicSize:"300px 450px"},children:[Y.jsxs("div",{className:"relative w-full bg-[#0b0f14]",children:[Y.jsx("div",{className:"aspect-[2/3] w-full"}),Y.jsx(er,{src:r,alt:a,priority:s,sizes:"(min-width:1536px) 10vw, (min-width:1280px) 12vw, (min-width:1024px) 16vw, (min-width:768px) 20vw, (min-width:640px) 30vw, 45vw"})]}),Y.jsxs("div",{className:"p-2.5",children:[Y.jsx("div",{className:"text-white text-sm font-medium leading-snug line-clamp-2 min-h-[2.5rem]",children:a}),Y.jsx("div",{className:"text-[11px] text-gray-400 mt-1 line-clamp-1",children:e?.comic?.slug||e?.slug})]})]})})),sr=K.memo((()=>{const e=20,t=Q(),[s,r]=U.useState([]),[a,i]=U.useState([]),[n,l]=U.useState(!0),[o,c]=U.useState(""),[d,u]=U.useState(0),[m,h]=U.useState(""),[x,p]=U.useState(!1),[g,f]=U.useState(!1),[w,v]=U.useState(1),[b,y]=U.useState(!0),[j,k]=U.useState("trending"),[C,S]=U.useState(""),T=U.useRef(null),_=U.useRef(null),M=U.useRef(null),[L,P]=U.useState(!1),[E,z]=U.useState([]),[R,I]=U.useState(-1),[A,F]=U.useState([]),V=U.useRef(!0),B=U.useRef(null),D=U.useRef(null),H=U.useRef(null),$=U.useRef(null);U.useEffect((()=>(V.current=!0,()=>{V.current=!1,D.current&&(clearTimeout(D.current),D.current=null),H.current&&(clearTimeout(H.current),H.current=null),$.current&&(clearTimeout($.current),$.current=null),B.current&&(B.current.disconnect(),B.current=null)})),[]),U.useEffect((()=>{try{const e="https://meo.comick.pictures";if(!document.querySelector(`link[rel="preconnect"][href="${e}"]`)){const t=document.createElement("link");t.rel="preconnect",t.href=e,t.crossOrigin="",document.head.appendChild(t)}}catch{}}),[]),U.useEffect((()=>{try{const e=localStorage.getItem("manga.search.history");e&&z(JSON.parse(e))}catch{}}),[]);const q=U.useCallback((e=>{try{localStorage.setItem("manga.search.history",JSON.stringify(e))}catch{}}),[]),Z=U.useCallback((e=>{const t=(e||"").trim();t&&z((e=>{const s=new Set([t,...e]),r=Array.from(s).slice(0,8);return q(r),r}))}),[q]),G=U.useCallback((()=>{z([]),q([])}),[q]);U.useEffect((()=>{const e=e=>{"/"!==e.key||e.defaultPrevented||(e.preventDefault(),T.current?.focus(),P(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]);const J=U.useCallback((()=>{V.current&&(l(!0),c(""),V.current&&Nt.getTopManga({page:1,limit:e}).then((t=>{if(!V.current)return;let s=Array.isArray(t)?t:t?.data||[];if(0===s.length)return Nt.searchManga({q:"",page:1,limit:e,order_by:"popularity",sort:"desc",sfw:!0}).then((t=>{if(!V.current)return;const s=Array.isArray(t)?t:t?.data||[];r(s),i(s),k("trending"),v(1),y(s.length>=e)}));r(s),i(s),k("trending"),v(1),y(s.length>=e)})).catch((e=>{if(!V.current)return;let t="Failed to load manga";if("AbortError"===e.name)t="Request was cancelled. Please try again.";else if(e.message&&e.message.includes("signal is aborted"))t="Request was cancelled. Please try again.";else{if(e.message&&e.message.includes("Component unmounted"))return;t=e.message||"Failed to load manga"}c(t)})).finally((()=>{V.current&&l(!1)})))}),[]);U.useEffect((()=>J()),[J]);const K=U.useCallback((async()=>{u((e=>e+1)),await J()}),[J]);U.useEffect((()=>{if(!V.current)return;const t=m||"";if(t.trim())return p(!0),D.current&&clearTimeout(D.current),D.current=setTimeout((async()=>{if(!V.current)return;const s=t.trim();try{if(!V.current)return;const t=await Nt.searchManga({q:s,page:1,limit:e,order_by:"members",sort:"desc",sfw:!0});if(!V.current)return;const a=Array.isArray(t)?t:t?.data||[];r(a),k("search"),v(1),y((a?.length||0)>=e),S(s),Z(s)}catch(a){if(!V.current)return;let e="Search failed";if("AbortError"===a.name)e="Search was cancelled. Please try again.";else if(a.message&&a.message.includes("signal is aborted"))e="Search was cancelled. Please try again.";else{if(a.message&&a.message.includes("Component unmounted"))return;e=a.message||"Search failed"}c(e)}finally{V.current&&p(!1)}}),250),()=>{D.current&&(clearTimeout(D.current),D.current=null)};V.current&&(p(!1),r(a),k("trending"),v(1),y(!0),S(""))}),[m,a,Z]);const X=U.useMemo((()=>{const e=(m||"").trim().toLowerCase(),t=E.filter((t=>!e||t.toLowerCase().includes(e))).map((e=>({type:"history",label:e,value:e}))).slice(0,5),r=(a.length?a:s).map((e=>e?.title||e?.comic?.title||"")).filter(Boolean).map((e=>({type:"suggestion",label:e,value:e}))),i=new Set,n=[];for(const s of[...t,...A,...r]){const t=s.value.toLowerCase();if(!i.has(t)&&(i.add(t),e&&!t.includes(e)||n.push(s),n.length>=12))break}return n}),[E,a,s,m,A]);U.useEffect((()=>{if(!V.current)return;const e=(m||"").trim();if(e.length>=2)return H.current&&clearTimeout(H.current),H.current=setTimeout((async()=>{if(V.current)try{const t=await comickService.getTitleSuggestions(e,{limit:10});if(!V.current)return;const s=(t||[]).map((e=>({type:"server",label:e,value:e})));F(s)}catch(t){}}),250),()=>{H.current&&(clearTimeout(H.current),H.current=null)};V.current&&F([])}),[m]),U.useEffect((()=>{const e=e=>{_.current&&T.current&&(_.current.contains(e.target)||T.current.contains(e.target)||P(!1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]),U.useCallback((e=>{if(L)if("ArrowDown"===e.key)e.preventDefault(),I((e=>Math.min(e+1,X.length-1)));else if("ArrowUp"===e.key)e.preventDefault(),I((e=>Math.max(e-1,-1)));else if("Enter"===e.key){if(R>=0&&X[R]){e.preventDefault();const t=X[R].value;h(t),Z(t),P(!1)}}else"Escape"===e.key&&P(!1)}),[L,R,X,Z]);const ee=U.useCallback(((e,t)=>{const s=new Set(e.map((e=>e?.hid||e?.slug||e?.comic?.hid||e?.comic?.slug))),r=[...e];for(const a of t){const e=a?.hid||a?.slug||a?.comic?.hid||a?.comic?.slug;e&&!s.has(e)&&(s.add(e),r.push(a))}return r}),[]),te=U.useCallback((async()=>{if(!g&&b){f(!0);try{if(!V.current)return;let s;const a=w+1;if("search"===j)s=await Nt.searchManga({q:C,page:a,limit:e,order_by:"members",sort:"desc",sfw:!0});else try{s=await Nt.getTopManga({page:a,limit:e})}catch(t){if(!(t.message||"").includes("Jikan 429"))throw t;s=await Nt.searchManga({q:"",page:a,limit:e,order_by:"members",sort:"desc",sfw:!0})}const i=Array.isArray(s)?s:s?.data||[];r((e=>ee(e,i))),v(a),y((i?.length||0)>=e)}catch(t){if("AbortError"===t.name||t.message&&t.message.includes("signal is aborted"));else if(t.message&&t.message.includes("Component unmounted"))return;y(!1)}finally{f(!1)}}}),[g,b,w,j,C,ee]);return U.useEffect((()=>{const e=M.current;if(!e||!V.current)return;B.current&&B.current.disconnect();const t=new IntersectionObserver((e=>{for(const t of e)t.isIntersecting&&V.current&&te()}),{root:null,rootMargin:"600px",threshold:0});B.current=t,t.observe(e);try{e.getBoundingClientRect().top<=window.innerHeight+600&&V.current&&te()}catch{}return()=>{try{B.current&&(B.current.disconnect(),B.current=null)}catch{}}}),[te,s.length,b]),U.useEffect((()=>{var e;if(s&&0!==s.length&&V.current&&(!m||0>=m.trim().length))return $.current&&clearTimeout($.current),e=async()=>{if(V.current)try{const e=s.slice(0,6);await Promise.all(e.map((e=>{const t=e?.comic?.slug||e?.slug||e?.hid;return t&&V.current?comickService.getComicInfo(t,{version:"v1.0"}).catch((()=>{})):Promise.resolve()})))}catch{}},"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback((()=>{V.current&&e()}),{timeout:1200}):$.current=setTimeout((()=>{V.current&&e()}),300),()=>{$.current&&(clearTimeout($.current),$.current=null)}}),[s,m]),Y.jsxs("div",{className:"min-h-screen px-4 py-4",children:[Y.jsx("div",{className:"max-w-2xl mx-auto",children:Y.jsxs("div",{className:"mt-3 mb-6 md:mt-4 md:mb-8",children:[Y.jsx(W,{placeholder:"Search manga titles…",onSearch:e=>h(e),onSearchSubmit:e=>Z(e),onClear:()=>{h(""),r(a)},suggestions:X.map((e=>({id:e.value,title:e.label}))),onSuggestionSelect:e=>{const t=e?.title||"";t&&(h(t),Z(t))},isLoading:x,showHistory:!0,searchHistory:E,clearHistory:G,variant:"default",size:"md",theme:"dark"}),x&&Y.jsxs("div",{className:"my-2 mt-6 flex items-center justify-center",children:[Y.jsx(O,{size:"sm",color:"white",variant:"dots"}),Y.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"Searching…"})]})]})}),o?Y.jsx(N,{isLoading:!1,error:o,retryCount:d,onRetry:K,context:"manga",className:"col-span-full"}):n&&0===s.length?Y.jsx(N,{isLoading:!0,error:null,retryCount:d,onRetry:K,context:"manga",className:"col-span-full",hasContent:s.length>0}):Y.jsxs("div",{children:[Y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 3xl:grid-cols-10 gap-4",children:s.map(((e,s)=>Y.jsx(tr,{item:e,priority:12>s,onClick:()=>{const s=e?.mal_id||e?.comic?.slug||e?.slug||e?.hid||e?.comic?.hid;s&&t("/manga/"+encodeURIComponent(s))}},e?.hid||e?.slug||s)))}),Y.jsx("div",{ref:M,className:"h-6"}),g&&Y.jsxs("div",{className:"mt-4 mb-6 flex items-center justify-center text-gray-400",children:[Y.jsx(O,{size:"sm",color:"white",variant:"dots"}),Y.jsx("span",{className:"ml-2 text-xs",children:"Loading more…"})]}),!b&&s.length>0&&Y.jsx("div",{className:"mt-6 mb-8 text-center text-xs text-gray-500",children:"No more results"})]})]})}),((e,t)=>!0)),rr=Object.freeze(Object.defineProperty({__proto__:null,default:sr},Symbol.toStringTag,{value:"Module"})),ar={en:"English",ja:"Japanese",jp:"Japanese",ko:"Korean",zh:"Chinese","zh-hans":"Chinese (Simplified)","zh-hant":"Chinese (Traditional)",es:"Spanish","es-419":"Spanish (Latin America)",pt:"Portuguese","pt-br":"Portuguese (Brazil)",fr:"French",de:"German",it:"Italian",ru:"Russian",vi:"Vietnamese",id:"Indonesian",th:"Thai",hi:"Hindi",ar:"Arabic",tr:"Turkish",pl:"Polish",nl:"Dutch",uk:"Ukrainian",he:"Hebrew",fa:"Persian",cs:"Czech",ro:"Romanian",hu:"Hungarian",sv:"Swedish",fi:"Finnish",no:"Norwegian",da:"Danish"},ir=e=>{if(!e)return"";const t=(e+"").toLowerCase();return ar[t]?ar[t]:t.split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("-")},nr=K.memo((({ch:e,onRead:t,isRead:s=!1,isBookmarked:r=!1,onBookmark:a})=>{const i=U.useCallback((()=>{t?.()}),[t]),n=U.useCallback((t=>{t.stopPropagation(),t.preventDefault(),a?.(e)}),[a,e]),l=U.useMemo((()=>e?.chap||e?.vol?`Vol ${e?.vol||""} Ch ${e?.chap||""}`:e?.title||"Chapter"),[e?.chap,e?.vol,e?.title]),o=U.useMemo((()=>ir(e?.lang||e?.language||"")),[e?.lang,e?.language]),c=e?.title&&e?.title!==e?.chap;return Y.jsxs("div",{className:"w-full flex items-center border border-white/10 justify-between px-3 py-2 rounded-full transition-all duration-200 active:scale-[0.99] "+(s?"bg-[#1a1f24] hover:bg-[#20262b] text-gray-400":"bg-[#181c20] hover:bg-[#20262b] text-gray-200"),children:[Y.jsxs("div",{onClick:i,className:"flex items-center space-x-3 flex-1 text-left rounded-lg p-1 -m-1 cursor-pointer focus:outline-none focus:ring-2 focus:ring-white/20",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[s&&Y.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),Y.jsx("span",{className:"text-sm font-medium",children:l})]}),c&&Y.jsx("span",{className:"text-xs text-gray-400 truncate max-w-32",children:e.title})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-500 text-xs",children:o}),Y.jsx("button",{onClick:n,className:"p-1 hover:bg-white/10 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-white/20","aria-label":r?"Remove bookmark":"Add bookmark",children:Y.jsx("svg",{className:"w-4 h-4 "+(r?"text-yellow-400 fill-current":"text-gray-500"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]})]})})),lr=K.memo((()=>{const{slug:e}=Se(),t=Q(),[s,r]=U.useState(null),[a,i]=U.useState([]),[n,l]=U.useState([]),[o,c]=U.useState(!1),[d,u]=U.useState({loaded:0,total:0,currentLang:""}),[m,h]=U.useState([]),[x,p]=U.useState(0),[g,f]=U.useState((()=>{try{return localStorage.getItem("manga.selectedLang")||""}catch{return""}})),[w,v]=U.useState((()=>{try{return localStorage.getItem("manga.chapterSearch")||""}catch{return""}})),[b,y]=U.useState(w),[j,k]=U.useState((()=>{try{return localStorage.getItem("manga.sortOrder")||"desc"}catch{return"desc"}})),[C,S]=U.useState((()=>{try{return"true"===localStorage.getItem("manga.showOnlyUnread")}catch{return!1}})),[T,_]=U.useState((()=>{try{return localStorage.getItem("manga.selectedVolume")||""}catch{return""}})),[M,L]=U.useState((()=>{try{return localStorage.getItem("manga.selectedChapter")||""}catch{return""}})),[P,E]=U.useState(!0),[z,R]=U.useState(""),[I,A]=U.useState(!1),[F,V]=U.useState(null),[B,D]=U.useState([]),[H,W]=U.useState([]),[O,$]=U.useState(!1),q=U.useRef(null),[Z,G]=U.useState(100),[J,K]=U.useState((()=>{try{return"true"===localStorage.getItem("manga.isFiltersCollapsed")}catch{return!1}})),[X,ee]=U.useState(new Map),[te,se]=U.useState((()=>{try{const e=localStorage.getItem("manga.readingProgress");return e?JSON.parse(e):{}}catch{return{}}})),[re,ae]=U.useState((()=>{try{const e=localStorage.getItem("manga.bookmarks");return e?new Set(JSON.parse(e)):new Set}catch{return new Set}}));U.useState(0),U.useState(0);const[ie,ne]=U.useState(!1),[le,oe]=U.useState(null),[ce,de]=U.useState(null),ue=U.useRef(!0),me=U.useRef(null),he=U.useMemo((()=>{const e=s?.images||s?.image||null;return e?.jpg?.large_image_url||e?.jpg?.image_url||e?.webp?.large_image_url||e?.webp?.image_url||null}),[s]),xe=U.useMemo((()=>{const e=s?.images||null,t=e?.jpg?.large_image_url||e?.jpg?.image_url||e?.webp?.large_image_url||e?.webp?.image_url;return t?[{url:t,volume:"Main",description:""}]:[]}),[s]),pe=U.useMemo((()=>s?.genres||[]),[s]),ge=U.useMemo((()=>s?.authors||[]),[s]),fe=U.useMemo((()=>s?.status||"Unknown"),[s]),we=U.useMemo((()=>({year:s?.published?.prop?.from?.year||s?.year,country:null,contentRating:s?.rating||null})),[s]),ve=U.useMemo((()=>n.length||a.length||0),[n.length,a.length]),be=U.useMemo((()=>0),[]),ye=U.useMemo((()=>0),[]),je=U.useMemo((()=>0),[]),Ne=U.useMemo((()=>{const e=s?.published?.to||s?.published?.from;if(!e)return null;try{const t=new Date(e);return isNaN(t.getTime())?null:t}catch{return null}}),[s]),ke=U.useMemo((()=>s?.demographic||s?.comic?.demographic||null),[s]),Ce=U.useMemo((()=>{const e=s?.content_rating||s?.comic?.content_rating;return e?{1:"Safe",2:"Suggestive",3:"Erotica",4:"Pornographic"}[e]||e:null}),[s]),Te=U.useMemo((()=>"Unknown"),[]),_e=U.useMemo((()=>null),[]),Me=U.useMemo((()=>null),[]),Le=U.useMemo((()=>{const e=s?.synopsis||"No description available.",t=e.indexOf("---");return-1!==t?e.substring(0,t).trim():e}),[s]),Pe=U.useCallback((e=>{se((t=>({...t,[e]:{read:!0,timestamp:Date.now()}})))}),[]),Ee=U.useCallback((e=>{const t=e?.hid||e?.id;ae((e=>{const s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s}))}),[]),ze=U.useCallback((e=>{const t=e?.hid||e?.id;return te[t]?.read||!1}),[te]),Re=U.useCallback((e=>{const t=e?.hid||e?.id;return re.has(t)}),[re]),Ie=U.useCallback((()=>{f(""),v(""),k("desc"),S(!1),_(""),L("")}),[]),Ae=U.useMemo((()=>g||w||C||T||M||"desc"!==j),[g,w,C,T,M,j]);U.useEffect((()=>(ue.current=!0,()=>{ue.current=!1,me.current&&(clearTimeout(me.current),me.current=null)})),[]),U.useEffect((()=>{ue.current&&(E(!0),R(""),i([]),_(""),L(""),Promise.resolve().then((async()=>{if(!ue.current)return;const t=e,s=await Nt.getMangaFullById(t).catch((()=>Nt.getMangaById(t))),a=s?.data||s||null;r(a);let i=null;try{const e=[];if(a?.title&&e.push(a.title),a?.title_english&&a.title_english!==a.title&&e.push(a.title_english),a?.title_japanese&&a.title_japanese!==a.title&&e.push(a.title_japanese),Array.isArray(a?.titles))for(const s of a.titles)s?.title&&e.push(s.title);const t=new Set;for(const s of e){const e=(s+"").trim().toLowerCase();if(!e||t.has(e))continue;t.add(e);const r=await kt.searchManga({title:s,limit:5}),n=r?.data||[];if(n.length){const e=a?.published?.prop?.from?.year||a?.year;let t=n[0];for(const s of n){const r=s?.attributes?.year;if(e&&r&&r===e){t=s;break}}if(i=t?.id||null,i)break}}}catch{}V(i||null);const n=[a?.score].find((e=>null!=e&&!isNaN(parseFloat(e))&&parseFloat(e)>0));if(n){const e=parseFloat(n);oe(Math.min(5,Math.max(0,e>5?e/2:e)))}else oe(null)})).catch((e=>{ue.current&&R(e.message||"Failed to load manga")})).finally((()=>{ue.current&&E(!1)})))}),[e]),U.useEffect((()=>{try{localStorage.setItem("manga.selectedLang",g||"")}catch{}}),[g]),U.useEffect((()=>{try{localStorage.setItem("manga.chapterSearch",w||"")}catch{}}),[w]),U.useEffect((()=>{try{localStorage.setItem("manga.sortOrder",j||"desc")}catch{}}),[j]),U.useEffect((()=>{try{localStorage.setItem("manga.showOnlyUnread",C.toString())}catch{}}),[C]),U.useEffect((()=>{try{localStorage.setItem("manga.selectedVolume",T||"")}catch{}}),[T]),U.useEffect((()=>{try{localStorage.setItem("manga.selectedChapter",M||"")}catch{}}),[M]),U.useEffect((()=>{try{localStorage.setItem("manga.readingProgress",JSON.stringify(te))}catch{}}),[te]),U.useEffect((()=>{try{localStorage.setItem("manga.bookmarks",JSON.stringify([...re]))}catch{}}),[re]),U.useEffect((()=>{try{localStorage.setItem("manga.isFiltersCollapsed",J.toString())}catch{}}),[J]),U.useEffect((()=>{const e=setTimeout((()=>{y(w)}),300);return()=>clearTimeout(e)}),[w]),U.useEffect((()=>{G(100)}),[g,T,M,C,b,j]),U.useEffect((()=>{const e=e=>{if(!O)return;const t=q.current;t&&t.contains(e.target)||$(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[O]),U.useEffect((()=>{if(!F||!ue.current)return;A(!0),i([]),_(""),L("");const e=g||"en";(async()=>{try{try{const t=await kt.getAggregate(F,{translatedLanguage:[e]}),s=t?.volumes||{},r=Object.keys(s),a=[];for(const i of r){const t=s[i]?.chapters||{};for(const s of Object.keys(t)){const r=t[s],n=(r?.chapter||r)?.id||r?.id;a.push({id:n,hid:n,vol:"none"===i?"":i,chap:s,title:"",lang:e})}}if(a.length)return a.sort(((e,t)=>(parseFloat(e.vol)||0)-(parseFloat(t.vol)||0)||(parseFloat(e.chap)||0)-(parseFloat(t.chap)||0))),i(a),l(a),h((t=>t.length?t:[e])),void de((e=>({...e||{},aggVolsLang:r.length,aggChLang:a.length})))}catch{}try{const e=await kt.getAggregate(F),t=e?.volumes||{},s=[];for(const r of Object.keys(t)){const e=t[r]?.chapters||{};for(const t of Object.keys(e)){const a=e[t],i=(a?.chapter||a)?.id||a?.id;s.push({id:i,hid:i,vol:"none"===r?"":r,chap:t,title:"",lang:""})}}if(s.length){s.sort(((e,t)=>(parseFloat(e.vol)||0)-(parseFloat(t.vol)||0)||(parseFloat(e.chap)||0)-(parseFloat(t.chap)||0)));const e=new Set,r=[];for(const t of s)e.has(t.hid)||(e.add(t.hid),r.push(t));l(r),de((e=>({...e||{},aggVolsAll:Object.keys(t).length,aggChAll:r.length})))}}catch{}let t=await kt.getMangaFeed(F,{limit:100,translatedLanguage:[e],order:{chapter:"asc"}});if(!ue.current)return;let s=t?.data||[];const r=100;let a=0,n=[];for(;5e3>a;){const e=await kt.getMangaFeed(F,{limit:r,order:{chapter:"asc"},offset:a}),t=e?.data||[];if(n=n.concat(t),!t.length||t.length<r)break;a+=r}const o=n.map((e=>({id:e?.id,hid:e?.id,chap:e?.attributes?.chapter,vol:e?.attributes?.volume,title:e?.attributes?.title,lang:e?.attributes?.translatedLanguage}))).filter((e=>e.hid)),c=[],d=new Set;for(const e of o)d.has(e.hid)||(d.add(e.hid),c.push(e));l(c);const u=new Set(c.map((e=>(e?.lang||"").trim())).filter(Boolean)),m=Array.from(u).sort(((e,t)=>"en"===e?-1:"en"===t?1:e.localeCompare(t)));h((e=>e.length?e:m));const x=s.map((e=>({id:e?.id,hid:e?.id,chap:e?.attributes?.chapter,vol:e?.attributes?.volume,title:e?.attributes?.title,lang:e?.attributes?.translatedLanguage}))),p=[],w=new Set;for(const e of x)e?.hid&&!w.has(e.hid)&&(w.add(e.hid),p.push(e));i(p.length?p:c),de((e=>({...e||{},feedLang:s.length,feedAll:c.length})));const v=new Set(x.map((e=>(e?.lang||"").trim())).filter(Boolean)),b=Array.from(v).sort(((t,s)=>t===e?-1:s===e?1:t.localeCompare(s)));h(b),g&&!b.includes(g)&&f("")}catch(t){if(!ue.current)return;R(t.message||"Failed to load chapters")}finally{ue.current&&A(!1)}})()}),[F,g,x]);const Fe=()=>{p((e=>e+1))},Ve=()=>{G((e=>Math.min(e+100,Be.length)))};U.useCallback((async(e,t)=>{if(X.has(e))return X.get(e);try{const s=await t();return ee((t=>new Map(t).set(e,s))),s}catch(s){throw s}}),[X]),U.useEffect((()=>{F&&ue.current&&(c(!0),(async()=>{try{const e=100;let t=0,s=[];for(let a=0;5>a;a++){const r=await kt.getMangaFeed(F,{limit:e,order:{chapter:"desc"},offset:t}),a=r?.data||[];if(s=s.concat(a),!a.length||a.length<e)break;t+=e}const r=s.map((e=>({id:e?.id,hid:e?.id,chap:e?.attributes?.chapter,vol:e?.attributes?.volume,title:e?.attributes?.title,lang:e?.attributes?.translatedLanguage})));l((e=>{const t=new Set(e.map((e=>e?.hid||e?.id))),s=[...e];for(const a of r){const e=a?.hid||a?.id;e&&!t.has(e)&&(t.add(e),s.push(a))}return s})),h((e=>e&&e.length?e:Array.from(new Set(r.map((e=>(e?.lang||"").trim())).filter(Boolean))).sort(((e,t)=>"en"===e?-1:"en"===t?1:e.localeCompare(t)))))}catch(e){}finally{ue.current&&c(!1)}})())}),[F]),U.useEffect((()=>{const e=n.length?n:a,t=Array.from(new Set(e.map((e=>(e?.vol??"").toString())).filter((e=>"null"!==e&&"undefined"!==e)))).map((e=>""===e?"0":e));t.sort(((e,t)=>(parseFloat(e)||0)-(parseFloat(t)||0)));const s=t.map((e=>"0"===e?"":e));D(s);const r=n.length?n:a,i=g?r.filter((e=>(e?.lang||e?.language||"").trim()===g)):r,l=T?i.filter((e=>(e?.vol??"")+""==T+"")):i,o=Array.from(new Set(l.map((e=>(e?.chap??"").toString())).filter((e=>e&&"null"!==e&&"undefined"!==e))));o.sort(((e,t)=>(parseFloat(e)||0)-(parseFloat(t)||0))),W(o),M&&!o.includes(M)&&L("")}),[a,n,T,g]);const Be=U.useMemo((()=>{const e=n.length?n:a;if(o)return e;let t=(g?e.filter((e=>(e?.lang||e?.language||"").trim()===g)):e).filter((e=>{if(T&&(e?.vol??"")+""!=T+"")return!1;if(M&&(e?.chap??"")+""!=M+"")return!1;if(C&&ze(e))return!1;if(b){const t=b.toLowerCase(),s=(e?.title||"").toLowerCase(),r=((e?.chap||"")+"").toLowerCase(),a=((e?.vol||"")+"").toLowerCase();if(!s.includes(t)&&!r.includes(t)&&!a.includes(t))return!1}return!0}));return t.sort(((e,t)=>{const s=parseFloat(e?.vol||0),r=parseFloat(t?.vol||0),a=parseFloat(e?.chap||0),i=parseFloat(t?.chap||0);return s!==r?"asc"===j?s-r:r-s:"asc"===j?a-i:i-a})),t}),[n,a,o,g,T,M,C,b,j,ze]);return U.useEffect((()=>{if(!g)return;const e=n.length,t=Be.length;10>e||0>=t||t>Math.max(3,Math.floor(.3*e))||f("")}),[g,Be.length,n.length]),U.useEffect((()=>{if(!Be||0===Be.length||!ue.current)return;const e=Be[0],t=e?.hid||e?.id;var s;return t?(me.current&&clearTimeout(me.current),s=()=>{ue.current&&kt.getChapter(t).catch((()=>{}))},"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback((()=>{ue.current&&s()}),{timeout:1500}):me.current=setTimeout((()=>{ue.current&&s()}),400),()=>{me.current&&(clearTimeout(me.current),me.current=null)}):void 0}),[Be]),Y.jsxs("div",{className:"min-h-screen px-4 py-6",children:[Y.jsxs("div",{children:[Y.jsx("div",{className:"mb-4",children:Y.jsxs("div",{className:"relative inline-block group",children:[Y.jsx("button",{onClick:()=>t("/manga"),className:"inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/5 hover:bg-white/10 text-white border border-white/10 hover:border-white/20 shadow-sm hover:shadow backdrop-blur-sm transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-white/20","aria-label":"Back to manga list",children:Y.jsx("span",{className:"text-base",children:"←"})}),Y.jsxs("div",{className:"absolute left-full top-1/2 border border-white/10 -translate-y-1/2 ml-3 px-3 py-2 bg-black/90 text-white text-sm rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none whitespace-nowrap z-50 shadow-lg",children:["Back to Manga list",Y.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-black/90"})]})]})}),P&&Y.jsxs("div",{className:"max-w-[90rem] mx-auto",children:[Y.jsxs("div",{className:"grid grid-cols-5 gap-4 lg:hidden mb-6",children:[Y.jsx("div",{className:"relative group col-span-3",children:Y.jsx("div",{className:"relative aspect-[3/4] w-full overflow-hidden rounded-xl border border-white/10 bg-white/5",children:Y.jsx("div",{className:"w-full h-full bg-gradient-to-br from-white/10 to-white/5"})})}),Y.jsxs("div",{className:"space-y-3 col-span-2",children:[Y.jsx("div",{className:"h-6 w-4/5 bg-white/10 rounded"}),Y.jsx("div",{className:"h-4 w-3/4 bg-white/5 rounded"}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map(((e,t)=>Y.jsx("div",{className:"w-3 h-3 bg-white/10 rounded"},t)))}),Y.jsx("div",{className:"h-4 w-8 bg-white/5 rounded"})]}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-6 w-20 bg-white/10 rounded-full"})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-16 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-8 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/10 rounded"}),Y.jsx("div",{className:"h-5 w-16 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("div",{className:"h-4 w-14 bg-white/10 rounded"}),Y.jsx("div",{className:"h-5 w-12 bg-white/10 rounded"})]})]}),Y.jsxs("div",{className:"flex items-start space-x-2",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-24 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"flex items-start space-x-2",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/5 rounded"}),Y.jsx("div",{className:"flex flex-wrap gap-1",children:Array.from({length:3}).map(((e,t)=>Y.jsx("div",{className:"h-5 w-16 bg-white/10 rounded-full"},t)))})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-8 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-12 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-16 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-12 bg-white/10 rounded"})]})]})]})]}),Y.jsxs("div",{className:"lg:hidden mb-6",children:[Y.jsx("div",{className:"h-6 w-24 bg-white/10 rounded mb-3"}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsx("div",{className:"h-4 w-full bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-11/12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-10/12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-9/12 bg-white/5 rounded"})]})]}),Y.jsxs("div",{className:"hidden lg:grid lg:grid-cols-5 gap-6 lg:gap-8",children:[Y.jsx("div",{className:"lg:col-span-2",children:Y.jsxs("div",{className:"sticky top-4",children:[Y.jsxs("div",{className:"flex gap-4 mb-6",children:[Y.jsx("div",{className:"relative group flex-shrink-0",children:Y.jsx("div",{className:"relative aspect-[3/4] w-64 overflow-hidden rounded-xl border border-white/10 bg-white/5",children:Y.jsx("div",{className:"w-full h-full bg-gradient-to-br from-white/10 to-white/5"})})}),Y.jsxs("div",{className:"flex-1 space-y-3",children:[Y.jsx("div",{className:"h-7 w-4/5 bg-white/10 rounded"}),Y.jsx("div",{className:"h-4 w-3/4 bg-white/5 rounded"}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"flex space-x-1",children:Array.from({length:5}).map(((e,t)=>Y.jsx("div",{className:"w-4 h-4 bg-white/10 rounded"},t)))}),Y.jsx("div",{className:"h-4 w-8 bg-white/5 rounded"})]}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-6 w-20 bg-white/10 rounded-full"})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-16 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-8 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/10 rounded"}),Y.jsx("div",{className:"h-5 w-16 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("div",{className:"h-4 w-14 bg-white/10 rounded"}),Y.jsx("div",{className:"h-5 w-12 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("div",{className:"h-4 w-16 bg-white/10 rounded"}),Y.jsx("div",{className:"h-5 w-14 bg-white/10 rounded"})]})]}),Y.jsxs("div",{className:"flex items-start space-x-2",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-32 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"flex items-start space-x-2",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/5 rounded"}),Y.jsx("div",{className:"flex flex-wrap gap-1",children:Array.from({length:3}).map(((e,t)=>Y.jsx("div",{className:"h-5 w-16 bg-white/10 rounded-full"},t)))})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-8 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-12 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-16 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-12 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-6 w-16 bg-white/10 rounded-full"})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-20 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-16 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-16 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-24 bg-white/10 rounded"})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-20 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-28 bg-white/10 rounded"})]})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-20 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-20 bg-white/10 rounded"})]})]})]})]}),Y.jsxs("div",{className:"mt-6",children:[Y.jsx("div",{className:"h-6 w-24 bg-white/10 rounded mb-3"}),Y.jsxs("div",{className:"space-y-2",children:[Y.jsx("div",{className:"h-4 w-full bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-11/12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-10/12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-9/12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-4 w-8/12 bg-white/5 rounded"})]})]})]})}),Y.jsx("div",{className:"lg:col-span-3",children:Y.jsxs("div",{className:"sticky top-4",children:[Y.jsxs("div",{className:"bg-[#181c20] rounded-2xl border border-white/10 p-4 mb-6",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Y.jsx("div",{className:"h-6 w-20 bg-white/10 rounded"}),Y.jsxs("div",{className:"flex items-center space-x-3",children:[Y.jsx("div",{className:"h-4 w-16 bg-white/5 rounded"}),Y.jsx("div",{className:"h-8 w-24 bg-white/5 rounded-full"})]})]}),Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[Y.jsx("div",{className:"h-8 w-full bg-white/5 rounded-full"}),Y.jsx("div",{className:"h-8 w-full bg-white/5 rounded-full"}),Y.jsx("div",{className:"h-8 w-full bg-white/5 rounded-full"}),Y.jsx("div",{className:"h-8 w-full bg-white/5 rounded-full"})]}),Y.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"w-4 h-4 bg-white/5 rounded-full"}),Y.jsx("div",{className:"h-4 w-24 bg-white/5 rounded"})]}),Y.jsx("div",{className:"h-8 w-24 bg-white/5 rounded-full"})]})]}),Y.jsx("div",{className:"space-y-2 max-h-[calc(100vh-31rem)] overflow-y-auto",children:Array.from({length:12}).map(((e,t)=>Y.jsxs("div",{className:"w-full flex items-center justify-between px-3 py-2 rounded-full bg-white/5 border border-white/10",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-24 bg-white/10 rounded"}),Y.jsx("div",{className:"h-3 w-16 bg-white/5 rounded"})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-3 w-12 bg-white/5 rounded"}),Y.jsx("div",{className:"w-4 h-4 bg-white/5 rounded"})]})]},t)))}),Y.jsx("div",{className:"text-center py-4 mt-4",children:Y.jsx("div",{className:"inline-flex h-9 w-48 bg-white/5 border border-white/10 rounded-full"})})]})})]}),Y.jsxs("div",{className:"lg:hidden",children:[Y.jsxs("div",{className:"bg-[#181c20] rounded-2xl border border-white/10 p-4 mb-6",children:[Y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Y.jsx("div",{className:"h-6 w-20 bg-white/10 rounded"}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-12 bg-white/5 rounded"}),Y.jsx("div",{className:"h-8 w-16 bg-white/5 rounded-full"})]})]}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsx("div",{className:"h-8 w-full bg-white/5 rounded-full"}),Y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Y.jsx("div",{className:"h-8 w-full bg-white/5 rounded-full"}),Y.jsx("div",{className:"h-8 w-full bg-white/5 rounded-full"})]}),Y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Y.jsx("div",{className:"h-8 w-full bg-white/5 rounded-full"}),Y.jsx("div",{className:"h-8 w-full bg-white/5 rounded-full"})]}),Y.jsxs("div",{className:"flex items-center gap-3",children:[Y.jsx("div",{className:"w-4 h-4 bg-white/5 rounded-full"}),Y.jsx("div",{className:"h-4 w-24 bg-white/5 rounded"})]})]})]}),Y.jsx("div",{className:"space-y-2 max-h-[calc(100vh-20rem)] overflow-y-auto",children:Array.from({length:8}).map(((e,t)=>Y.jsxs("div",{className:"w-full flex items-center justify-between px-3 py-2 rounded-full bg-white/5 border border-white/10",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-4 w-20 bg-white/10 rounded"}),Y.jsx("div",{className:"h-3 w-12 bg-white/5 rounded"})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("div",{className:"h-3 w-10 bg-white/5 rounded"}),Y.jsx("div",{className:"w-4 h-4 bg-white/5 rounded"})]})]},t)))}),Y.jsx("div",{className:"text-center py-4 mt-4 pb-20",children:Y.jsx("div",{className:"inline-flex h-9 w-48 bg-white/5 border border-white/10 rounded-full"})})]})]}),z&&Y.jsx("div",{className:"text-red-400 mb-3",children:z}),!P&&s&&Y.jsxs("div",{className:"max-w-[90rem] mx-auto",children:[Y.jsxs("div",{className:"grid grid-cols-5 gap-4 lg:hidden mb-6",children:[Y.jsx("div",{className:"relative group col-span-3",children:Y.jsxs("div",{className:"relative aspect-[3/4] w-full overflow-hidden rounded-xl border border-white/10 bg-white/5",children:[he&&Y.jsx("img",{src:he,alt:s?.title,className:"w-full h-full object-cover transition-transform duration-300 ease-out will-change-transform group-hover:scale-[1.02]"}),Y.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/40 via-black/0 to-black/20"}),xe.length>1&&Y.jsx("button",{onClick:()=>ne(!0),className:"absolute top-2 right-2 p-2 bg-black/50 hover:bg-black/70 rounded-lg transition-colors",children:Y.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})}),Y.jsxs("div",{className:"space-y-3 col-span-2",children:[Y.jsx("h1",{className:"text-white text-lg font-bold tracking-tight leading-tight",children:s?.title||s?.comic?.title}),s?.alt_titles&&s.alt_titles.length>0&&Y.jsx("div",{children:Y.jsx("p",{className:"text-gray-400 text-xs",children:s.alt_titles.slice(0,1).join(" • ")})}),null!==le&&Y.jsx("div",{className:"flex items-center space-x-2",children:Y.jsxs("div",{className:"flex items-center space-x-1",children:[Y.jsx("div",{className:"flex",children:[...[,,,,,]].map(((e,t)=>Y.jsx("svg",{className:"w-3 h-3 "+(le>t?"text-yellow-400":"text-gray-600"),fill:"currentColor",viewBox:"0 0 20 20",children:Y.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t)))}),Y.jsx("span",{className:"text-gray-400 text-xs ml-1",children:le.toFixed(1)})]})}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Status:"}),Y.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Ongoing"===fe?"bg-green-500/20 text-green-400":"Completed"===fe?"bg-blue-500/20 text-blue-400":"Hiatus"===fe?"bg-yellow-500/20 text-yellow-400":"Cancelled"===fe||"Dropped"===fe?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"),children:fe})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Chapters:"}),Y.jsx("span",{className:"text-white text-xs font-medium",children:ve})]}),be>0&&Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Views:"}),Y.jsx("span",{className:"text-white text-sm font-bold",children:be.toLocaleString()})]}),ye>0&&Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Follows:"}),Y.jsx("span",{className:"text-white text-sm font-bold",children:ye.toLocaleString()})]}),je>0&&Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Comments:"}),Y.jsx("span",{className:"text-white text-sm font-bold",children:je.toLocaleString()})]}),ge.length>0&&Y.jsxs("div",{className:"flex items-start space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Author:"}),Y.jsxs("div",{className:"flex flex-wrap gap-1",children:[ge.slice(0,2).map(((e,t)=>Y.jsxs("span",{className:"text-white text-xs",children:[e.name||e,t<Math.min(ge.length,2)-1&&", "]},t))),ge.length>2&&Y.jsxs("span",{className:"text-gray-400 text-xs",children:["+",ge.length-2]})]})]}),pe.length>0&&Y.jsxs("div",{className:"flex items-start space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Genres:"}),Y.jsxs("div",{className:"flex flex-wrap gap-1",children:[pe.slice(0,3).map(((e,t)=>Y.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 text-white text-xs rounded-full",children:e.name||e},t))),pe.length>3&&Y.jsxs("span",{className:"text-gray-400 text-xs",children:["+",pe.length-3]})]})]}),we.year&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Year:"}),Y.jsx("span",{className:"text-white text-xs",children:we.year})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Language:"}),Y.jsx("span",{className:"text-white text-xs",children:Te})]}),Ce&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Rating:"}),Y.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("Safe"===Ce?"bg-green-500/20 text-green-400":"Suggestive"===Ce?"bg-yellow-500/20 text-yellow-400":"Erotica"===Ce?"bg-orange-500/20 text-orange-400":"Pornographic"===Ce?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"),children:Ce})]}),ke&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Demographic:"}),Y.jsx("span",{className:"text-white text-xs",children:ke})]}),(_e||Me)&&Y.jsxs("div",{className:"space-y-2",children:[_e&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Publisher:"}),Y.jsx("span",{className:"text-white text-xs",children:_e})]}),Me&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Serialization:"}),Y.jsx("span",{className:"text-white text-xs",children:Me})]})]}),Ne&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Last Updated:"}),Y.jsx("span",{className:"text-white text-xs",children:Ne.toLocaleDateString()})]})]})]})]}),Y.jsxs("div",{className:"lg:hidden mb-6",children:[Y.jsx("h3",{className:"text-white text-lg font-semibold mb-3",children:"Description"}),Y.jsx("p",{className:"text-gray-300/90 leading-relaxed whitespace-pre-wrap text-sm",children:Le})]}),Y.jsxs("div",{className:"hidden lg:grid lg:grid-cols-5 gap-6 lg:gap-8",children:[Y.jsx("div",{className:"lg:col-span-2",children:Y.jsxs("div",{className:"sticky top-4",children:[Y.jsxs("div",{className:"flex gap-4 mb-6",children:[Y.jsx("div",{className:"relative group flex-shrink-0",children:Y.jsxs("div",{className:"relative aspect-[3/4] w-64 overflow-hidden rounded-xl border border-white/10 bg-white/5",children:[he&&Y.jsx("img",{src:he,alt:s?.title,className:"w-full h-full object-cover transition-transform duration-300 ease-out will-change-transform group-hover:scale-[1.02]"}),Y.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/40 via-black/0 to-black/20"}),xe.length>1&&Y.jsx("button",{onClick:()=>ne(!0),className:"absolute top-1 right-1 p-1 bg-black/50 hover:bg-black/70 rounded transition-colors",children:Y.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]})}),Y.jsxs("div",{className:"flex-1 space-y-3",children:[Y.jsx("h1",{className:"text-white text-xl font-bold tracking-tight leading-tight",children:s?.title||s?.comic?.title}),s?.alt_titles&&s.alt_titles.length>0&&Y.jsx("div",{children:Y.jsx("p",{className:"text-gray-400 text-sm",children:s.alt_titles.slice(0,1).join(" • ")})}),null!==le&&Y.jsx("div",{className:"flex items-center space-x-2",children:Y.jsxs("div",{className:"flex items-center space-x-1",children:[Y.jsx("div",{className:"flex",children:[...[,,,,,]].map(((e,t)=>Y.jsx("svg",{className:"w-4 h-4 "+(le>t?"text-yellow-400":"text-gray-600"),fill:"currentColor",viewBox:"0 0 20 20",children:Y.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},t)))}),Y.jsx("span",{className:"text-gray-400 text-sm ml-1",children:le.toFixed(1)})]})}),Y.jsxs("div",{className:"space-y-3",children:[Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Status:"}),Y.jsx("span",{className:"px-2 py-1 rounded-full text-sm font-medium "+("Ongoing"===fe?"bg-green-500/20 text-green-400":"Completed"===fe?"bg-blue-500/20 text-blue-400":"Hiatus"===fe?"bg-yellow-500/20 text-yellow-400":"Cancelled"===fe||"Dropped"===fe?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"),children:fe})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Chapters:"}),Y.jsx("span",{className:"text-white text-sm font-medium",children:ve})]}),be>0&&Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Views:"}),Y.jsx("span",{className:"text-white text-base font-bold",children:be.toLocaleString()})]}),ye>0&&Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Follows:"}),Y.jsx("span",{className:"text-white text-base font-bold",children:ye.toLocaleString()})]}),je>0&&Y.jsxs("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded-lg",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Comments:"}),Y.jsx("span",{className:"text-white text-base font-bold",children:je.toLocaleString()})]}),ge.length>0&&Y.jsxs("div",{className:"flex items-start space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Author:"}),Y.jsxs("div",{className:"flex flex-wrap gap-1",children:[ge.slice(0,2).map(((e,t)=>Y.jsxs("span",{className:"text-white text-sm",children:[e.name||e,t<Math.min(ge.length,2)-1&&", "]},t))),ge.length>2&&Y.jsxs("span",{className:"text-gray-400 text-sm",children:["+",ge.length-2]})]})]}),pe.length>0&&Y.jsxs("div",{className:"flex items-start space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Genres:"}),Y.jsxs("div",{className:"flex flex-wrap gap-1",children:[pe.slice(0,3).map(((e,t)=>Y.jsx("span",{className:"px-1.5 py-0.5 bg-white/10 text-white text-sm rounded-full",children:e.name||e},t))),pe.length>3&&Y.jsxs("span",{className:"text-gray-400 text-sm",children:["+",pe.length-3]})]})]}),we.year&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Year:"}),Y.jsx("span",{className:"text-white text-sm",children:we.year})]}),Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Language:"}),Y.jsx("span",{className:"text-white text-sm",children:Te})]}),Ce&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Rating:"}),Y.jsx("span",{className:"px-2 py-1 rounded-full text-sm font-medium "+("Safe"===Ce?"bg-green-500/20 text-green-400":"Suggestive"===Ce?"bg-yellow-500/20 text-yellow-400":"Erotica"===Ce?"bg-orange-500/20 text-orange-400":"Pornographic"===Ce?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"),children:Ce})]}),ke&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Demographic:"}),Y.jsx("span",{className:"text-white text-sm",children:ke})]}),(_e||Me)&&Y.jsxs("div",{className:"space-y-2",children:[_e&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Publisher:"}),Y.jsx("span",{className:"text-white text-sm",children:_e})]}),Me&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Serialization:"}),Y.jsx("span",{className:"text-white text-sm",children:Me})]})]}),Ne&&Y.jsxs("div",{className:"flex items-center space-x-2",children:[Y.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Last Updated:"}),Y.jsx("span",{className:"text-white text-sm",children:Ne.toLocaleDateString()})]})]})]})]}),Y.jsxs("div",{className:"mt-6",children:[Y.jsx("h3",{className:"text-white text-xl font-semibold mb-3",children:"Description"}),Y.jsx("p",{className:"text-gray-300/90 leading-relaxed whitespace-pre-wrap text-base",children:Le})]})]})}),Y.jsx("div",{className:"lg:col-span-3",children:Y.jsxs("div",{className:"sticky top-4",children:[Y.jsxs("div",{className:"bg-[#181c20] rounded-2xl border border-white/10 transition-all duration-300 "+(J?"p-3 mb-3":"p-4 mb-6"),children:[Y.jsxs("div",{className:"flex items-center justify-between transition-all duration-300 "+(J?"mb-0":"mb-4"),children:[Y.jsxs("button",{onClick:()=>K(!J),className:"flex items-center space-x-3 hover:bg-white/5 rounded-lg p-1 -m-1 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors","aria-label":J?"Expand filters":"Collapse filters",children:[Y.jsx("h2",{className:"text-white text-lg font-semibold",children:"Chapters"}),Y.jsx("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(J?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Y.jsxs("div",{className:"flex items-center space-x-3",children:[Y.jsxs("span",{className:"text-gray-400 text-sm",children:[Be.length," chapter",1!==Be.length?"s":"",n.length>0&&n.length!==Be.length&&Y.jsxs("span",{className:"text-gray-500",children:[" ","(",n.length," total)"]})]}),Ae&&Y.jsxs("button",{onClick:Ie,className:"px-3 py-1.5 text-xs font-medium text-blue-400 hover:text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 rounded-full border border-blue-500/20 hover:border-blue-500/30 transition-all duration-200 flex items-center space-x-1",children:[Y.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Y.jsx("span",{className:"block md:hidden",children:"Clear"}),Y.jsx("span",{className:"hidden md:block",children:"Clear Filters"})]})]})]}),Y.jsx(Vt,{children:!J&&Y.jsxs(Ft.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:[Y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 mb-4",children:[Y.jsxs("div",{className:"relative",children:[Y.jsx("input",{type:"text",placeholder:"Search chapters...",value:w,onChange:e=>v(e.target.value),className:"w-full bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors placeholder-gray-400"}),Y.jsx("svg",{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),Y.jsxs("select",{value:g,onChange:e=>f(e.target.value),className:"appearance-none bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors",children:[Y.jsx("option",{value:"",children:"All languages"}),m.map((e=>Y.jsx("option",{value:e,children:ir(e)},e)))]}),Y.jsxs("select",{value:T,onChange:e=>{_(e.target.value),L("")},className:"appearance-none bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors",children:[Y.jsx("option",{value:"",children:"All volumes"}),B.map((e=>Y.jsxs("option",{value:e,children:["Vol ",e]},e)))]}),Y.jsxs("select",{value:j,onChange:e=>k(e.target.value),className:"appearance-none bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors",children:[Y.jsx("option",{value:"desc",children:"Newest first"}),Y.jsx("option",{value:"asc",children:"Oldest first"})]})]}),Y.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[Y.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[Y.jsx("input",{type:"checkbox",checked:C,onChange:e=>S(e.target.checked),className:"w-4 h-4 text-blue-600 bg-white/5 border-white/20 rounded-full focus:ring-blue-500 focus:ring-2"}),Y.jsx("span",{className:"text-gray-300 text-sm",children:"Show only unread"})]}),Y.jsxs("select",{value:M,onChange:e=>L(e.target.value),className:"appearance-none bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors",children:[Y.jsx("option",{value:"",children:"All chapters"}),H.map((e=>Y.jsxs("option",{value:e,children:["Ch ",e]},e)))]})]}),Ae&&Y.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:Y.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Active filters:"}),g&&Y.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:ir(g)}),w&&Y.jsxs("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full",children:['Search: "',w,'"']}),C&&Y.jsx("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded-full",children:"Unread only"}),T&&Y.jsxs("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded-full",children:["Vol ",T]}),M&&Y.jsxs("span",{className:"px-2 py-1 bg-pink-500/20 text-pink-400 text-xs rounded-full",children:["Ch ",M]}),"desc"!==j&&Y.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:"Oldest first"})]})}),(I||o)&&Y.jsx("div",{className:"mt-4 flex justify-center",children:Y.jsx(N,{isLoading:!0,error:null,retryCount:x,onRetry:Fe,context:"chapters",className:"col-span-full",hasContent:n.length>0})}),o&&n.length>0&&Y.jsxs("div",{className:"mt-2 text-center",children:[Y.jsxs("div",{className:"text-gray-400 text-xs mb-2",children:["Loading languages... (",d.loaded,"/",d.total,") - ",d.currentLang]}),Y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:Y.jsx("div",{className:"bg-white/80 h-1.5 rounded-full transition-all duration-300",style:{width:d.loaded/d.total*100+"%"}})}),Y.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[n.length," chapters loaded so far"]})]})]})})]}),Y.jsxs("div",{className:"space-y-2 max-h-[calc(100vh-31rem)] overflow-y-auto",children:[Y.jsx(Vt,{mode:"popLayout",children:Be.slice(0,Z).map(((e,s)=>Y.jsx(Ft.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.2,delay:Math.min(.01*s,.1),layout:{duration:.15,ease:"easeOut"}},children:Y.jsx(nr,{ch:e,isRead:ze(e),isBookmarked:Re(e),onRead:()=>{const s=e?.hid||e?.id;s&&(Pe(s),t("/manga/chapter/"+encodeURIComponent(s)))},onBookmark:Ee})},e?.hid||e?.id||s)))}),0===Be.length&&!I&&Y.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No chapters found. Try adjusting your filters."})]}),Be.length>Z&&Y.jsx("div",{className:"text-center py-4 mt-4",children:Y.jsxs("button",{onClick:Ve,className:"inline-flex items-center justify-center px-6 py-3 rounded-full bg-[#181c20] hover:bg-white/5 text-white text-sm font-medium transition-all duration-200 border border-white/20 hover:border-white/30 hover:scale-[1.02] active:scale-[0.98]",children:[Y.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Show More Chapters (",Be.length-Z," remaining)"]})})]})})]}),Y.jsxs("div",{className:"lg:hidden",children:[Y.jsxs("div",{className:"bg-[#181c20] rounded-2xl border border-white/10 transition-all duration-300 "+(J?"p-3 mb-3":"p-4 mb-6"),children:[Y.jsxs("div",{className:"flex items-center justify-between transition-all duration-300 "+(J?"mb-0":"mb-4"),children:[Y.jsxs("button",{onClick:()=>K(!J),className:"flex items-center space-x-2 rounded-lg p-2 -m-2 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors","aria-label":J?"Expand filters":"Collapse filters",children:[Y.jsx("h2",{className:"text-white text-lg font-semibold",children:"Chapters"}),Y.jsx("svg",{className:"w-4 h-4 text-gray-400 transition-transform duration-200 "+(J?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Y.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[Y.jsxs("span",{className:"text-gray-400 text-xs whitespace-nowrap",children:[Be.length," ch",1!==Be.length?"s":"",n.length>0&&n.length!==Be.length&&Y.jsxs("span",{className:"text-gray-500",children:[" ","(",n.length,")"]})]}),Ae&&Y.jsxs("button",{onClick:Ie,className:"px-3 py-1.5 text-xs font-medium text-blue-400 hover:text-blue-300 bg-blue-500/10 hover:bg-blue-500/20 rounded-full border border-blue-500/20 hover:border-blue-500/30 transition-all duration-200 flex items-center space-x-1 flex-shrink-0",children:[Y.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Y.jsx("span",{children:"Clear"})]})]})]}),Y.jsx(Vt,{children:!J&&Y.jsx(Ft.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:Y.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[Y.jsxs("div",{className:"relative",children:[Y.jsx("input",{type:"text",placeholder:"Search chapters...",value:w,onChange:e=>v(e.target.value),className:"w-full bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors placeholder-gray-400"}),Y.jsx("svg",{className:"absolute right-3 top-2.5 w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),Y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Y.jsxs("select",{value:g,onChange:e=>f(e.target.value),className:"appearance-none bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors",children:[Y.jsx("option",{value:"",children:"All languages"}),m.map((e=>Y.jsx("option",{value:e,children:ir(e)},e)))]}),Y.jsxs("select",{value:T,onChange:e=>{_(e.target.value),L("")},className:"appearance-none bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors",children:[Y.jsx("option",{value:"",children:"All volumes"}),B.map((e=>Y.jsxs("option",{value:e,children:["Vol ",e]},e)))]})]}),Y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[Y.jsxs("select",{value:j,onChange:e=>k(e.target.value),className:"appearance-none bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors",children:[Y.jsx("option",{value:"desc",children:"Newest first"}),Y.jsx("option",{value:"asc",children:"Oldest first"})]}),Y.jsxs("select",{value:M,onChange:e=>L(e.target.value),className:"appearance-none bg-white/5 text-white text-sm rounded-full px-3 py-2 border border-white/10 hover:border-white/20 focus:outline-none focus:ring-2 focus:ring-white/20 transition-colors",children:[Y.jsx("option",{value:"",children:"All chapters"}),H.map((e=>Y.jsxs("option",{value:e,children:["Ch ",e]},e)))]})]}),Y.jsx("div",{className:"flex items-center gap-3",children:Y.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[Y.jsx("input",{type:"checkbox",checked:C,onChange:e=>S(e.target.checked),className:"w-4 h-4 text-blue-600 bg-white/5 border-white/20 rounded-full focus:ring-blue-500 focus:ring-2"}),Y.jsx("span",{className:"text-gray-300 text-sm",children:"Show only unread"})]})}),Ae&&Y.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:Y.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[Y.jsx("span",{className:"text-gray-400 text-xs font-medium",children:"Active filters:"}),g&&Y.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 text-xs rounded-full",children:ir(g)}),w&&Y.jsxs("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded-full",children:['Search: "',w,'"']}),C&&Y.jsx("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded-full",children:"Unread only"}),T&&Y.jsxs("span",{className:"px-2 py-1 bg-purple-500/20 text-purple-400 text-xs rounded-full",children:["Vol ",T]}),M&&Y.jsxs("span",{className:"px-2 py-1 bg-pink-500/20 text-pink-400 text-xs rounded-full",children:["Ch ",M]}),"desc"!==j&&Y.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs rounded-full",children:"Oldest first"})]})}),(I||o)&&Y.jsx("div",{className:"mt-4 flex justify-center",children:Y.jsx(N,{isLoading:!0,error:null,retryCount:x,onRetry:Fe,context:"chapters",className:"col-span-full",hasContent:n.length>0})}),o&&n.length>0&&Y.jsxs("div",{className:"mt-2 text-center",children:[Y.jsxs("div",{className:"text-gray-400 text-xs mb-2",children:["Loading languages... (",d.loaded,"/",d.total,") - ",d.currentLang]}),Y.jsx("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:Y.jsx("div",{className:"bg-white-500 h-1.5 rounded-full transition-all duration-300",style:{width:d.loaded/d.total*100+"%"}})}),Y.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[n.length," chapters loaded so far"]})]})]})})})]}),Y.jsxs("div",{className:"space-y-2 max-h-[calc(100vh-20rem)] overflow-y-auto",children:[Y.jsx(Vt,{mode:"popLayout",children:Be.slice(0,Z).map(((e,s)=>Y.jsx(Ft.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.2,delay:Math.min(.01*s,.1),layout:{duration:.15,ease:"easeOut"}},children:Y.jsx(nr,{ch:e,isRead:ze(e),isBookmarked:Re(e),onRead:()=>{const s=e?.hid||e?.id;s&&(Pe(s),t("/manga/chapter/"+encodeURIComponent(s)))},onBookmark:Ee})},e?.hid||e?.id||s)))}),0===Be.length&&!I&&Y.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No chapters found. Try adjusting your filters."})]}),Be.length>Z&&Y.jsx("div",{className:"text-center py-4 mt-4 pb-20",children:Y.jsxs("button",{onClick:Ve,className:"inline-flex items-center justify-center px-6 py-3 rounded-full bg-[#181c20] hover:bg-white/5 text-white text-sm font-medium transition-all duration-200 border border-white/20 hover:border-white/30 hover:scale-[1.02] active:scale-[0.98]",children:[Y.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Show More Chapters (",Be.length-Z," remaining)"]})})]})]})]}),Y.jsx(Vt,{children:ie&&Y.jsx(Ft.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>ne(!1),children:Y.jsxs(Ft.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white/10 rounded-xl p-6 max-w-4xl max-h-[90vh] overflow-y-auto border border-white/20",onClick:e=>e.stopPropagation(),children:[Y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Y.jsx("h3",{className:"text-white text-xl font-semibold",children:"Cover Gallery"}),Y.jsx("button",{onClick:()=>ne(!1),className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:Y.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:xe.map(((e,t)=>Y.jsxs("div",{className:"group",children:[Y.jsx("div",{className:"relative aspect-[3/4] overflow-hidden rounded-lg border border-white/20",children:Y.jsx("img",{src:e.url,alt:"Cover "+e.volume,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"})}),Y.jsxs("div",{className:"mt-2 text-center",children:[Y.jsx("p",{className:"text-white text-sm font-medium",children:e.volume}),e.description&&Y.jsx("p",{className:"text-gray-400 text-xs mt-1",children:e.description})]})]},t)))})]})})})]})}),((e,t)=>!0)),or=Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"})),cr=K.memo((()=>{const{hid:e}=Se(),t=Q(),[s,r]=U.useState([]),[a,i]=U.useState(!0),[n,l]=U.useState(""),[o,c]=U.useState(1),[d,u]=U.useState(!0),[m,h]=U.useState(0),[x,p]=U.useState(0),[g,f]=U.useState(null),[w,v]=U.useState({}),[b,y]=U.useState(new Set),[j,k]=U.useState("fast"),C=U.useRef(null),S=U.useRef(null),T=U.useRef([]),_=U.useRef(null),[M,L]=U.useState(null),[P,E]=U.useState(null),[z,R]=U.useState(null),[I,A]=U.useState([]),[F,V]=U.useState(-1),[B,D]=U.useState(null),[H,W]=U.useState(null),[O,$]=U.useState({x:0,y:0}),[q,Z]=U.useState(!1),[G,J]=U.useState({x:0,y:0}),K=U.useRef(null),X=U.useRef(null),[ee,te]=U.useState(!1),[se,re]=U.useState(!0),ae=U.useRef(null),[ie,ne]=U.useState((()=>{try{return localStorage.getItem("mangaReader.theme")||"black"}catch{return"black"}})),le=U.useRef(!0),oe=[{id:"black",name:"Black",bg:"bg-black",text:"text-white",color:"#000000"},{id:"dark",name:"Dark",bg:"bg-gray-900",text:"text-white",color:"#1f2937"},{id:"light",name:"Light",bg:"bg-white",text:"text-gray-900",color:"#ffffff"},{id:"sepia",name:"Sepia",bg:"bg-amber-50",text:"text-amber-900",color:"#fffbeb"},{id:"blue",name:"Blue",bg:"bg-blue-900",text:"text-blue-100",color:"#1e3a8a"},{id:"green",name:"Green",bg:"bg-green-900",text:"text-green-100",color:"#14532d"}];U.useEffect((()=>{try{localStorage.setItem("mangaReader.theme",ie)}catch{}}),[ie]);const ce=U.useCallback((()=>{const e=(oe.findIndex((e=>e.id===ie))+1)%oe.length;ne(oe[e].id)}),[ie]),de=oe.find((e=>e.id===ie))||oe[0];U.useEffect((()=>{le.current=!0;const e=ot.monitorNetworkStatus((e=>{le.current&&k(e)}));return()=>{le.current=!1,T.current=[],e(),_.current&&_.current.abort(),ae.current&&clearTimeout(ae.current)}}),[]),U.useEffect((()=>{T.current=[]}),[s]),U.useEffect((()=>{const e=C.current;if(!e)return;const t=()=>{le.current&&(te(!0),re(!1),ae.current&&clearTimeout(ae.current),ae.current=setTimeout((()=>{le.current&&(te(!1),re(!0))}),1e3))};return e.addEventListener("scroll",t,{passive:!0}),()=>{e.removeEventListener("scroll",t),ae.current&&clearTimeout(ae.current)}}),[s.length]),U.useEffect((()=>{e&&le.current&&(async()=>{try{const t=await kt.getChapter(e),s=(t?.data?.relationships||[]).find((e=>"manga"===e?.type));if(s?.id&&E(s.id),s?.id){let t=[];try{const e=await kt.getAggregate(s.id),r=e?.volumes||{};for(const s of Object.keys(r)){const e=r[s]?.chapters||{};for(const s of Object.keys(e)){const r=e[s],a=r?.id||r?.chapter&&r.chapter.id||null;t.push({id:a,hid:a,chap:s})}}}catch{}if(!t.length){const e=await kt.getMangaFeed(s.id,{limit:100,order:{chapter:"asc"}});t=(e?.data||[]).map((e=>({id:e?.id,hid:e?.id,chap:e?.attributes?.chapter})))}t.sort(((e,t)=>(parseFloat(e.chap)||0)-(parseFloat(t.chap)||0)));const r=new Set,a=[];for(const e of t)r.has(e.hid)||(r.add(e.hid),a.push(e));A(a);const i=a.findIndex((t=>t.hid===e));V(i),W(i>0?a[i-1]:null),D(i>=0&&i<a.length-1?a[i+1]:null)}}catch(t){}})()}),[e]),U.useEffect((()=>{s.length&&m>=0&&le.current&&(async()=>{const e="fast"===j?3:"slow"===j?2:1,t=Math.max(0,m-e),r=Math.min(s.length-1,m+e),a=[];for(let n=t;r>=n;n++)s[n]&&a.push(s[n]);if(a.length>0)try{await Ct(a),le.current&&y((e=>{const s=new Set(e);for(let a=t;r>=a;a++)s.add(a);return s}))}catch(i){}})()}),[m,s.length,j]),U.useEffect((()=>{if(0===s.length)return;const e=setInterval((()=>{if(!le.current)return;const e=Math.max(0,m-10),t=Math.min(s.length-1,m+10);v((s=>{const r={};for(let a=e;t>=a;a++)s[a]&&(r[a]=s[a]);return r}))}),3e4);return()=>clearInterval(e)}),[s.length,m]),U.useEffect((()=>{const e=C.current,t=T.current[m];if(!e||!t||!le.current)return;const s=e.getBoundingClientRect().top,r=t.getBoundingClientRect().top,a=e.scrollTop,i=r-s;e.scrollTo({top:Math.max(0,a+i-12),behavior:"smooth"})}),[m,s.length]),U.useEffect((()=>{le.current&&e&&(i(!0),l(""),v({}),y(new Set),(async()=>{try{const t=async t=>{if(!le.current)throw Error("Component unmounted");let s;try{s=await kt.getAtHomeServer(e,{forcePort443:!0})}catch{s=await kt.getAtHomeServer(e)}const r=s?.baseUrl,a=await kt.getChapter(e),i=a?.data?.attributes?.hash,n=a?.data?.attributes?.data||[],l=a?.data?.attributes?.dataSaver||[],o=!n.length&&l.length>0,c=n.length?n:l;return f({base:r,hash:i,pages:n.length,pagesSaver:l.length}),{success:!0,data:c.map((e=>`${r}/${o?"data-saver":"data"}/${i}/${e}`)).map((e=>{try{const t=new URL("https://streamr-jjj9.onrender.com/api",window.location.origin),s=t.pathname.replace(/\/$/,"");return`${t.origin}${s}/v1/mangadex/proxy-image?url=${encodeURIComponent(e)}`}catch{return"/api/v1/mangadex/proxy-image?url="+encodeURIComponent(e)}}))}},s=await ot.retryWithBackoff(t,"chapter images");if(!le.current)return;if(!s.success)throw s.error;{const t=s.data,a=Array.isArray(t)?t:[];if(r(a),0===a.length){try{const t=I.find((t=>t.hid===e)),s=t?.chap;if(s){const t=I.filter((t=>t.chap===s&&t.hid!==e));for(const e of t)try{let t;try{t=await kt.getAtHomeServer(e.hid,{forcePort443:!0})}catch{t=await kt.getAtHomeServer(e.hid)}const s=t?.baseUrl,a=await kt.getChapter(e.hid),i=a?.data?.attributes?.hash,n=a?.data?.attributes?.data||[],o=a?.data?.attributes?.dataSaver||[],c=!n.length&&o.length>0,d=n.length?n:o;if(d.length>0){const e=d.map((e=>`${s}/${c?"data-saver":"data"}/${i}/${e}`));return r(e),void l("")}}catch{}}}catch{}l("No pages available for this chapter from MangaDex.")}h(0);const i={};a.forEach(((e,t)=>{i[t]={loading:!1,error:!1,loaded:!1}})),v(i)}}catch(t){if(!le.current)return;let e="Unable to load manga";if("AbortError"===t.name)e="Request was cancelled. Please try again.";else if(t.message&&t.message.includes("signal is aborted"))e="Request was cancelled. Please try again.";else{if(t.message&&t.message.includes("Component unmounted"))return;e=ot.getErrorMessage(t,"chapter")}l(e)}finally{le.current&&i(!1)}})())}),[e,x]);const ue=U.useCallback((()=>{p((e=>e+1))}),[]),me=U.useCallback((()=>{B?.hid&&t("/manga/chapter/"+encodeURIComponent(B.hid))}),[B,t]),he=U.useCallback((()=>{H?.hid&&t("/manga/chapter/"+encodeURIComponent(H.hid))}),[H,t]),xe=U.useCallback((e=>{if(e.target.closest("button"))return;Z(!0);const t=(K.current||X.current)?.getBoundingClientRect();t&&J({x:e.clientX-t.left,y:e.clientY-t.top}),e.preventDefault()}),[]),pe=U.useCallback((e=>{if(!q)return;const t=e.clientX-G.x,s=e.clientY-G.y,r=K.current||X.current,a=window.innerWidth-(r?.offsetWidth||0),i=window.innerHeight-(r?.offsetHeight||0);$({x:Math.max(0,Math.min(t,a)),y:Math.max(0,Math.min(s,i))})}),[q,G]),ge=U.useCallback((()=>{Z(!1)}),[]),fe=U.useCallback((e=>{if(e.target.closest("button"))return;Z(!0);const t=(K.current||X.current)?.getBoundingClientRect();t&&J({x:e.touches[0].clientX-t.left,y:e.touches[0].clientY-t.top}),e.preventDefault()}),[]),we=U.useCallback((e=>{if(!q)return;const t=e.touches[0].clientX-G.x,s=e.touches[0].clientY-G.y,r=K.current||X.current,a=window.innerWidth-(r?.offsetWidth||0),i=window.innerHeight-(r?.offsetHeight||0);$({x:Math.max(0,Math.min(t,a)),y:Math.max(0,Math.min(s,i))}),e.preventDefault()}),[q,G]),ve=U.useCallback((()=>{Z(!1)}),[]);U.useEffect((()=>{if(q)return document.addEventListener("mousemove",pe),document.addEventListener("mouseup",ge),document.addEventListener("touchmove",we,{passive:!1}),document.addEventListener("touchend",ve),()=>{document.removeEventListener("mousemove",pe),document.removeEventListener("mouseup",ge),document.removeEventListener("touchmove",we),document.removeEventListener("touchend",ve)}}),[q,pe,ge,we,ve]);const be=U.useCallback((e=>{le.current&&v((t=>({...t,[e]:{loading:!1,error:!1,loaded:!0}})))}),[]),ye=U.useCallback((e=>{le.current&&v((t=>({...t,[e]:{loading:!1,error:!0,loaded:!1}})))}),[]),je=U.useCallback((e=>{le.current&&v((t=>({...t,[e]:{loading:!0,error:!1,loaded:!1}})))}),[]),Ne=U.useCallback((({src:e,index:t,alt:s})=>{const r=U.useRef(null);return Y.jsxs("div",{className:"relative",children:[w[t]?.loading&&Y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800/50 rounded-xl",children:Y.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-white rounded-full animate-spin"})}),w[t]?.error&&Y.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-red-900/50 rounded-xl",children:Y.jsx("div",{className:"text-red-300 text-sm",children:"Failed to load"})}),Y.jsx("img",{ref:e=>{T.current[t]=e,r.current=e},src:e,alt:s,className:(d?"w-full h-auto max-w-5xl":"h-auto")+" rounded-xl shadow-lg",style:d?void 0:{width:"auto"},loading:"lazy",onLoadStart:()=>je(t),onLoad:()=>be(t),onError:()=>ye(t)})]})}),[d,w,be,ye,je]),ke=U.useCallback((()=>c((e=>Math.min(3,parseFloat((e+.1).toFixed(2)))))),[]),Ce=U.useCallback((()=>c((e=>Math.max(.5,parseFloat((e-.1).toFixed(2)))))),[]),_e=U.useCallback((()=>c(1)),[]),Me=U.useCallback((()=>u((e=>!e))),[]);return U.useEffect((()=>{const e=e=>{le.current&&(e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||e.target.isContentEditable)||("+"!==e.key&&"="!==e.key||(e.preventDefault(),ke()),"-"!==e.key&&"_"!==e.key||(e.preventDefault(),Ce()),"0"===e.key&&(e.preventDefault(),_e()),"f"!==e.key&&"F"!==e.key||(e.preventDefault(),Me()),"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),"ArrowLeft"===e.key&&H?he():"ArrowRight"===e.key&&B&&me())))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[ke,Ce,_e,Me,he,me,H,B]),Y.jsxs(Y.Fragment,{children:[Y.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${de.bg} ${de.text}`,children:["fast"!==j&&Y.jsx("div",{className:"sticky top-0 z-50 bg-yellow-500/20 border-b border-yellow-500/30 text-yellow-300 text-center py-1 text-sm",children:"slow"===j?"Slow connection detected - optimizing loading":"Very slow connection - reduced preloading"}),Y.jsx("div",{className:"sticky top-0 z-40 bg-[#121417]/80 backdrop-blur-md border-b border-white/10",children:Y.jsxs("div",{className:"mx-auto max-w-6xl px-2 md:px-3 py-1.5 md:py-2 flex items-center justify-between md:justify-start gap-2 md:gap-2 overflow-x-auto",style:{WebkitOverflowScrolling:"touch"},children:[Y.jsxs("div",{className:"relative inline-block group",children:[Y.jsx("button",{onClick:()=>{t(z?"/manga/"+z:"/manga")},className:"inline-flex items-center justify-center w-8 h-8 md:w-9 md:h-9 rounded-full bg-white/5 hover:bg-white/10 text-white border border-white/10 hover:border-white/20 shadow-sm hover:shadow backdrop-blur-sm transition-all duration-200 shrink-0 focus:outline-none focus:ring-2 focus:ring-white/20","aria-label":"Back to manga details",children:Y.jsx("span",{className:"text-sm md:text-base",children:"←"})}),Y.jsxs("div",{className:"absolute left-full border border-white/10 top-1/2 -translate-y-1/2 ml-3 px-3 py-2 bg-black/90 text-white text-sm rounded-full opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none whitespace-nowrap z-50 shadow-lg",children:[M?.title?"Back to "+M.title:"Back to manga details",Y.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 w-0 h-0 border-t-[6px] border-b-[6px] border-r-[6px] border-transparent border-r-black/90"})]})]}),Y.jsx("div",{className:"h-6 w-px bg-white/10 mx-1 hidden md:block"}),Y.jsxs("div",{className:"flex items-center gap-2 md:gap-2 shrink-0",children:[Y.jsx("button",{onClick:Ce,className:"w-8 h-8 md:w-9 md:h-9 rounded-full flex justify-center items-center bg-white/5 hover:bg-white/10 text-white text-xs md:text-sm border border-white/10","aria-label":"Zoom out",children:Y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),Y.jsxs("div",{className:"px-2 text-white/90 text-xs md:text-sm tabular-nums",children:[Math.round(100*o),"%"]}),Y.jsx("button",{onClick:ke,className:"w-8 h-8 md:w-9 md:h-9 rounded-full flex justify-center items-center bg-white/5 hover:bg-white/10 text-white text-xs md:text-sm border border-white/10","aria-label":"Zoom in",children:Y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),Y.jsx("button",{onClick:_e,className:"w-8 h-8 md:w-9 md:h-9 rounded-full flex justify-center items-center bg-white/5 hover:bg-white/10 text-white text-xs md:text-sm border border-white/10","aria-label":"Reset zoom",children:Y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),Y.jsx("div",{className:"h-6 w-px bg-white/10 mx-1 hidden md:block"}),Y.jsx("button",{onClick:Me,className:"inline-flex items-center whitespace-nowrap px-2 py-1 md:px-3 md:py-1.5 rounded-full text-xs md:text-sm border transition-all duration-300 ease-in-out "+(d?"bg-white/80 border-white/80 text-black":"bg-white/5 hover:bg-white/10 text-white border-white/10"),"aria-label":d?"Fit: Width":"Fit: Original",children:Y.jsx("span",{className:"whitespace-nowrap transition-all duration-300 ease-in-out min-w-0 overflow-hidden",children:Y.jsx("span",{className:"inline-block transition-all duration-300 ease-in-out "+(d?"w-20":"w-24"),children:d?"Fit: Width":"Fit: Original"})})}),Y.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[Y.jsx("div",{className:"h-6 w-px bg-white/10 mx-1"}),Y.jsxs("button",{onClick:ce,className:"inline-flex items-center gap-2 px-3 py-1 md:px-3 md:py-1.5 rounded-full bg-white/5 hover:bg-white/10 text-white text-sm border border-white/10 hover:border-white/20 transition-all duration-200 group h-8 md:h-9","aria-label":"Cycle theme",title:`Current: ${de.name} - Click to cycle themes`,children:["black"===ie&&Y.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"})}),"dark"===ie&&Y.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),"light"===ie&&Y.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[Y.jsx("circle",{cx:"12",cy:"12",r:"5"}),Y.jsx("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]}),"sepia"===ie&&Y.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"blue"===ie&&Y.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),"green"===ie&&Y.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),Y.jsx("span",{className:"text-xs",children:de.name}),Y.jsx("svg",{className:"w-3 h-3 transition-transform duration-200 group-hover:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})]})]}),Y.jsx("div",{className:"md:ml-auto flex items-center gap-2 shrink-0",children:s.length>0&&Y.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/70",children:[Y.jsxs("span",{className:"px-2 py-1 bg-white/10 rounded-full",children:[m+1," / ",s.length]}),Object.values(w).some((e=>e?.loading))&&Y.jsx("div",{className:"w-4 h-4 border border-white/20 border-t-white rounded-full animate-spin hidden md:block"})]})})]})}),n?Y.jsx(N,{isLoading:!1,error:n,retryCount:x,onRetry:ue,context:"chapter",className:"px-3 py-6 min-h-[60vh] flex items-center justify-center",networkProfile:j}):a&&0===s.length?Y.jsx(N,{isLoading:!0,error:null,retryCount:x,onRetry:ue,context:"chapter",className:"px-3 py-6 min-h-[60vh] flex items-center justify-center",hasContent:s.length>0,networkProfile:j}):!a&&s.length>0&&Y.jsx("div",{ref:C,className:"px-2 pb-20 md:pb-20 overflow-auto transition-colors duration-300 "+de.bg,children:Y.jsx("div",{ref:S,className:"flex flex-col items-center gap-4 pt-2 md:pt-4",style:{transform:`scale(${o})`,transformOrigin:"center top"},children:s.map(((e,t)=>Y.jsx(Ne,{src:e,index:t,alt:"Page "+(t+1)},t)))})}),(B||H)&&Te.createPortal(Y.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 transition-all duration-300 "+(se?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"),style:{position:"fixed",bottom:0,left:0,right:0,zIndex:9999},children:Y.jsx("div",{className:"bg-black/95 backdrop-blur-lg border-t border-white/20 px-4 py-3",children:Y.jsxs("div",{className:"flex items-center justify-between",children:[Y.jsx("div",{className:"flex-1 flex justify-start transition-all duration-300 "+(H?"opacity-100":"opacity-0 w-0"),children:H&&Y.jsxs("button",{onClick:he,className:"flex items-center gap-2 px-3 py-2 bg-white/5 hover:bg-white/10 text-white text-sm font-medium rounded-full transition-all duration-200 hover:scale-105 active:scale-95 border border-white/10 hover:border-white/20","aria-label":"Previous: "+(H.chap?"Ch "+H.chap:H.title||"Chapter"),children:[Y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),Y.jsx("span",{className:"text-white/90",children:H.chap?"Ch "+H.chap:"Prev"})]})}),Y.jsxs("div",{className:"flex items-center gap-3 text-white/70 text-sm",children:[Y.jsx("div",{className:"h-5 w-px bg-white/20"}),Y.jsxs("span",{className:"px-3 py-1.5 bg-white/10 rounded-full font-medium text-white/90",children:[F>=0&&I[F]?"Ch "+(I[F].chap||I[F].title||"?"):"?"," / ",I.length]}),M&&Y.jsx("span",{className:"text-xs text-white/50 max-w-20 truncate hidden sm:block",children:M.title}),Y.jsx("div",{className:"h-5 w-px bg-white/20"})]}),Y.jsx("div",{className:"flex-1 flex justify-end transition-all duration-300 "+(B?"opacity-100":"opacity-0 w-0"),children:B&&Y.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-3 py-2 bg-white/5 hover:bg-white/10 text-white text-sm font-medium rounded-full transition-all duration-200 hover:scale-105 active:scale-95 border border-white/10 hover:border-white/20","aria-label":"Next: "+(B.chap?"Ch "+B.chap:B.title||"Chapter"),children:[Y.jsx("span",{className:"text-white/90",children:B.chap?"Ch "+B.chap:"Next"}),Y.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})})}),document.body)]}),(B||H)&&Te.createPortal(Y.jsx("div",{ref:K,className:"hidden md:block fixed rounded-full z-50 select-none "+(q?"cursor-grabbing":"cursor-grab"),style:{position:"fixed",left:O.x||"50%",top:O.y||"auto",bottom:O.y?"auto":"16px",transform:O.x?"none":"translateX(-50%)",zIndex:9999},onMouseDown:xe,onTouchStart:fe,children:Y.jsxs("div",{className:"bg-black/90 backdrop-blur-lg border border-white/10 rounded-full p-2 md:p-3 shadow-2xl max-w-xs sm:max-w-sm md:max-w-none",children:[Y.jsx("div",{className:"flex justify-center mb-1",children:Y.jsx("div",{className:"w-8 h-1 bg-white/20 rounded-full"})}),Y.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 md:gap-6",children:[Y.jsx("div",{className:"transition-all duration-300 "+(H?"opacity-100 scale-100":"opacity-0 scale-95 w-0 overflow-hidden"),children:H&&Y.jsxs("button",{onClick:he,className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 bg-white/5 hover:bg-white/10 text-white text-xs sm:text-sm font-medium rounded-full transition-all duration-200 hover:scale-105 active:scale-95 border border-white/10 hover:border-white/20","aria-label":"Previous: "+(H.chap?"Ch "+H.chap:H.title||"Chapter"),children:[Y.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),Y.jsx("span",{className:"text-white/90 hidden sm:inline",children:H.chap?"Ch "+H.chap:"Prev"}),Y.jsx("span",{className:"text-white/90 sm:hidden",children:H.chap?H.chap:"←"})]})}),Y.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 md:gap-3 text-white/70 text-xs sm:text-sm",children:[F>0&&Y.jsx("div",{className:"h-4 sm:h-6 w-px bg-white/20"}),Y.jsxs("span",{className:"px-2 sm:px-3 py-1 sm:py-1.5 bg-white/10 rounded-full font-medium text-white/90",children:[F>=0&&I[F]?"Ch "+(I[F].chap||I[F].title||"?"):"?"," / ",I.length]}),M&&Y.jsx("span",{className:"text-xs text-white/50 max-w-16 sm:max-w-24 md:max-w-32 truncate hidden sm:block",children:M.title}),F<I.length-1&&Y.jsx("div",{className:"h-4 sm:h-6 w-px bg-white/20"})]}),Y.jsx("div",{className:"transition-all duration-300 "+(B?"opacity-100 scale-100":"opacity-0 scale-95 w-0 overflow-hidden"),children:B&&Y.jsxs("button",{onClick:me,className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 md:px-4 py-1.5 sm:py-2 bg-white/5 hover:bg-white/10 text-white text-xs sm:text-sm font-medium rounded-full transition-all duration-200 hover:scale-105 active:scale-95 border border-white/10 hover:border-white/20","aria-label":"Next: "+(B.chap?"Ch "+B.chap:B.title||"Chapter"),children:[Y.jsx("span",{className:"text-white/90 hidden sm:inline",children:B.chap?"Ch "+B.chap:"Next"}),Y.jsx("span",{className:"text-white/90 sm:hidden",children:B.chap?B.chap:"→"}),Y.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:Y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})}),document.body)]})}),((e,t)=>!0)),dr=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"}));export{Ls as C,Xs as D,zs as F,as as H,Ps as L,ps as M,Ws as N,Is as O,Ss as P,Rs as R,Ns as S,Os as T,Bs as V,Ms as W,Es as a,$s as b,rr as c,or as d,dr as e};
